#textdomain wesnoth-loti
[scenario]
    id=10_Lilith
    name= _ "Lilith"
    map_data="{~add-ons/Legend_of_the_Invincibles/maps/10_Temple_of_Lilith.map}"
    next_scenario=01_Thirst_for_Adventures
    victory_when_enemies_defeated=no
    turns=-1
    {GLOBAL_EVENTS}
    {SCENARIO_MUSIC "the_deep_path.ogg"}
    {EXTRA_SCENARIO_MUSIC battle.ogg}
    {UNDERGROUND}
#define LIGHTNING_STORMRIDER DIRECTION_NUMBER
    [attack_anim]
        [filter_attack]
            name=stormride
        [/filter_attack]

        {LIGHTNING_BOLT {DIRECTION_NUMBER} }

        start_time=-250
        [if]
            hits=yes
            [frame]
                duration=50
                sound=lightning.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                duration=50
                sound=lightning-miss.ogg
            [/frame]
        [/else]
        [frame]
            duration=200
            halo=units/human-loyalists/paladin-healing.png
        [/frame]
        [frame]
            duration=100
            halo=units/human-loyalists/paladin.png
        [/frame]
    [/attack_anim]
#enddef
#define UMBRA_APPARITION DEAD_EL

    [event]
        name=die
        [filter]
            id={DEAD_EL}
        [/filter]
        {VARIABLE_OP el_kill_count add 1}

        [if]
            [variable]
                name=el_kill_count
                numerical_equals=3
            [/variable]
            [then]
                [unit]
                    type=Mist
                    id=Umbra3
                    name="Umbra"
                    random_traits=yes
                    x,y=22,4
                    side=5
                    [modifications]
                        [object]
                            [effect]
                                apply_to=attack
                                range=melee
                                increase_damage=90%
                                set_type=arcane
                                set_description=_"Lilith's gift"
                                [set_specials]
                                    mode=append
                                    {WEAPON_SPECIAL_DRAIN}
                                    {WEAPON_SPECIAL_PLAGUE_TYPE_LOTI Ghost _"Ghost"}
                                [/set_specials]
                            [/effect]
                            [effect]
                                apply_to=attack
                                name=faerie fire
                                set_type=fire
                                [set_specials]
                                    mode=append
                                    {WEAPON_SPECIAL_PLAGUE_TYPE_LOTI Skeleton _"Skeleton"}
                                [/set_specials]
                            [/effect]
                            [effect]
                                apply_to=new_ability
                                [abilities]
                                    {ABILITY_LEADERSHIP_LEVEL 5}
                                [/abilities]
                            [/effect]
                            [effect]
                                apply_to=new_attack
                                name="dark light"
                                description= _ "dark light"
                                icon=attacks/lightbeam.png
                                type=arcane
                                range=ranged
                                [specials]
                                    {WEAPON_SPECIAL_MAGICAL}
                                [/specials]
                                damage=12
                                number=5
                                attack_weight=0
                            [/effect]
                            [effect]
                                apply_to=new_animation
                                name=dark light
                                [attack_anim]
                                    [filter_attack]
                                        name=dark light
                                    [/filter_attack]
                                    {MISSILE_FRAME_LIGHT_BEAM}

                                    [if]
                                        hits=yes
                                        [frame]
                                            begin=-75
                                            end=0
                                            sound={SOUND_LIST:HOLY}
                                        [/frame]
                                    [/if]
                                    [else]
                                        hits=no
                                        [frame]
                                            begin=-75
                                            end=0
                                            sound={SOUND_LIST:HOLY_MISS}
                                        [/frame]
                                    [/else]
                                [/attack_anim]
                            [/effect]
                            [effect]
                                apply_to=resistance
                                replace=true
                                [resistance]
                                    arcane=50
                                    blade=60
                                    impact=60
                                    pierce=60
                                    cold=60
                                    fire=60
                                [/resistance]
                            [/effect]
                            [effect]
                                apply_to=new_attack
                                name=firestorm
                                description=_"firestorm"
                                type=fire
                                [specials]
                                    {WEAPON_SPECIAL_MAGICAL}
                                    [dummy]
                                        id=storm_lilith
                                        name= _ "storm"
                                        description= _ "Storm: The damage of this attack will affect also a lot of other enemy units around the caster, and will also deal some impact damage."
                                    [/dummy]
                                [/specials]
                                range=ranged
                                damage=31
                                number=2
                                icon=attacks/firestorm.png
                                defense_weight=0
                            [/effect]
                            [effect]
                                apply_to=new_animation
                                name=firestorm
                                [attack_anim]
                                    [filter_attack]
                                        name=firestorm
                                    [/filter_attack]
                                    {MISSILE_FRAME_FIRESTORM}
                                    [if]
                                        hits=yes
                                        [frame]
                                            begin=-75
                                            end=0
                                            sound=fire.wav
                                        [/frame]
                                    [/if]
                                [/attack_anim]
                            [/effect]
                        [/object]
                    [/modifications]
                [/unit]
                {ADVANCE_UNIT (id=Umbra3) "Elvish High Lord"}
                [message]
                    speaker=Umbra3
                    message= _ "Hahaha! You thought you had won but you have just harboured false hope. I summoned Lilith herself! Now... Agh... no... chance... ..."
                [/message]
                [kill]
                    id=Umbra3
                    animate=no
                    fire_event=no
                [/kill]
                [unit]
                    type=Mist
                    id=Umbra4
                    name="Umbra"
                    random_traits=yes
                    x,y=22,4
                    side=5
                    {IS_HERO}
                    [modifications]
                        [object]
                            [effect]
                                apply_to=attack
                                range=melee
                                increase_damage=240%
                                set_type=cold
                                set_description=_"Lilith's sword"
                                [set_specials]
                                    mode=append
                                    {WEAPON_SPECIAL_POISON}
                                    {WEAPON_SPECIAL_PLAGUE_TYPE_LOTI Ghost _"Ghost"}
                                [/set_specials]
                            [/effect]
                            [effect]
                                apply_to=remove_attacks
                                name=faerie fire
                            [/effect]
                            [effect]
                                apply_to=new_ability
                                [abilities]
                                    {ABILITY_LEADERSHIP_LEVEL 5}
                                    {ABILITY_REGENERATES}
                                [/abilities]
                            [/effect]
                            [effect]
                                apply_to=new_attack
                                name="dark light"
                                description= _ "dark light"
                                icon=attacks/lightbeam.png
                                type=arcane
                                range=ranged
                                [specials]
                                    {WEAPON_SPECIAL_MAGICAL}
                                [/specials]
                                damage=13
                                attack_value=0
                                number=7
                            [/effect]
                            [effect]
                                apply_to=new_animation
                                name=dark light
                                [attack_anim]
                                    [filter_attack]
                                        name=dark light
                                    [/filter_attack]
                                    {MISSILE_FRAME_LIGHT_BEAM}

                                    [if]
                                        hits=yes
                                        [frame]
                                            begin=-75
                                            end=0
                                            sound={SOUND_LIST:HOLY}
                                        [/frame]
                                    [/if]
                                    [else]
                                        hits=no
                                        [frame]
                                            begin=-75
                                            end=0
                                            sound={SOUND_LIST:HOLY_MISS}
                                        [/frame]
                                    [/else]
                                [/attack_anim]
                            [/effect]
                            [effect]
                                apply_to=resistance
                                replace=true
                                [resistance]
                                    arcane=40
                                    blade=30
                                    impact=30
                                    pierce=30
                                    cold=30
                                    fire=30
                                [/resistance]
                            [/effect]
                            [effect]
                                apply_to=hitpoints
                                increase_total=250
                                increase=250
                            [/effect]
                            [effect]
                                apply_to=max_experience
                                increase=5000
                            [/effect]
                            [effect]
                                apply_to=new_attack
                                name=firestorm
                                description=_"firestorm"
                                type=fire
                                [specials]
                                    {WEAPON_SPECIAL_MAGICAL}
                                    [dummy]
                                        id=storm_lilith
                                        name= _ "storm"
                                        description= _ "Storm: The damage of this attack will affect also a lot of other enemy units around the caster, and will also deal some impact damage."
                                    [/dummy]
                                [/specials]
                                range=ranged
                                damage=31
                                number=3
                                icon=attacks/firestorm.png
                                defense_weight=0
                            [/effect]
                            [effect]
                                apply_to=new_animation
                                name=firestorm
                                [attack_anim]
                                    [filter_attack]
                                        name=firestorm
                                    [/filter_attack]
                                    {MISSILE_FRAME_FIRESTORM}
                                    [if]
                                        hits=yes
                                        [frame]
                                            begin=-75
                                            end=0
                                            sound=fire.wav
                                        [/frame]
                                    [/if]
                                [/attack_anim]
                            [/effect]
                        [/object]
                    [/modifications]
                [/unit]
                {ADVANCE_UNIT (id=Umbra4) "Elvish High Lord"}
                [store_unit]
                    [filter]
                        id=Umbra4
                    [/filter]
                    variable=umbra_store
                [/store_unit]
                {CLEAR_VARIABLE umbra_store.traits}
                {VARIABLE umbra_store.level 7}
                [unstore_unit]
                    variable=umbra_store
                    find_vacant=no
                [/unstore_unit]
                {CLEAR_VARIABLE umbra_store}
                [event]
                    name=post advance
                    [filter]
                        id=Umbra4
                    [/filter]
                    [modify_unit]
                        [filter]
                            id=Umbra4
                        [/filter]
                        level=7
                    [/modify_unit]
                [/event]
                [message]
                    speaker=Umbra4
                    message= _ "Hahaha! Kneel, inferior creatures! It is not Umbra who stands before you, but Lilith! See how I animate Umbra's body and give him life and make him stronger!"
                [/message]
                [message]
                    speaker=Lethalia
                    message= _ "Lilith, the deceiver - this is your worthy title, demon! You have only come out of the abyss you inhabit because you know your end is near. You would not dare the honesty of showing your true form and revealing the real demonic evil behind your enchanting honeyed words!"
                [/message]
                [message]
                    speaker=Efraim
                    message= _ "Come on, then, Lilith! Step forward! Fight us! You have chosen a mortal vessel and it will be your doom. We will slay you!"
                [/message]
                [message]
                    speaker=Umbra4
                    message= _ "The power of my believers, my power, cannot be matched by yours. I may be mortal on this plane, but the force of my existence is unimaginable to you! Kill me, I dare you! But you will soon find out it is impossible and I will then conquer the entire world over your dead bodies! Ha ha ha ha ha..."
                [/message]
                [message]
                    speaker=Lethalia
                    message= _ "You forget, Lilith, that these here are already our dead bodies - and dead as they are they still stand in your way and they will still stop you!"
                [/message]
                [message]
                    id=Verderber,Nemesis,Phobos,Deimos
                    message= _ "Lilith? What did you say? You are... evil?"
                [/message]
                [message]
                    speaker=Umbra4
                    message= _ "Ah! No reason to play with words anymore: I am Lilith, a demon, but feel honoured I wanted to help you... for my own purposes."
                [/message]
                [message]
                    id=Verderber,Nemesis,Phobos,Deimos
                    message= _ "There is no turning back now... so I will serve you. Our goal must be reached!"
                [/message]
                [message]
                    speaker=Efraim
                    message= _ "Let us slay them."
                [/message]
                [unit]
                    type=Mist
                    id=Stormrider
                    name=_"Stormrider"
                    random_traits=yes
                    x,y=22,3
                    side=3
                    {IS_HERO}
                    canrecruit=yes
                    [modifications]
                        [object]
                            [effect]
                                apply_to=attack
                                range=melee
                                increase_damage=80%
                            [/effect]
                            [effect]
                                apply_to=new_ability
                                [abilities]
                                    {ABILITY_LEADERSHIP_LEVEL 5}
                                [/abilities]
                            [/effect]
                            [effect]
                                apply_to=new_attack
                                name="stormride"
                                description= _ "stormride"
                                icon=attacks/lightning.png
                                type=fire
                                range=ranged
                                [specials]
                                    {WEAPON_SPECIAL_MAGICAL}
                                [/specials]
                                damage=14
                                number=5
                            [/effect]
                            [effect]
                                apply_to=new_animation
                                name=stormride
                                {LIGHTNING_STORMRIDER 1}
                                {LIGHTNING_STORMRIDER 2}
                                {LIGHTNING_STORMRIDER 3}
                            [/effect]
                            [effect]
                                apply_to=hitpoints
                                increase_total=250
                                increase=250
                            [/effect]
                            [effect]
                                apply_to=profile
                                portrait="portraits/Stormrider.png"
                            [/effect]
                        [/object]
                    [/modifications]
                [/unit]
                {ADVANCE_UNIT (id=Stormrider) "Prophet"}
                [store_unit]
                    [filter]
                        id=Stormrider
                    [/filter]
                    variable=stormrider_store
                [/store_unit]
                [for]
                    array=stormrider_store.modifications.trait
                    [do]
                        [if]
                            [variable]
                                name=stormrider_store.modifications.trait[$i].id
                                equals=undead
                            [/variable]
                            [then]
                                {CLEAR_VARIABLE stormrider_store.modifications.trait[$i]}
                            [/then]
                        [/if]
                    [/do]
                [/for]
                [unstore_unit]
                    variable=stormrider_store
                    find_vacant=no
                [/unstore_unit]
                {CLEAR_VARIABLE stormrider_store}
                {GENERIC_UNIT 3 "Grand Knight" 21 4}
                {GENERIC_UNIT 3 "Grand Knight" 23 4}
                [message]
                    speaker=Stormrider
                    message= _ "Lilith! This will be your end! You proved too strong for me once, but now, together, we will stop you!"
                [/message]
                [message]
                    speaker=Efraim
                    message= _ "Who are you?"
                [/message]
                [message]
                    speaker=Stormrider
                    message= _ "I will explain everything later. For now, I say only that I am on your side."
                [/message]
                [unit]
                    id=Delly
                    name= _ "Delly"
                    unrenamable=yes
                    gender=female
                    type=Delly_start
                    side=3
                    x=19
                    y=5
                    {IS_HERO}
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_RESILIENT}
                        [object]
                            [effect]
                                apply_to=attack
                                increase_damage=50%
                            [/effect]
                            [effect]
                                apply_to=hitpoints
                                increase_total=80
                                full_heal=yes
                            [/effect]
                            [effect]
                                apply_to=movement
                                increase=2
                            [/effect]
                        [/object]
                    [/modifications]
                [/unit]
                {GENERIC_UNIT 3 "Assassin" 19 6}
                {GENERIC_UNIT 3 "Assassin" 19 7}
                [message]
                    speaker=Efraim
                    message= _ "And who is − … Delly? YOU?! How come you know− How did you get− It is pleasing that you come to my aid... But somehow odd... Why are you seeking battle at your ripe age? You should be in your fifties!"
                [/message]
                [message]
                    speaker=Delly
                    message= _ "Chivalrous as ever... Does age harm you? Or your lover? Why should it be any different for me? Both of you look young and unchanged... I have my anti-aging secrets too."
                [/message]
                [message]
                    speaker=Efraim
                    message= _ "How now? Lethalia is an elf! And to stay young and sprightly, I had to become a − … She gave me access to the power elves use to live much longer. You look healthy and fresh almost like in the day when I met Lethalia! What did you do to keep your body rigid and firm?"
                [/message]
                [message]
                    speaker=Delly
                    message= _ "Who cares? Signs of age might just reveal more subtle. I am quite sure that you have something else to worry about than the looks of women. We have real problems here to deal with!"
                [/message]
                [message]
                    speaker=Lethalia
                    message= _ "(to herself) I think I know how this might be... time has betrayed her Elven blood. But those matured features... are like mine! Can it be true... my lost child... I must speak to her after this battle... though I should not reveal it, I must think now!"
                [/message]
            [/then]
        [/if]
    [/event]

#enddef
    [side]
        type=Efraim_lich
        id=Efraim
        name=_"Efraim"
        canrecruit=yes
        side=1
        controller=human
#ifdef HARD
        recruit=Elvish Fighter,Elvish Archer,Elvish Shaman,Elvish Scout
#else
        recruit=Elvish Fighter,Elvish Archer,Elvish Shaman,Elvish Scout,Elvish Druid,Elvish Sorceress,Elvish Captain,Elvish Hero,Elvish Marksman,Elvish Ranger
#endif
        gold=100
        team_name=good
        user_team_name=_"Good"
    [/side]
    [side]
        no_leader=yes
        side=2
        team_name=good
        user_team_name= _ "Good"
        [ai]
            aggression=0.9
        [/ai]
    [/side]
    [side]
        no_leader=yes
        side=3
        team_name=good
        user_team_name= _ "Good"
        [ai]
            aggression=0.9
        [/ai]
    [/side]
    [side]
        no_leader=yes
        side=4
        team_name=Shadows
        user_team_name= _ "Shadows of the Night"
        [unit]
            type=Shadow
            x=2
            y=30
            ai_special=guardian
        [/unit]
        [unit]
            type=Nightgaunt
            x=6
            y=26
            ai_special=guardian
        [/unit]
        [unit]
            type=Shadow
            x=4
            y=17
            ai_special=guardian
        [/unit]
        [unit]
            type=Dread Bat
            x=1
            y=4
            ai_special=guardian
        [/unit]
    [/side]
    [side]
        no_leader=yes
        side=5
        team_name=twisted_good
        user_team_name= _ "Twisted Good"
        [unit]
            type=Elvish Overlord
            id=Verderber
            name="Verderber"			#Sounds more epic than destroyer
            random_traits=yes
            x,y=22,4
            ai_special=guardian
            [modifications]
                [object]
                    [effect]
                        apply_to=new_ability
                        [abilities]
                            {ABILITY_LEADERSHIP_LEVEL 5}
                            {ABILITY_REGENERATES}
                        [/abilities]
                    [/effect]
                    [effect]
                        apply_to=attack
                        range=melee
                        increase_damage=160%
                        [set_specials]
                            mode=append
                            {WEAPON_SPECIAL_MAGICAL}
                            {WEAPON_SPECIAL_PLAGUE}
                        [/set_specials]
                    [/effect]
                    [effect]
                        apply_to=attack
                        range=ranged
                        increase_damage=70%
                    [/effect]
                    [effect]
                        apply_to=resistance
                        replace=true
                        [resistance]
                            arcane=50
                            blade=40
                            impact=40
                            pierce=40
                            cold=40
                            fire=40
                        [/resistance]
                    [/effect]
                [/object]
            [/modifications]
        [/unit]
        [unit]
            type=Elvish Seer
            id=Corruptia
            name="Corruptia"
            random_traits=yes
            x,y=23,3
            ai_special=guardian
            [modifications]
                [object]
                    [effect]
                        apply_to=attack
                        name=faerie touch
                        set_description=_"corrupted faerie touch"
                        increase_damage=90%
                        [set_specials]
                            mode=append
                            {WEAPON_SPECIAL_POISON}
                            {WEAPON_SPECIAL_PLAGUE}
                        [/set_specials]
                    [/effect]
                    [effect]
                        apply_to=attack
                        name=gossamer
                        increase_damage=200%
                        [set_specials]
                            mode=append
                            {WEAPON_SPECIAL_POISON}
                            {WEAPON_SPECIAL_MAGICAL}
                        [/set_specials]
                    [/effect]
                    [effect]
                        apply_to=resistance
                        replace=true
                        [resistance]
                            arcane=60
                            blade=50
                            impact=50
                            pierce=50
                            cold=50
                            fire=50
                        [/resistance]
                    [/effect]
                    [effect]
                        apply_to=resistance
                        replace=true
                        [resistance]
                            arcane=60
                            blade=40
                            impact=40
                            pierce=40
                            cold=40
                            fire=40
                        [/resistance]
                    [/effect]
                [/object]
            [/modifications]
        [/unit]
        [unit]
            type=Elvish Champion
            id=Phobos
            name="Phobos"
            random_traits=yes
            x,y=18,5
            ai_special=guardian
            [modifications]
                [object]
                    [effect]
                        apply_to=movement
                        increase=3
                    [/effect]
                    [effect]
                        apply_to=attack
                        range=melee
                        increase_damage=150%
                        set_type=arcane
                        set_description=_"cursed sword"
                        [set_specials]
                            mode=append
                            {WEAPON_SPECIAL_DRAIN}
                        [/set_specials]
                    [/effect]
                    [effect]
                        apply_to=attack
                        range=ranged
                        increase_damage=50%
                        [set_specials]
                            mode=append
                            {WEAPON_SPECIAL_MARKSMAN}
                        [/set_specials]
                    [/effect]
                    [effect]
                        apply_to=new_ability
                        [abilities]
                            {ABILITY_NIGHTSTALK}
                        [/abilities]
                    [/effect]
                    [effect]
                        apply_to=resistance
                        replace=true
                        [resistance]
                            arcane=60
                            blade=40
                            impact=40
                            pierce=40
                            cold=40
                            fire=40
                        [/resistance]
                    [/effect]
                [/object]
            [/modifications]
        [/unit]
        [unit]
            type=Elvish Lady
            id=Nemesis
            name="Nemesis"
            random_traits=yes
            x,y=22,11
            ai_special=guardian
            [modifications]
                [object]
                    [effect]
                        apply_to=resistance
                        replace=true
                        [resistance]
                            arcane=60
                            blade=40
                            impact=40
                            pierce=40
                            cold=40
                            fire=40
                        [/resistance]
                    [/effect]
                    [effect]
                        apply_to=new_attack
                        name="dread light"
                        description= _ "dread light"
                        icon=attacks/lightbeam.png
                        type=arcane
                        range=ranged
                        [specials]
                            {WEAPON_SPECIAL_MAGICAL}
                            {WEAPON_SPECIAL_PETRIFY}
                        [/specials]
                        damage=5
                        number=2
                    [/effect]
                    [effect]
                        apply_to=new_animation
                        name=dread light
                        [attack_anim]
                            [filter_attack]
                                name=dread light
                            [/filter_attack]
                            {MISSILE_FRAME_LIGHT_BEAM}

                            [if]
                                hits=yes
                                [frame]
                                    begin=-75
                                    end=0
                                    sound={SOUND_LIST:HOLY}
                                [/frame]
                            [/if]
                            [else]
                                hits=no
                                [frame]
                                    begin=-75
                                    end=0
                                    sound={SOUND_LIST:HOLY_MISS}
                                [/frame]
                            [/else]
                        [/attack_anim]
                    [/effect]
                    [effect]
                        apply_to=new_animation
                        name=defend
                        [defend]
                            start_time=-126
                            [frame]
                                duration=1
                                image="halo/elven/elven-shield-halo-20pct.png"
                                image="units/elves-wood/lady.png"
                            [/frame]
                            [frame]
                                duration=100
                                image="halo/elven/elven-shield-halo-40pct.png"
                                image="units/elves-wood/lady.png"
                            [/frame]
                            [if]
                                hits=hit
                                [frame]
                                    duration=150
                                    image="halo/elven/elven-shield-halo-60pct.png"
                                    image="units/elves-wood/lady.png"
                                [/frame]
                            [/if]
                            [else]
                                hits=miss,kill
                                [frame]
                                    duration=150
                                    image="halo/elven/elven-shield-halo-80pct.png"
                                    image="units/elves-wood/lady.png"
                                [/frame]
                            [/else]
                            [frame]
                                duration=1
                                image="halo/elven/elven-shield-halo-100pct.png"
                                image="units/elves-wood/lady.png"
                            [/frame]
                        [/defend]
                    [/effect]
                [/object]
            [/modifications]
        [/unit]
        [unit]
            type=Elvish Nightprowler
            id=Deimos
            name="Deimos"
            random_traits=yes
            x,y=22,3
            ai_special=guardian
            [modifications]
                [object]
                    [effect]
                        apply_to=attack
                        range=melee
                        increase_damage=240%
                        [set_specials]
                            mode=append
                            {WEAPON_SPECIAL_MAGICAL}
                            {WEAPON_SPECIAL_PLAGUE_TYPE_LOTI Soulless _"Soulless"}
                        [/set_specials]
                    [/effect]
                    [effect]
                        apply_to=attack
                        range=ranged
                        increase_damage=280%
                        [set_specials]
                            mode=append
                            {WEAPON_SPECIAL_DRAIN}
                        [/set_specials]
                    [/effect]
                    [effect]
                        apply_to=resistance
                        replace=true
                        [resistance]
                            arcane=60
                            blade=50
                            impact=50
                            pierce=50
                            cold=50
                            fire=50
                        [/resistance]
                    [/effect]
                [/object]
            [/modifications]
        [/unit]
        [unit]
            type=Elvish Hero
            id=Lucius
            name="Lucius"
            random_traits=yes
            x,y=39,6
            ai_special=guardian
            [modifications]
                [object]
                    [effect]
                        apply_to=attack
                        range=melee
                        increase_damage=200%
                        [set_specials]
                            mode=append
                            {WEAPON_SPECIAL_MAGICAL}
                            #textdomain wesnoth-units
                            {WEAPON_SPECIAL_PLAGUE_TYPE_LOTI Wraith _"Wraith"}
                            #textdomain wesnoth-loti
                        [/set_specials]
                    [/effect]
                    [effect]
                        apply_to=attack
                        range=ranged
                        increase_damage=100%
                        [set_specials]
                            mode=append
                            {WEAPON_SPECIAL_DRAIN}
                        [/set_specials]
                    [/effect]
                    [effect]
                        apply_to=resistance
                        replace=true
                        [resistance]
                            arcane=60
                            blade=50
                            impact=50
                            pierce=50
                            cold=50
                            fire=50
                        [/resistance]
                    [/effect]
                [/object]
            [/modifications]
        [/unit]
        [unit]
            type=Elvish Hero
            id=Nero
            name="Nero"
            random_traits=yes
            x,y=42,5
            ai_special=guardian
            [modifications]
                [object]
                    [effect]
                        apply_to=attack
                        range=melee
                        increase_damage=200%
                        [set_specials]
                            mode=append
                            {WEAPON_SPECIAL_MAGICAL}
                            #textdomain wesnoth-units
                            {WEAPON_SPECIAL_PLAGUE_TYPE_LOTI Shadow _"Shadow"}
                            #textdomain wesnoth-loti
                        [/set_specials]
                    [/effect]
                    [effect]
                        apply_to=attack
                        range=ranged
                        increase_damage=100%
                        [set_specials]
                            mode=append
                            {WEAPON_SPECIAL_DRAIN}
                        [/set_specials]
                    [/effect]
                    [effect]
                        apply_to=resistance
                        replace=true
                        [resistance]
                            arcane=60
                            blade=50
                            impact=50
                            pierce=50
                            cold=50
                            fire=50
                        [/resistance]
                    [/effect]
                [/object]
            [/modifications]
        [/unit]
    [/side]
    {FORCE_CHANCE_TO_HIT side=5 id=Argan 10 ()}
    [event]
        name=prestart
        [unit]
            type=Elvish Fighter
            id=Eillas
            name="Eillas"
            random_traits=yes
            x,y=22,15
            side=5
        [/unit]
        {GENERIC_UNIT 5 "Elvish Hero" 20 12}
        {GENERIC_UNIT 5 "Elvish Hero" 21 12}
        {GENERIC_UNIT 5 "Elvish Hero" 22 12}
        {GENERIC_UNIT 5 "Elvish Hero" 23 12}
        {GENERIC_UNIT 5 "Elvish Hero" 24 12}
        {GENERIC_UNIT 5 "Elvish Marksman" 20 13}
        {GENERIC_UNIT 5 "Elvish Marksman" 21 13}
        {GENERIC_UNIT 5 "Elvish Marksman" 22 13}
        {GENERIC_UNIT 5 "Elvish Marksman" 23 13}
        {GENERIC_UNIT 5 "Elvish Marksman" 24 13}
        {GENERIC_UNIT 5 "Elvish Druid" 20 14}
        {GENERIC_UNIT 5 "Elvish Druid" 21 14}
        {GENERIC_UNIT 5 "Elvish Druid" 22 14}
        {GENERIC_UNIT 5 "Elvish Sorceress" 23 14}
        {GENERIC_UNIT 5 "Elvish Sorceress" 24 14}
        {GENERIC_UNIT 5 "Elvish Ranger" 20 16}
        {GENERIC_UNIT 5 "Elvish Ranger" 21 16}
        {GENERIC_UNIT 5 "Elvish Ranger" 22 16}
        {GENERIC_UNIT 5 "Elvish Ranger" 23 16}
        {GENERIC_UNIT 5 "Elvish Ranger" 24 16}
#ifdef EASY
        {GENERIC_UNIT 5 "Elvish Captain" 20 15}
        {GENERIC_UNIT 5 "Elvish Captain" 21 15}
        {GENERIC_UNIT 5 "Elvish Captain" 23 15}
        {GENERIC_UNIT 5 "Elvish Captain" 24 15}
#else
        {GENERIC_UNIT 5 "Elvish Overlord" 20 15}
        {GENERIC_UNIT 5 "Elvish Overlord" 21 15}
        {GENERIC_UNIT 5 "Elvish Overlord" 23 15}
        {GENERIC_UNIT 5 "Elvish Overlord" 24 15}
#endif

#ifdef NORMAL
        {GENERIC_UNIT 5 "Elvish Archer" 20 17}
        {GENERIC_UNIT 5 "Elvish Overlord" 21 17}
        {GENERIC_UNIT 5 "Elvish Archer" 22 17}
        {GENERIC_UNIT 5 "Elvish Overlord" 23 17}
        {GENERIC_UNIT 5 "Elvish Archer" 24 17}
        {GENERIC_UNIT 5 "Elvish Shaman" 21 18}
        {GENERIC_UNIT 5 "Elvish Shaman" 22 18}
        {GENERIC_UNIT 5 "Elvish Shaman" 23 18}
        {GENERIC_UNIT 5 "Elvish Fighter" 21 19}
        {GENERIC_UNIT 5 "Elvish Overlord" 22 19}
        {GENERIC_UNIT 5 "Elvish Fighter" 23 19}
        {GENERIC_UNIT 5 "Elvish Archer" 21 20}
        {GENERIC_UNIT 5 "Elvish Overlord" 22 20}
        {GENERIC_UNIT 5 "Elvish Archer" 23 20}
#endif
#ifdef HARD
        {GENERIC_UNIT 5 "Elvish Archer" 20 17}
        {GENERIC_UNIT 5 "Elvish Archer" 21 17}
        {GENERIC_UNIT 5 "Elvish Archer" 23 17}
        {GENERIC_UNIT 5 "Elvish Archer" 24 17}
        {GENERIC_UNIT 5 "Elvish Shaman" 21 18}
        {GENERIC_UNIT 5 "Elvish Shaman" 22 18}
        {GENERIC_UNIT 5 "Elvish Shaman" 23 18}
        {GENERIC_UNIT 5 "Elvish Fighter" 21 19}
        {GENERIC_UNIT 5 "Elvish Fighter" 23 19}
        {GENERIC_UNIT 5 "Elvish Archer" 21 20}
        {GENERIC_UNIT 5 "Elvish Archer" 23 20}
        {GENERIC_UNIT 5 "Elvish Archer" 20 19}
        {GENERIC_UNIT 5 "Elvish Archer" 19 13}
        {GENERIC_UNIT 5 "Elvish Archer" 19 15}
        {GENERIC_UNIT 5 "Elvish Archer" 19 16}
        {GENERIC_UNIT 5 "Elvish Archer" 19 18}
        {GENERIC_UNIT 5 "Elvish Archer" 19 19}
        {GENERIC_UNIT 5 "Elvish Archer" 25 13}
        {GENERIC_UNIT 5 "Elvish Archer" 25 15}
        {GENERIC_UNIT 5 "Elvish Archer" 25 16}
        {GENERIC_UNIT 5 "Elvish Archer" 25 18}
        {GENERIC_UNIT 5 "Elvish Archer" 25 19}
        {GENERIC_UNIT 5 "Elvish Fighter" 18 14}
        {GENERIC_UNIT 5 "Elvish Fighter" 18 17}
        {GENERIC_UNIT 5 "Elvish Fighter" 18 18}
        {GENERIC_UNIT 5 "Elvish Fighter" 26 14}
        {GENERIC_UNIT 5 "Elvish Fighter" 26 17}
        {GENERIC_UNIT 5 "Elvish Fighter" 26 18}
        {GENERIC_UNIT 5 "Elvish Overlord" 22 17}
        {GENERIC_UNIT 5 "Elvish Overlord" 22 19}
        {GENERIC_UNIT 5 "Elvish Overlord" 22 20}
        {GENERIC_UNIT 5 "Elvish Overlord" 24 19}
        {GENERIC_UNIT 5 "Elvish Overlord" 19 14}
        {GENERIC_UNIT 5 "Elvish Overlord" 19 17}
        {GENERIC_UNIT 5 "Elvish Overlord" 25 14}
        {GENERIC_UNIT 5 "Elvish Overlord" 25 17}
        {GENERIC_UNIT 5 "Elvish Overlord" 18 15}
        {GENERIC_UNIT 5 "Elvish Overlord" 26 15}
        # Defining overlords in a somewhat odd way, but it keeps the above in sync with 03s_In_the_Magical_Mirror
#define ADD_LEADERSHIP6 X Y
    [modify_unit]
        [filter]
            x,y={X},{Y}
        [/filter]
        [object]
            [effect]
                apply_to=new_ability
                [abilities]
                    {ABILITY_LEADERSHIP_LEVEL 6}
                [/abilities]
            [/effect]
        [/object]
    [/modify_unit]
#enddef
        {ADD_LEADERSHIP6 20 15}
        {ADD_LEADERSHIP6 21 15}
        {ADD_LEADERSHIP6 23 15}
        {ADD_LEADERSHIP6 24 15}
        {ADD_LEADERSHIP6 22 17}
        {ADD_LEADERSHIP6 22 19}
        {ADD_LEADERSHIP6 22 20}
        {ADD_LEADERSHIP6 24 19}
        {ADD_LEADERSHIP6 19 14}
        {ADD_LEADERSHIP6 19 17}
        {ADD_LEADERSHIP6 25 14}
        {ADD_LEADERSHIP6 25 17}
        {ADD_LEADERSHIP6 18 15}
        {ADD_LEADERSHIP6 26 15}
#endif
    [/event]
    [event]
        name=prestart
        {VARIABLE el_kill_count 0}
    [/event]
    #When 3 of the counselors die, Umbra appears.
    {UMBRA_APPARITION Verderber}
    {UMBRA_APPARITION Phobos}
    {UMBRA_APPARITION Deimos}
    {UMBRA_APPARITION Nemesis}
    [event]
        name=die
        first_time_only=no
        [filter]
            id=Verderber
            [or]
                id=Phobos
            [/or]
            [or]
                id=Deimos
            [/or]
            [or]
                id=Nemesis
            [/or]
        [/filter]
        {RARE_ITEM $x1 $y1}
    [/event]
    [event]
        name=prestart
        [objectives]
            side=1
            [objective]
                description= _ "Defeat Lilith, whatever it is"
                condition=win
            [/objective]
            [objective]
                description= _ "Death or destruction of any hero"
                condition=lose
            [/objective]
            note= _ "Note: Save the game sometimes. One bad decision may become fatal."
        [/objectives]
        [recall]
            id=Lethalia
        [/recall]
        [recall]
            id=Efraim
        [/recall]
    [/event]
    [event]
        name=start
        [message]
            speaker=Lethalia
            message= _ "Here we are... tread carefully. We must fight them inside their sanctuary..."
        [/message]
    [/event]

    [event]
        name=turn 2
        [message]
            speaker=Verderber
            message= _ "This does not bode well for our cause. Preserved liches have invaded our temple, humans are swarming Arach, Lilith has not given us the power to stop them..."
        [/message]
        [message]
            speaker=Deimos
            message= _ "Maybe she is planning a wholly new and particularly powerful apparition of Umbra. An elf warrior so strong that he will drive our foes away!"
        [/message]
        [message]
            speaker=Corruptia
            message= _ "Or maybe her power is fading. There was a rebellion in Arach. We defeated the unbelievers, but they killed many of our blessed army. They were unwilling to summon the undead within our city, so they were all slaughtered. We must attack them ourselves, there is no other way. Lilith's powers are diminishing, we cannot rely on her now. Many of our believers are certain we are defeated."
        [/message]
        [message]
            speaker=Phobos
            message= _ "Stop uttering such prophecies of doom."
        [/message]
        [message]
            speaker=Corruptia
            message= _ "If you have any arguments to counter this, present them. You know I am right."
            # Nice edit, Zydin, this reminds me the way I argue. -Dugi
        [/message]
    [/event]

    [event]
        name=turn 3
        [message]
            speaker=Nemesis
            message= _ "Oumph, what is happening?"
        [/message]
        [kill]
            side=5
            x,y=25,17
        [/kill]
        [terrain]
            x,y=25,17
            terrain=Rr^Dr
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=20,14
        [/kill]
        [sound]
            name=rumble.ogg
        [/sound]
        [terrain]
            x,y=20,14
            terrain=Rr^Dr
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=25,12
        [/kill]
        [terrain]
            x,y=25,12
            terrain=Cud^Dr
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=19,17
        [/kill]
        [sound]
            name=rumble.ogg
        [/sound]
        [terrain]
            x,y=19,17
            terrain=Rr^Dr
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=22,16
        [/kill]
        [terrain]
            x,y=22,16
            terrain=Rr^Dr
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=24,13
        [/kill]
        [sound]
            name=rumble.ogg
        [/sound]
        [terrain]
            x,y=24,13
            terrain=Rr^Dr
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=23,15
        [/kill]
        [terrain]
            x,y=23,15
            terrain=Xu
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=22,13
        [/kill]
        [terrain]
            x,y=22,13
            terrain=Rr^Dr
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=21,19
        [/kill]
        [sound]
            name=rumble.ogg
        [/sound]
        [terrain]
            x,y=21,19
            terrain=Rr^Dr
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=22,14
        [/kill]
        [terrain]
            x,y=22,14
            terrain=Rr^Dr
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=21,16
        [/kill]
        [terrain]
            x,y=21,16
            terrain=Rr^Dr
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=24,15
        [/kill]
        [terrain]
            x,y=24,15
            terrain=Rr^Dr
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=23,18
        [/kill]
        [sound]
            name=rumble.ogg
        [/sound]
        [terrain]
            x,y=23,18
            terrain=Rr^Dr
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=22,15
        [/kill]
        [terrain]
            x,y=22,15
            terrain=Rr
        [/terrain]
        [redraw]
        [/redraw]
        [unit]
            type=Argan_lich
            id=Argan
            name=Argan
            x,y=22,15
            canrecruit=yes
            [modifications]
                [advancement]
                    id=sword1
                    [effect]
                        apply_to=attack
                        name=lichsword
                        increase_damage=1
                        [set_specials]
                            mode=append
                            {WEAPON_SPECIAL_DRAIN}
                        [/set_specials]
                    [/effect]
                    {GREATER_AMLA_DEFAULT_BONUSES}
                [/advancement]
                [advancement]
                    id=sword1_speed
                    [effect]
                        apply_to=attack
                        name=lichsword
                        increase_attacks=1
                    [/effect]
                    {GREATER_AMLA_DEFAULT_BONUSES}
                [/advancement]
                [advancement]
                    id=blabla
                    [effect]
                        apply_to=remove_ability
                        [abilities]
                            {ABILITY_SOUL_EATER}
                        [/abilities]
                    [/effect]
                    [effect]
                        apply_to=new_ability
                        [abilities]
                            {ABILITY_FEEDING_EASY}
                        [/abilities]
                    [/effect]
                    {GREATER_AMLA_DEFAULT_BONUSES}
                [/advancement]
                [advancement]
                    id=superhealth
                    [effect]
                        apply_to=hitpoints
                        increase_total=150
                        full_heal=yes
                    [/effect]
                    {GREATER_AMLA_DEFAULT_BONUSES}
                [/advancement]
            [/modifications]
            random_traits=yes
            side=2
        [/unit]
        [kill]
            side=5
            x,y=24,16
        [/kill]
        [terrain]
            x,y=24,16
            terrain=Rr^Dr
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=20,12
        [/kill]
        [terrain]
            x,y=20,12
            terrain=Rr^Dr
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=21,15
        [/kill]
        [terrain]
            x,y=21,15
            terrain=Rr^Dr
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=21,17
        [/kill]
        [terrain]
            x,y=21,17
            terrain=Rr^Dr
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=25,15
        [/kill]
        [terrain]
            x,y=25,15
            terrain=Rr^Dr
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=20,15
        [/kill]
        [terrain]
            x,y=20,15
            terrain=Xu
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=26,16
        [/kill]
        [terrain]
            x,y=26,16
            terrain=Xu
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=22,19
        [/kill]
        [terrain]
            x,y=22,19
            terrain=Rr^Dr
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=21,13
        [/kill]
        [terrain]
            x,y=21,13
            terrain=Rr^Dr
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=23,11
        [/kill]
        [terrain]
            x,y=23,11
            terrain=Cud^Dr
        [/terrain]
        [redraw]
        [/redraw]
        [message]
            speaker=Nemesis
            message= _ "Oumph, that was close..."
        [/message]
        [kill]
            side=5
            x,y=23,17
        [/kill]
        [terrain]
            x,y=23,17
            terrain=Xu
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=23,16
        [/kill]
        [terrain]
            x,y=23,16
            terrain=Rr^Dr
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=25,19
        [/kill]
        [terrain]
            x,y=25,19
            terrain=Rr^Dr
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=23,13
        [/kill]
        [terrain]
            x,y=23,13
            terrain=Rr^Dr
        [/terrain]
        [redraw]
        [/redraw]
        [kill]
            side=5
            x,y=21,18
        [/kill]
        [terrain]
            x,y=21,18
            terrain=Rr^Dr
        [/terrain]
        [redraw]
        [/redraw]
        [message]
            speaker=Argan
            message= _ "Come my soldiers! It will be over now."
        [/message]
        {GENERIC_UNIT 2 "Royal Guard" 21 15}
        {GENERIC_UNIT 2 "Destroyer" 21 17}
        {GENERIC_UNIT 2 "Iron Mauler" 20 14}
        {GENERIC_UNIT 2 "Iron Mauler" 21 16}
        {GENERIC_UNIT 2 Halberdier 24 16}
        {GENERIC_UNIT 2 "Master Bowman" 25 17}
        [message]
            speaker=Corruptia
            message= _ "I think it is time to surrender."
        [/message]
        [message]
            speaker=Verderber
            message= _ "Silence! We shall never surrender."
        [/message]
        [message]
            speaker=Nemesis
            message= _ "Soldiers! Many of your companions have died beneath the crumbled stone, but there are still enough of you to stand for the cause. Destroy the small group of later born."
        [/message]
        [message]
            speaker=Deimos
            message= _ "Lilith! Please, help us!"
        [/message]
    [/event]

    [event]
        name=turn 4
        [message]
            speaker=Verderber
            message= _ "This does not bode well for us. Pray to Lilith, everyone who is not fighting, pray!"
        [/message]
        [message]
            speaker=Phobos
            message= _ "Lilith, you are our light in the darkness, I will let your shining hand lead me to the eternal peace..."
        [/message]
        [message]
            speaker=Verderber
            message= _ "... where no war will ever be and no word for peace need be used. Help us in this quest, we have to stop them from godlessly massacring our believers..."
        [/message]
        [message]
            speaker=Corruptia
            message= _ "She will not help you, she will only conserve her power for another breakout. Leave the prayers and fight!"
        [/message]
        [message]
            speaker=Verderber
            message= _ "...we will have to be punished for that, but we need to be saved now, because without you our quest will surely fail..."
        [/message]
        [message]
            speaker=Nemesis
            message= _ "...we need you! Grant us the appearance of your magnificence and power in this temple..."
        [/message]
        [message]
            speaker=Corruptia
            message= _ "Fools..."
        [/message]
        {GENERIC_UNIT 2 "Royal Guard" 20 14}
        {GENERIC_UNIT 2 "Iron Mauler" 24 13}
        {GENERIC_UNIT 2 "Elder Mage LotI" 21 17}
    [/event]

    [event]
        name=turn 5
        [message]
            speaker=Verderber
            message= _ "We prayed, so we will be saved!"
        [/message]
        [message]
            speaker=Nemesis
            message= _ "All our council prayed for Lilith's help. She will redeem us!"
        [/message]
        [message]
            speaker=Corruptia
            message= _ "So, now you can stand up and fight!"
        [/message]
        [message]
            speaker=Phobos
            message= _ "We will fight when Lilith manifests herself among us! That is our greatest chance of survival!"
        [/message]
        [message]
            speaker=Corruptia
            message= _ "Do you really believe that? Even if Umbra is reborn once more, you know that they have already killed him twice."
        [/message]
        [message]
            speaker=Deimos
            message= _ "Curse you, heretic!"
        [/message]
        [message]
            speaker=Verderber
            message= _ "No! Let her be! She will help us when Lilith's help arrives. Just do not listen to her words."
        [/message]
        {GENERIC_UNIT 2 "Iron Mauler" 21 17}
        {GENERIC_UNIT 2 "Arch Mage" 24 16}
    [/event]

    [event]
        name=turn 6
        {GENERIC_UNIT 2 "Arch Mage" 21 14}
        {GENERIC_UNIT 2 "Iron Mauler" 20 16}
        [message]
            speaker=Corruptia
            message= _ "This is a losing battle. We should surrender. They may show us mercy."
        [/message]
        [message]
            speaker=Verderber
            message= _ "Never give up!"
        [/message]
    [/event]

    [event]
        name=turn 7
        {GENERIC_UNIT 2 "Scythemaster" 24 14}
        [message]
            speaker=Corruptia
            message= _ "We have to give up! We are going to die if we do not!"
        [/message]
        [message]
            speaker=Verderber
            message= _ "Do not panic! Lilith might be just testing the strength of our faith!"
        [/message]
        [message]
            speaker=Corruptia
            message= _ "And what if she is going to let them punish us for our, for <i>your</i>, lack of pragmatism?"
        [/message]
    [/event]

    [event]
        name=turn 9
        [fire_event]
            name=corruptia turncoat
        [/fire_event]
    [/event]

    [event]
        name=attack end
        [filter_second]
            id=Corruptia
        [/filter_second]
        [fire_event]
            name=corruptia turncoat
        [/fire_event]
    [/event]

    [event]
        name=corruptia turncoat
        [message]
            speaker=Corruptia
            message= _ "Mercy! I understand now the corruption of the deceiver upon our elder race! We once pledged our allegiance to you, Lilith, but now we see through your lies and we will be fighting against you!"
        [/message]
        {MODIFY_UNIT (id=Corruptia) side 2}
    [/event]

    [event]
        name=last breath
        [filter]
            id=Umbra4
        [/filter]
        [message]
            speaker=Umbra4
            message= _ "I may fall once more... But my revenge will come again."
        [/message]
        [message]
            speaker=Lethalia
            message= _ "I may have found a way to prevent that. I can bind the future to a prophecy. I found a way to do it. The prophecy may speak only of an event, not of something that will never come to pass. So..."
        [/message]
        {FADE_TO_BLACK}
        [message]
            speaker=Lethalia
            message= _ "Corrupted once more, the mind of elves will again go awry,
As the time comes for two suns to shine brightly in the sky."
        [/message]
        {FADE_IN}
        [message]
            speaker=Corruptia
            message= _ "Two suns?!"
        [/message]
        [message]
            speaker=Lethalia
            message= _ "No evil would ever want two suns to shine. That would banish the night nearly completely. And creating a second sun is impossible."
        [/message]
        [message]
            speaker=Efraim
            message= _ "Shining knight, explain now then, who are you?"
        [/message]
        [message]
            speaker=Stormrider
            message= _ "I am Stormrider, a servant of a great power who has been gifted immortality by a just god to fight evil. I had the mission to prevent you from becoming preserved liches, but the dragon who was to kill you lost the fight. I also helped another dragon to get you, but he failed too. I then learned that your resilience was not born of evil, as I discovered that you were also fighting it. So I stopped my attempts to destroy you, even though you are still a potential danger..."
        [/message]
        [message]
            speaker=Efraim
            message= _ "Does that mean that we would become what we are now even if the dragon had not provided the poison?"
        [/message]
        [message]
            speaker=Stormrider
            message= _ "Yes, you had figured out how to vanquish death even before you left the prison. It was just a matter of time before you became liches."
        [/message]
        [message]
            speaker=Efraim
            message= _ "Ah! Well, what is past is past. Do you know about the poison, then? How to make it? Delenia is aging slowly, but she will die sooner or later. I want to prevent it."
        [/message]
        [message]
            speaker=Stormrider
            message= _ "Yes. But I shall not give it to you."
        [/message]
        [message]
            speaker=Efraim
            message= _ "Trust us! You have said it yourself how you have witnessed our good deeds, how much we fought against this invading evil coming into our world! I want our friend Delly to share immortality with us."
        [/message]
        [message]
            speaker=Delly
            message= _ "Can you not see how am I going to suffer? My limbs will ache with every movement. I feel that it will come on me, I will start becoming weaker and weaker. I can already see in a mirror that I am not as pretty as I used to be. The other problems will come soon."
        [/message]
        [message]
            speaker=Stormrider
            message= _ "No. Dying from old age is only natural, and you should not oppose it. Even though Lichdom is the least evil known way to become ageless, but you can imagine how evil are the other ways to achieve it. If I make one exception now, the precedent will be there to start making more and more exceptions in the future and soon we will be faced with an army of necromancers, which is nothing but trouble..."
        [/message]
        [message]
            speaker=Efraim
            message= _ "She is a good friend of mine! If she dies in a few decades, I would blame you for it! I will walk this world for millennia, and with such a grief, I might eventually choose a path of revenge."
        [/message]
        [message]
            speaker=Stormrider
            message= _ "Do not pretend that you can feel amity towards somebody, lich Efraim. You are undead, and the only feelings undead can feel are hatred and anger - you and Lethalia are two odd ones, but your humanity is gone from you already."
        [/message]
        [message]
            speaker=Efraim
            message= _ "Are <i>you</i> undead? No. It is obvious I cannot feel pain nor physical comfort. But you cannot know what I can feel emotionally."
        [/message]
        [message]
            speaker=Stormrider
            message= _ "You only remember what you should feel from the times when you breathed. You remember it better than usual liches because you look human and your body reminds you of such memories. But after years go by, you will not remember much and new memories will prevail in their place and you will become yourself a danger to the balance of the world."
        [/message]
        [message]
            speaker=Delly
            message= _ "Allowing me to die will only quicken his transformation into a monster."
        [/message]
        [message]
            speaker=Stormrider
            message= _ "At the cost of creating another monster. And monsters like you are much harder to destroy than you might think."
        [/message]
        [message]
            speaker=Efraim
            message= _ "She has lived a rich and eventful life. Evil would have a real challenge taking her over. Also you have absolutely no proof that we, ourselves, will become evil. Damn your assumptions! My dear friend is dying and you are refusing to help her! Do it, please, and we will help you again, should you have another evil to fight from this world!"
        [/message]
        [message]
            speaker=Stormrider
            message= _ "... so be it, then. May I never regret this act. Know though that I will help her last, no more exceptions. It would seem that you do still bear feelings after all, even though they might be just memories..."
        [/message]
        [message]
            speaker=Lethalia
            message= _ "We thank you. If you are ever in need, we will help you."
        [/message]
        [message]
            speaker=Argan
            message= _ "I will help you too."
        [/message]
        [message]
            speaker=Stormrider
            message= _ "We are all agreed then. We may allow ourselves to celebrate this day for we have done a great deed."
        [/message]
        [disallow_recruit]
            side=1
            type=Elvish Fighter,Elvish Archer,Elvish Shaman,Elvish Scout,Elvish Druid,Elvish Sorceress,Elvish Captain,Elvish Hero,Elvish Marksman,Elvish Ranger,Elvish Lord
        [/disallow_recruit]
        [endlevel]
            result=victory
#ifdef HARD
            carryover_percentage=0
#else
            {NEW_GOLD_CARRYOVER 40}
#endif
            next_scenario=01_Thirst_for_Adventures
        [/endlevel]
    [/event]
    [event]
        name=last breath
        [filter]
            id=Argan
        [/filter]
        [message]
            speaker=unit
            message= _ "So my story ends here."
        [/message]
        [endlevel]
            result=defeat
        [/endlevel]
    [/event]
    [event]
        name=last breath
        [filter]
            id=Efraim
        [/filter]
        [message]
            speaker=unit
            message= _ "And I was so close of the final victory."
        [/message]
        [endlevel]
            result=defeat
        [/endlevel]
    [/event]
    [event]
        name=last breath
        [filter]
            id=Lethalia
        [/filter]
        [message]
            speaker=unit
            message= _ "I have crossed oceans of blood and fire to get here, only to perish just before the final victory."
        [/message]
        [endlevel]
            result=defeat
        [/endlevel]
    [/event]
    [event]
        name=last breath
        [filter]
            id=Stormrider
        [/filter]
        [message]
            speaker=unit
            message= _ "God, save my soul!"
        [/message]
        [endlevel]
            result=defeat
        [/endlevel]
    [/event]
    [event]
        name=last breath
        [filter]
            id=Delly
        [/filter]
        [message]
            speaker=unit
            message= _ "Agh... I should know... this is what happens to those who help others..."
        [/message]
        [message]
            speaker=Lethalia
            message= _ "Anghra-kha'sambghra, sei'ko osstap nalatho, ghelt dob'the ekthanathul."
        [/message]
        [message]
            speaker=Delly
            message= _ "I cannot move somehow. What..."
        [/message]
        {MODIFY_UNIT id=Delly status.petrified yes}
        {MODIFY_UNIT id=Delly hitpoints 40}
        [message]
            speaker=Delly
            message= _ "..."
        [/message]
        {MOVE_UNIT id=Delly 42 4}
        [message]
            speaker=Lethalia
            message= _ "Not until I allow it! This should prevent her from dying. We will worry about her later."
        [/message]
    [/event]
    [event]
        name=last breath
        [filter]
            id=Corruptia
        [/filter]
        [message]
            speaker=unit
            message= _ "Aaaargh, no! You got me into this, Lilith, and you will pay for it!"
        [/message]
        [message]
            speaker=Lethalia
            message= _ "I have to admit that I wanted this one to survive. I know that a villain with weak devotion to her evil cause is still a villain..."
        [/message]
        [message]
            speaker=Efraim
            message= _ "I understand. She might turn out to be helpful at bringing normal life to the city. I am quite certain she would not return to worshiping Lilith."
        [/message]
        [message]
            speaker=Lethalia
            message= _ "That is what I had in mind. If she dies here, we might have to restore the order ourselves. It could take a lot of time and effort without the help of someone who knows how to run the city."
        [/message]
        [message]
            speaker=Lethalia
            message= _ "Anghra-kha'sambghra, sei'ko osstap nalatho, ghelt dob'the ekthanathul."
        [/message]
        {MODIFY_UNIT id=Corruptia status.petrified yes}
        {MODIFY_UNIT id=Corruptia hitpoints 40}
        {TELEPORT_UNIT id=Corruptia 25 5}
        [message]
            speaker=Lethalia
            message= _ "This should prevent her from dying. We will worry about her later."
        [/message]
    [/event]

    [event]
        name=attacker_hits
        first_time_only=no

        [filter_attack]
            special_id=storm_lilith
        [/filter_attack]
        [harm_unit]
            [filter]
                [filter_adjacent]
                    x,y=$x1,$y1
                [/filter_adjacent]
                [not]
                    side=$enemy_sides
                [/not]
            [/filter]
            [filter_second]
                x,y=$x1,$y1
            [/filter_second]
            amount=16
            damage_type=fire
            fire_event=yes
            experience=no
        [/harm_unit]
        [harm_unit]
            [filter]
                [filter_adjacent]
                    x,y=$x1,$y1
                [/filter_adjacent]
                [not]
                    side=$enemy_sides
                [/not]
            [/filter]
            [filter_second]
                x,y=$x1,$y1
            [/filter_second]
            amount=8
            damage_type=impact
            fire_event=yes
            experience=no
        [/harm_unit]
        [harm_unit]
            [filter]
                [filter_location]
                    [not]
                        x,y=$x1,$y1
                        radius=1
                    [/not]
                    [and]
                        x,y=$x1,$y1
                        radius=2
                    [/and]
                [/filter_location]
                [not]
                    side=$enemy_sides
                [/not]
            [/filter]
            [filter_second]
                x,y=$x1,$y1
            [/filter_second]
            amount=4
            damage_type=impact
            fire_event=yes
            experience=no
        [/harm_unit]
        [harm_unit]
            [filter]
                [filter_location]
                    [not]
                        x,y=$x1,$y1
                        radius=1
                    [/not]
                    [and]
                        x,y=$x1,$y1
                        radius=2
                    [/and]
                [/filter_location]
                [not]
                    side=$enemy_sides
                [/not]
            [/filter]
            [filter_second]
                x,y=$x1,$y1
            [/filter_second]
            amount=8
            damage_type=fire
            fire_event=yes
            experience=no
        [/harm_unit]
    [/event]

    {DROPS 2 3 (sword,sword,sword,bow,bow,dagger,knife,xbow,axe,staff,staff,spear) no 4,5}
    experience_modifier=125
[/scenario]

#undef LIGHTNING_STORMRIDER
#undef UMBRA_APPARITION
#undef ADD_LEADERSHIP6
