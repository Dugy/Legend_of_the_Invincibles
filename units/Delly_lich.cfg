#textdomain wesnoth-loti
#define LIGHTNING DIRECTION_NUMBER
    [attack_anim]
        [filter_attack]
            name=lightning
            [or]
                name=thunder
            [/or]
        [/filter_attack]

        {LIGHTNING_BOLT {DIRECTION_NUMBER} }

        start_time=-250
        [frame]
            begin=-300
            end=-200
            image="units/important/delly.png"
        [/frame]
        [frame]
            begin=-200
            end=-75
            image="units/important/delly-magic.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-75
                end=0
                image="units/important/delly-magic.png"
                sound=lightning.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-75
                end=0
                image="units/important/delly-magic.png"
                sound=lightning-miss.ogg
            [/frame]
        [/else]
        [frame]
            begin=0
            end=75
            image="units/important/delly-magic.png"
        [/frame]
        [frame]
            begin=75
            end=150
            image="units/important/delly.png"
        [/frame]
    [/attack_anim]
#enddef
[unit_type]
    id=Delly_lich
    name= _ "Preserved Lich"
    race=undead
    gender=female
    image="units/important/delly.png"
    profile=portraits/Delenia.png
    movement_type=elusivefoot
    alignment=chaotic
    hitpoints=75
    [movement_costs]
        forest=1
        deep_water=2
    [/movement_costs]
    [defense]
        frozen=40
        shallow_water=60
        deep_water=40
        reef=50
        flat=40
        castle=30
        village=30
        forest=30
        cave=40
        hills=30
        mountains=30
        fungus=40
        swamp_water=60
        sand=60
        unwalkable=40
    [/defense]
    [resistance]
        blade=80
        pierce=50
        impact=130
        fire=100
        cold=50
        arcane=130
    [/resistance]
    movement=7
    experience=160
    {QUANTITY experience 70 90 110}
    level=5
    advances_to=null
    cost=200
    hide_help=true
    do_not_list=yes
    usage=mixed fighter
    usage=fighter
    description= _ "Preserved liches are an exotic kind of liches, they are far more powerful than mere liches."+{SPECIAL_NOTES}+{SPECIAL_NOTES_BACKSTAB}+{SPECIAL_NOTES_SKIRMISHER}
    die_sound={SOUND_LIST:HUMAN_FEMALE_DIE}
    {DEFENSE_ANIM_FILTERED "units/important/delly-defend-2.png" "units/important/delly-defend-1.png" {SOUND_LIST:HUMAN_FEMALE_HIT} (
        [filter_second_attack]
            name=sword
        [/filter_second_attack]
    )}
    [abilities]
        {ABILITY_SOUL_EATER}
        {ABILITY_REGENERATES}
        {ABILITY_SUBMERGE}
        {ABILITY_PENETRATE}
        {ABILITY_SKIRMISHER}
    [/abilities]
    [attack]
        name=sword
        description=_"sword"
        icon=attacks/sword-human.png
        type=blade
        range=melee
        damage=8
        number=4
        [specials]
            {WEAPON_SPECIAL_BACKSTAB}
        [/specials]
    [/attack]
    [attack]
        name=knife
        description=_"knife"
        icon=attacks/dagger-thrown-human.png
        type=blade
        range=ranged
        damage=8
        number=3
        [specials]
            {WEAPON_SPECIAL_POISON}
        [/specials]
    [/attack]
    [attack_anim]
        [filter_attack]
            name=knife
        [/filter_attack]
        [missile_frame]
            begin=-150
            end=0
            image="projectiles/dagger-n.png"
            image_diagonal="projectiles/dagger-ne.png"
        [/missile_frame]
        [if]
            hits=yes
            [frame]
                begin=-200
                end=-100
                image="units/important/delly-ranged.png"
                sound=throwing-knife.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-200
                end=-100
                image="units/important/delly-ranged.png"
                sound=throwing-knife-miss.ogg
            [/frame]
        [/else]
        [frame]
            begin=-100
            end=50
            image="units/important/delly-ranged.png"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=sword
        [/filter_attack]
        [frame]
            begin=-200
            end=-150
            image="units/important/delly.png"
        [/frame]
        [frame]
            begin=-150
            end=-50
            image="units/important/delly-attack-1.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-50
                end=50
                image="units/important/delly-attack-2.png"
                sound=sword-1.ogg
            [/frame]
            [frame]
                begin=50
                end=150
                image="units/important/delly-attack-3.png"
                sound=sword-1.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-50
                end=50
                image="units/important/delly-attack-2.png"
                sound={SOUND_LIST:MISS}
            [/frame]
            [frame]
                begin=50
                end=150
                image="units/important/delly-attack-3.png"
                sound={SOUND_LIST:MISS}
            [/frame]
        [/else]
        [frame]
            begin=150
            end=250
            image="units/important/delly-attack-4.png"
        [/frame]
        [frame]
            begin=250
            end=300
            image="units/important/delly.png"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=fireball
        [/filter_attack]
        {MISSILE_FRAME_FIREBALL}
        [frame]
            begin=-300
            end=-200
            image="units/important/delly.png"
        [/frame]
        [frame]
            begin=-200
            end=-75
            image="units/important/delly-magic.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-75
                end=0
                image="units/important/delly-magic.png"
                sound=fire.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-75
                end=0
                image="units/important/delly-magic.png"
                sound=fire.ogg
            [/frame]
        [/else]
        [frame]
            begin=0
            end=75
            image="units/important/delly-magic.png"
        [/frame]
        [frame]
            begin=75
            end=150
            image="units/important/delly.png"
        [/frame]
    [/attack_anim]
    {LIGHTNING 1}
    {LIGHTNING 2}
    {LIGHTNING 3}
    [attack_anim]
        [filter_attack]
            name=meteor
        [/filter_attack]
        missile_start_time=-400
        [if]
            direction=n,ne,nw
            [missile_frame]
                duration=100
                halo="halo/meteor-1.png"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-2.png"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-3.png"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-4.png"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-5.png"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-6.png"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-7.png"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-8.png"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-9.png"
                offset=1.0
            [/missile_frame]
        [/if]
        [else]
            direction=s,se,sw

            [missile_frame]
                duration=100
                halo="halo/meteor-1.png~FL(vert)"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-2.png~FL(vert)"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-3.png~FL(vert)"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-4.png~FL(vert)"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-5.png~FL(vert)"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-6.png~FL(vert)"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-7.png~FL(vert)"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-8.png~FL(vert)"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-9.png~FL(vert)"
                offset=1.0
            [/missile_frame]
        [/else]
        [frame]
            begin=-500
            end=-400
            image="units/important/delly.png"
        [/frame]
        [frame]
            begin=-400
            end=-300
            image="units/important/delly-magic.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-300
                end=-200
                image="units/important/delly-magic.png"
                sound=fire.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-300
                end=-200
                image="units/important/delly-magic.png"
                sound=fire.ogg
            [/frame]
        [/else]
        [frame]
            begin=-200
            end=-100
            image="units/important/delly-magic.png"
        [/frame]
        [frame]
            begin=-100
            end=0
            image="units/important/delly.png"
        [/frame]
    [/attack_anim]
    [animation]
        apply_to=draw_weapon
        start_time=-500
        [filter_attack]
            name=spiritual transformation
        [/filter_attack]
        blend_ratio="0~1:500"
        blend_color=255,255,255
        [frame]
            begin=-500
            end=0
            image="units/important/delly.png"
        [/frame]
    [/animation]
    [attack_anim]
        [filter_attack]
            name=spiritual transformation
        [/filter_attack]
        start_time=-200
        blend_ratio="1:1000"
        blend_color=255,255,255
        [frame]
            begin=-200
            end=-150
            image="units/important/delly.png"
        [/frame]
        [frame]
            begin=-150
            end=-50
            image="units/important/delly-attack-1.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-50
                end=50
                image="units/important/delly-attack-2.png"
                sound=sword-1.ogg
            [/frame]
            [frame]
                begin=50
                end=150
                image="units/important/delly-attack-3.png"
                sound=sword-1.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-50
                end=50
                image="units/important/delly-attack-2.png"
                sound={SOUND_LIST:MISS}
            [/frame]
            [frame]
                begin=50
                end=150
                image="units/important/delly-attack-3.png"
                sound={SOUND_LIST:MISS}
            [/frame]
        [/else]
        [frame]
            begin=150
            end=250
            image="units/important/delly-attack-4.png"
        [/frame]
        [frame]
            begin=250
            end=300
            image="units/important/delly.png"
        [/frame]
    [/attack_anim]
    [defend]
        start_time=-175
        [filter_second_attack]
            name=spiritual transformation
        [/filter_second_attack]
        blend_ratio="1:375"
        blend_color=255,255,255
        [frame]
            duration=25
            image="units/important/delly.png"
            halo=halo/elven/elven-shield-halo-20pct.png
        [/frame]
        [frame]
            duration=25
            image="units/important/delly.png"
            halo=halo/elven/elven-shield-halo-40pct.png
        [/frame]
        [frame]
            duration=50
            image="units/important/delly-defend-1.png"
            halo=halo/elven/elven-shield-halo-60pct.png
        [/frame]
        [frame]
            duration=50
            image="units/important/delly-defend-1.png"
            halo=halo/elven/elven-shield-halo-80pct.png
        [/frame]
        [if]
            hits=hit
            [frame]
                duration=100
                image="units/important/delly-defend-2.png"
                sound={SOUND_LIST:HUMAN_FEMALE_HIT}
                halo=halo/elven/elven-shield-halo-100pct.png
            [/frame]
        [/if]
        [else]
            hits=miss,kill
            [frame]
                duration=100
                image="units/important/delly-defend-2.png"
                halo=halo/elven/elven-shield-halo-100pct.png
            [/frame]
        [/else]
        [frame]
            duration=50
            image="units/important/delly-defend-1.png"
            halo=halo/elven/elven-shield-halo-80pct.png
        [/frame]
        [frame]
            duration=25
            image="units/important/delly.png"
            halo=halo/elven/elven-shield-halo-60pct.png
        [/frame]
        [frame]
            duration=25
            image="units/important/delly.png"
            halo=halo/elven/elven-shield-halo-40pct.png
        [/frame]
        [frame]
            duration=25
            image="units/important/delly.png"
            halo=halo/elven/elven-shield-halo-20pct.png
        [/frame]
    [/defend]
    {SOUL_EATER_AMLA units/important/delly.png units/important/delly-magic.png units/important/delly-magic.png units/important/delly.png units/important/delly-magic.png units/important/delly-magic.png (
        [advancement]
            max_times=1
            id=sword
            description= _ "faster at melee combat"
            image="attacks/sword-human.png"
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=attack
                range=melee
                increase_attacks=1
                increase_damage=1
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            id=sword2
            description= _ "able to chop through more enemies with sword"
            image="attacks/sword-human.png"
            strict_amla=yes
            require_amla="sword"
            [effect]
                apply_to=attack
                range=melee
                [set_specials]
                    mode=append
                    {WEAPON_SPECIAL_CLEAVE}
                [/set_specials]
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            id=sword3
            description= _ "faster with sword"
            image="attacks/sword-human.png"
            strict_amla=yes
            require_amla="sword,sword2"
            [effect]
                apply_to=attack
                range=melee
                increase_attacks=1
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            id=sword3-leech
            description= _ "leeching with sword"
            image="attacks/sword-human.png"
            strict_amla=yes
            require_amla="sword,sword2"
            [effect]
                apply_to=attack
                range=melee
                [set_specials]
                    mode=append
                    {WEAPON_SPECIAL_LEECH}
                [/set_specials]
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=10
            id=sword4
            description= _ "better with sword"
            image="attacks/sword-human.png"
            strict_amla=yes
            require_amla="sword,sword2,sword3"
            [effect]
                apply_to=attack
                name=sword
                increase_damage=1
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            id=knife1
            description= _ "dealing more damage with knives"
            image=attacks/dagger-thrown-human.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=attack
                name=knife
                increase_damage=2
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=2
            id=knife2
            description= _ "faster with knives"
            image=attacks/dagger-thrown-human.png
            strict_amla=yes
            require_amla="knife1"
            [effect]
                apply_to=attack
                name=knife
                increase_attacks=1
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            id=knife3
            description= _ "more precise with knives"
            image=attacks/dagger-thrown-human.png
            strict_amla=yes
            require_amla="knife1,knife2"
            [effect]
                apply_to=attack
                name=knife
                [set_specials]
                    mode=append
                    {WEAPON_SPECIAL_MARKSMAN}
                [/set_specials]
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=10
            id=knife4
            description= _ "better with knives"
            image=attacks/dagger-thrown-human.png
            strict_amla=yes
            require_amla="knife1,knife2"
            [effect]
                apply_to=attack
                name=knife
                increase_damage=1
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=nightstalk
            description= _ "able to move at night without being seen on useful terrains"
            image=attacks/dark-missile.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=new_ability
                [abilities]
                    {ABILITY_LESSER_NIGHTSTALK}
                [/abilities]
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=nightstalk2
            description= _ "able to move at night without being seen on all accessible terrains"
            image=attacks/dark-missile.png
            strict_amla=yes
            require_amla="nightstalk"
            [effect]
                apply_to=remove_ability
                [abilities]
                    {ABILITY_LESSER_NIGHTSTALK}
                [/abilities]
            [/effect]
            [effect]
                apply_to=new_ability
                [abilities]
                    {ABILITY_NIGHTSTALK}
                [/abilities]
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            id=block
            description= _ "better at defending"
            image="attacks/saber-human.png"
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=defense
                replace=false
                [defense]
                    frozen=-3
                    shallow_water=-3
                    reef=-3
                    flat=-3
                    castle=-3
                    village=-3
                    forest=-3
                    cave=-3
                    hills=-3
                    mountains=-3
                    fungus=-3
                    swamp_water=-3
                    sand=-3
                [/defense]
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            id=block2
            description= _ "better at defending"
            image="attacks/saber-human.png"
            strict_amla=yes
            require_amla="block"
            [effect]
                apply_to=defense
                replace=false
                [defense]
                    frozen=-2
                    shallow_water=-2
                    reef=-2
                    flat=-2
                    castle=-2
                    village=-2
                    forest=-2
                    cave=-2
                    hills=-2
                    mountains=-2
                    fungus=-2
                    swamp_water=-2
                    sand=-2
                [/defense]
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=5
            id=block3
            description= _ "better at defending"
            image="attacks/saber-human.png"
            strict_amla=yes
            require_amla="block,block2"
            [effect]
                apply_to=defense
                replace=false
                [defense]
                    frozen=-1
                    shallow_water=-1
                    reef=-1
                    flat=-1
                    castle=-1
                    village=-1
                    forest=-1
                    cave=-1
                    hills=-1
                    mountains=-1
                    fungus=-1
                    swamp_water=-1
                    sand=-1
                [/defense]
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=parry
            description= _ "able to attack parrying enemy blows (new attack)"
            image=attacks/saber-human.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=bonus_attack
                name=parry
                description= _ "parry"
                icon=attacks/saber-human.png
                range=melee
                clone_anim=yes
                defense_weight=0
                damage=-20
                number=-70
                [specials]
                    {WEAPON_SPECIAL_PARRY}
                [/specials]
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=3
            always_display=yes
            id=parry2
            description= _ "parrying better"
            image=attacks/saber-human.png
            strict_amla=yes
            require_amla="parry"
            [effect]
                apply_to=improve_bonus_attack
                name=parry
                increase_damage=10
                increase_attacks=5
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=4
            id=movement
            description= _ "faster"
            image=icons/boots_elven.png
            {AMLA_DEFAULT_BONUSES}
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=movement
                increase=1
            [/effect]
        [/advancement]
    ) "Delly_lich"}

#undef LIGHTNING
