#textdomain wesnoth-loti
[unit_type]
    id=Pilum Master
    name= _ "Pilum Master"
    race=human
    image="units/humans/pilum-master.png"
    profile="portraits/humans/javelineer.png"
    {MAGENTA_IS_THE_TEAM_COLOR}
    hitpoints=61
    movement_type=smallfoot
    movement=5
    experience=100
    {QUANTITY experience 80 90 100}
    level=3
    alignment=lawful
    advances_to=null
#ifndef MULTIPLAYER
    [advancefrom]
        unit=Javelineer
        experience=200
    [/advancefrom]
#endif
    cost=39
    usage=fighter
    description= _ "Some javelineers came to an incredible skill with javelins, and improved their javelins into pilums. These weapons are hard to use, but they can deal heavy damages to anyone before they even come close enough to hit, even if they are attacked. Although many soldiers consider their weapons obsolete, they wield them proudly, because unlike swords or bows, pilums can be used both in melee and ranged combat."+{SPECIAL_NOTES}+{SPECIAL_NOTES_FIRSTSTRIKE}
    die_sound={SOUND_LIST:HUMAN_DIE}
    {DEFENSE_ANIM "units/humans/pilum-master-defend-1.png" "units/humans/pilum-master-defend-2.png" {SOUND_LIST:HUMAN_HIT}}
    [portrait]
        size=400
        side="left"
        mirror="false"
        image="portraits/humans/transparent/javelineer.png"
    [/portrait]
    [portrait]
        size=400
        side="right"
        mirror="true"
        image="portraits/humans/transparent/javelineer.png"
    [/portrait]
    [resistance]
        pierce=60
        blade=80
        impact=90
    [/resistance]
    [attack]
        name=spear
        description=_"pilum"
        type=pierce
        range=melee
        damage=12
        number=3
        [specials]
            {WEAPON_SPECIAL_FIRSTSTRIKE}
        [/specials]
    [/attack]
    [attack]
        name=javelin
        description=_"pilum"
        icon=attacks/javelin-human.png
        type=pierce
        range=ranged
        damage=10
        number=4
    [/attack]
    [attack_anim]
        [filter_attack]
            name=javelin
        [/filter_attack]
        [missile_frame]
            begin=-150
            end=0
            image="projectiles/spear-n.png"
            image_diagonal="projectiles/spear-ne.png"
        [/missile_frame]
        [frame]
            begin=-250
            end=-150
            image="units/humans/pilum-master-attack-melee-1.png"
        [/frame]
        [frame]
            begin=-150
            end=-50
            image="units/humans/pilum-master-attack-melee-2.png"
            sound={SOUND_LIST:THROW}
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-50
                end=50
                image="units/humans/pilum-master-attack-ranged-1.png"
                sound=spear.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-50
                end=50
                image="units/humans/pilum-master-attack-ranged-2.png"
            [/frame]
        [/else]
        [frame]
            begin=50
            end=100
            image="units/humans/pilum-master.png"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=spear
        [/filter_attack]
        [frame]
            begin=-300
            end=-200
            image="units/humans/pilum-master-attack-melee-1.png"
        [/frame]
        [frame]
            begin=-200
            end=-100
            image="units/humans/pilum-master-attack-melee-2.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-100
                end=100
                image="units/humans/pilum-master-attack-melee-3.png"
                sound=spear.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-100
                end=100
                image="units/humans/pilum-master-attack-melee-3.png"
                sound=spear-miss.ogg
            [/frame]
        [/else]
        [frame]
            begin=100
            end=150
            image="units/humans/pilum-master.png"
        [/frame]
    [/attack_anim]
    {GENERIC_AMLA units/humans/pilum-master.png units/humans/pilum-master-attack-melee-1.png units/humans/pilum-master-attack-melee-2.png units/humans/pilum-master.png units/humans/pilum-master-attack-melee-1.png units/humans/pilum-master-attack-melee-2.png (
        [advancement]
            max_times=1
            always_display=yes
            id=spear
            description= _ "striking better with pilum"
            image=attacks/spear.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=attack
                name=spear
                increase_damage=1
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=spear2
            description= _ "striking faster with pilum"
            image=attacks/spear.png
            strict_amla=yes
            require_amla="spear"
            [effect]
                apply_to=attack
                name=spear
                increase_damage=-2
                increase_attacks=1
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=10
            always_display=yes
            id=spear3
            description= _ "striking better with pilum"
            image=attacks/spear.png
            strict_amla=yes
            require_amla="spear2"
            [effect]
                apply_to=attack
                name=spear
                increase_damage=1
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=javelin
            description= _ "throwing pilums faster"
            image=attacks/javelin-human.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=attack
                name=javelin
                increase_damage=-2
                increase_attacks=1
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=10
            always_display=yes
            id=javelin2
            description= _ "throwing pilums better"
            image=attacks/javelin-human.png
            strict_amla=yes
            require_amla="javelin"
            [effect]
                apply_to=attack
                name=javelin
                increase_damage=1
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=javelin3
            description= _ "throwing pilums more precisely"
            image=attacks/javelin-human.png
            strict_amla=yes
            require_amla="javelin2"
            [effect]
                apply_to=attack
                name=javelin
                [set_specials]
                    mode=append
                    {WEAPON_SPECIAL_MARKSMAN}
                [/set_specials]
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=trickery
            description= _ "able to attack in a tricky way that lowers enemy defence"
            image=attacks/spear.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=bonus_attack
                name=trickery
                description= _ "trickery"
                icon=attacks/spear.png
                range=melee
                defense_weight=0
                damage=-30
                number=-30
                clone_anim=yes
                [specials]
                    {WEAPON_SPECIAL_TRICKERY}
                [/specials]
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=3
            always_display=yes
            id=trickery2
            description= _ "tricking enemies better"
            image=attacks/spear.png
            strict_amla=yes
            require_amla="trickery"
            [effect]
                apply_to=improve_bonus_attack
                name=trickery
                increase_damage=15
                increase_attacks=10
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=5
            id=block
            description= _ "blocking better"
            image="icons/shield_tower.png"
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=defense
                replace=false
                [defense]
                    frozen=-3
                    castle=-2
                    sand=-3
                    village=-2
                    flat=-3
                    hills=-2
                    mountains=-2
                    swamp_water=-3
                    cave=-2
                    shallow_water=-3
                    reef=-2
                    forest=-2
                    fungus=-2
                [/defense]
            [/effect]
            {AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=3
            id=movement
            description= _ "faster"
            image=icons/boots_elven.png
            {AMLA_DEFAULT_BONUSES}
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=movement
                increase=1
            [/effect]
        [/advancement]
    ) "Pilum Master"}
