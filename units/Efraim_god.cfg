#textdomain wesnoth-loti
#define LIGHTNING DIRECTION_NUMBER
    [attack_anim]
        [filter_attack]
            name=lightning
            [or]
                name=thunder
            [/or]
        [/filter_attack]

        {LIGHTNING_BOLT {DIRECTION_NUMBER} }

        start_time=-250
        [frame]
            begin=-300
            end=-200
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=-200
            end=-75
            image="units/important/efraim-magic2.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-75
                end=0
                image="units/important/efraim-magic2.png"
                sound=lightning.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-75
                end=0
                image="units/important/efraim-magic2.png"
                sound=lightning-miss.ogg
            [/frame]
        [/else]
        [frame]
            begin=0
            end=75
            image="units/important/efraim-magic2.png"
        [/frame]
        [frame]
            begin=75
            end=150
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=150
            end=200
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=200
            end=300
            image="units/important/efraim.png"
        [/frame]
    [/attack_anim]
#enddef
[unit_type]
    id=Efraim_god
    name= _ "Demigod"
    race=half god_loti
    gender=male
    image="units/important/efraim.png"
    {MAGENTA_IS_THE_TEAM_COLOR}
    profile="portraits/Efraim.png" #~RIGHT()"
    hitpoints=110
    movement_type=elusivefoot
    [movement_costs]
        forest=1
        deep_water=2
    [/movement_costs]
    [defense]
        frozen=40
        shallow_water=60
        deep_water=40
        reef=50
        flat=40
        castle=30
        village=30
        forest=30
        cave=40
        hills=30
        mountains=30
        fungus=40
        swamp_water=60
        sand=60
        unwalkable=40
    [/defense]
    [resistance]
        fire=90
        arcane=90
        cold=90
        blade=115
        pierce=105
        impact=105
    [/resistance]
    movement=7
    experience=200
    {QUANTITY experience 200 250 320}
    level=10
    alignment=neutral
    advances_to=null
    cost=500
    hide_help=true
    do_not_list=yes
    usage=mixed fighter
    description= _ "Half-gods are things so rare, that nobody ever cared to describe their full powers.

Special notes: Telling everything a half-god can do would be too lengthy. But a matter to consider is that they have developed compassion out of a desire to save their wretched enemies from sins, pain, suffering and misery, they are able to redeem tormented souls. Even if this 'redeem attack' can be used only once every three turns.

Gameplay notes:
It is imperative to use the redeem attack from time to time. After redeeming a certain amount of enemies, redeem becomes more effective (possibly also a good offensive weapon) and the unit gains a new advancement line of choice. Some of them add new spells, others add new abilities. Spells gained have huge ranges, incomparable to other spells, and converge into Particle storm, an attack hitting many enemies and dealing severe arcane damage. Physical abilities converge into Spiritual Transformation, that is an attack that makes the unit attack a single target with huge damage and taking only 33% of the damage.
Without these advancements, the unit will never get particularly strong, and low level enemies may become rare to find.

The leadership is equal to the leadership of a level 5 unit."
    die_sound={SOUND_LIST:HUMAN_DIE}
    {DEFENSE_ANIM_FILTERED "units/important/efraim-sword-defend-2.png" "units/important/efraim-sword-defend-1.png" {SOUND_LIST:HUMAN_HIT} (
        [filter_second_attack]
            name=sword
        [/filter_second_attack]
    )}
    {DEFENSE_ANIM_FILTERED "units/important/efraim-sword-defend-2.png" "units/important/efraim-sword-defend-1.png" {SOUND_LIST:HUMAN_HIT} (
        [filter_second_attack]
            name=whirlwind
        [/filter_second_attack]
    )}
    {DEFENSE_ANIM_FILTERED "units/important/efraim-sword-defend-2.png" "units/important/efraim-sword-defend-1.png" {SOUND_LIST:HUMAN_HIT} (
        [filter_second_attack]
            name=mberserk2
        [/filter_second_attack]
    )}
    {DEFENSE_ANIM_FILTERED "units/important/efraim-sword-defend-2.png" "units/important/efraim-sword-defend-1.png" {SOUND_LIST:HUMAN_HIT} (
        [filter_second_attack]
            name=mberserk3
        [/filter_second_attack]
    )}
    {DEFENSE_ANIM_FILTERED "units/important/efraim-sword-defend-2.png" "units/important/efraim-sword-defend-1.png" {SOUND_LIST:HUMAN_HIT} (
        [filter_second_attack]
            name=mberserk5
        [/filter_second_attack]
    )}
    [abilities]
        {ABILITY_REGENERATES}
        {ABILITY_PENETRATE}
        {ABILITY_LEADERSHIP_LEVEL_5}
    [/abilities]
    [attack]
        name=redeem
        description=_"redeem"
        type=arcane
        [specials]
            {WEAPON_SPECIAL_MAGICAL}
            {WEAPON_SPECIAL_REDEEM_1}
        [/specials]
        damage=1
        number=1
        defense_weight=0
        range=ranged
        icon=attacks/redeem.png
    [/attack]
    [attack]
        name=sword
        description=_"sword"
        icon=attacks/astral-blade.png
        type=blade
        range=melee
        damage=12
        number=4
        [specials]
            {WEAPON_SPECIAL_LEECH}
        [/specials]
    [/attack]
    [attack]
        name=whirlwind
        description=_"whirlwind"
        icon=attacks/sword-elven.png
        type=blade
        range=melee
        damage=8
        defense_weight=0
        number=3
        [specials]
            {WEAPON_SPECIAL_WHIRLWIND}
            {WEAPON_SPECIAL_MAGICAL}
            {WEAPON_SPECIAL_LEECH}
        [/specials]
    [/attack]
    [attack]
        name=knife
        description=_"knife"
        icon=attacks/dagger-thrown-poison-human.png
        type=blade
        range=ranged
        [specials]
            {WEAPON_SPECIAL_POISON}
        [/specials]
        damage=8
        number=4
    [/attack]
    [attack]
        name=fireball
        description=_"fireball"
        icon=attacks/fireball.png
        type=fire
        range=ranged
        [specials]
            {WEAPON_SPECIAL_MAGICAL}
            {WEAPON_SPECIAL_EXPLOSIVE}
        [/specials]
        damage=13
        number=3
    [/attack]
    [defend]
        [filter_attack]
            range=ranged
        [/filter_attack]
        start_time=-155
        [frame]
            duration=30
            image=units/important/efraim-sword-defend-1.png
            halo=halo/elven/elven-shield-halo-20pct.png
        [/frame]
        [frame]
            duration=30
            image=units/important/efraim-sword-defend-1.png
            halo=halo/elven/elven-shield-halo-40pct.png
        [/frame]
        [frame]
            duration=30
            image=units/important/efraim-sword-defend-1.png
            halo=halo/elven/elven-shield-halo-60pct.png
        [/frame]
        [frame]
            duration=40
            image=units/important/efraim-sword-defend-2.png
            halo=halo/elven/elven-shield-halo-80pct.png
        [/frame]
        [if]
            hits=hit
            [frame]
                duration=100
                image=units/important/efraim-sword-defend-2.png
                sound={SOUND_LIST:HUMAN_HIT}
                halo=halo/elven/elven-shield-halo-100pct.png
            [/frame]
        [/if]
        [else]
            hits=miss,kill
            [frame]
                duration=100
                image=units/important/efraim-sword-defend-2.png
                halo=halo/elven/elven-shield-halo-100pct.png
            [/frame]
        [/else]
        [frame]
            duration=15
            image=units/important/efraim-sword-defend-2.png
            halo=halo/elven/elven-shield-halo-80pct.png
        [/frame]
        [frame]
            duration=15
            image=units/important/efraim-sword-defend-1.png
            halo=halo/elven/elven-shield-halo-60pct.png
        [/frame]
        [frame]
            duration=15
            image=units/important/efraim-sword-defend-1.png
            halo=halo/elven/elven-shield-halo-40pct.png
        [/frame]
        [frame]
            duration=15
            image=units/important/efraim-sword-defend-1.png
            halo=halo/elven/elven-shield-halo-20pct.png
        [/frame]
    [/defend]
    [standing_anim]
        [frame]
            image="units/important/efraim.png"
            duration=1
        [/frame]
    [/standing_anim]
    [attack_anim]
        [filter_attack]
            name=knife
        [/filter_attack]
        [missile_frame]
            begin=-150
            end=0
            image="projectiles/dagger-n.png"
            image_diagonal="projectiles/dagger-ne.png"
        [/missile_frame]
        [if]
            hits=yes
            [frame]
                begin=-350
                end=-100
                image="units/important/efraim-throwknife1.png"
                sound=throwing-knife.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-350
                end=-100
                image="units/important/efraim-throwknife1.png"
                sound=throwing-knife-miss.ogg
            [/frame]
        [/else]
        [frame]
            begin=-100
            end=50
            image="units/important/efraim-throwknife2.png"
        [/frame]
        {SOUND:POISON}
        [frame]
            begin=50
            end=50
            image="units/important/efraim.png"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=sword
        [/filter_attack]
        [frame]
            begin=-200
            end=-100
            image="units/important/efraim-sword-1.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-100
                end=150
                image="units/important/efraim-sword-2.png"
                sound={SOUND_LIST:SWORD_SWISH}
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-100
                end=150
                image="units/important/efraim-sword-2.png"
                sound={SOUND_LIST:MISS}
            [/frame]
        [/else]
        [frame]
            begin=150
            end=200
            image="units/important/efraim-sword-1.png"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=sword
        [/filter_attack]
        [frame]
            begin=-225
            end=-200
            image="units/important/efraim.png"
        [/frame]
        [frame]
            begin=-200
            end=-100
            image="units/important/efraim-sword-2-1.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-100
                end=150
                image="units/important/efraim-sword-2-2.png"
                sound=dagger-swish.wav
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-100
                end=150
                image="units/important/efraim-sword-2-2.png"
                sound={SOUND_LIST:MISS}
            [/frame]
        [/else]
        [frame]
            begin=150
            end=200
            image="units/important/efraim.png"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=whirlwind
        [/filter_attack]
        [frame]
            begin=-500
            end=-400
            image="units/important/efraim-whirlwind-1.png"
        [/frame]
        [frame]
            begin=-400
            end=-300
            image="units/important/efraim-whirlwind-2.png"
        [/frame]
        [frame]
            begin=-300
            end=-200
            image="units/important/efraim-whirlwind-3.png"
        [/frame]
        [frame]
            begin=-200
            end=-100
            image="units/important/efraim-whirlwind-4.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-100
                end=0
                image="units/important/efraim-whirlwind-1.png"
                sound={SOUND_LIST:SWORD_SWISH}
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-100
                end=0
                image="units/important/efraim-whirlwind-2.png"
                sound={SOUND_LIST:MISS}
            [/frame]
        [/else]
        [frame]
            begin=0
            end=100
            image="units/important/efraim-whirlwind-3.png"
        [/frame]
        [frame]
            begin=100
            end=200
            image="units/important/efraim-whirlwind-4.png"
        [/frame]
        [frame]
            begin=200
            end=300
            image="units/important/efraim-whirlwind-1.png"
        [/frame]
        [frame]
            begin=300
            end=400
            image="units/important/efraim.png"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=fireball
        [/filter_attack]
        {MISSILE_FRAME_FIREBALL}
        [frame]
            begin=-300
            end=-200
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=-200
            end=-75
            image="units/important/efraim-magic2.png"
        [/frame]
        [frame]
            begin=-75
            end=0
            image="units/important/efraim-magic2.png"
            sound=fire.wav
        [/frame]
        [frame]
            begin=0
            end=75
            image="units/important/efraim-magic2.png"
        [/frame]
        [frame]
            begin=75
            end=150
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=150
            end=200
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=200
            end=300
            image="units/important/efraim.png"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=iceball
        [/filter_attack]
        {MISSILE_FRAME_ICE}
        [frame]
            begin=-150
            end=-120
            image="units/important/efraim.png"
        [/frame]
        [frame]
            begin=-120
            end=120
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=120
            end=150
            image="units/important/efraim-magic2.png"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=fire blast
        [/filter_attack]
        {MISSILE_FRAME_FIREBLAST}
        [frame]
            begin=-700
            end=-600
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=-600
            end=-650
            image="units/important/efraim-magic2.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-650
                end=0
                image="units/important/efraim-magic2.png"
                sound=fire.wav
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-650
                end=0
                image="units/important/efraim-magic2.png"
                sound=fire.wav
            [/frame]
        [/else]
        [frame]
            begin=0
            end=75
            image="units/important/efraim-magic2.png"
        [/frame]
        [frame]
            begin=75
            end=150
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=150
            end=200
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=200
            end=300
            image="units/important/efraim.png"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=arctic blast
        [/filter_attack]
        {MISSILE_FRAME_ARCTICBLAST}
        [frame]
            begin=-300
            end=-200
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=-200
            end=-75
            image="units/important/efraim-magic2.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-75
                end=0
                image="units/important/efraim-magic2.png"
                sound=magic-dark.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-75
                end=0
                image="units/important/efraim-magic2.png"
                sound=magic-dark-miss.ogg
            [/frame]
        [/else]
        [frame]
            begin=0
            end=75
            image="units/important/efraim-magic2.png"
        [/frame]
        [frame]
            begin=75
            end=150
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=150
            end=200
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=200
            end=300
            image="units/important/efraim.png"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=entropy
        [/filter_attack]
        {MISSILE_FRAME_CHAOSBEAM}
        [frame]
            begin=-300
            end=-200
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=-200
            end=-75
            image="units/important/efraim-magic2.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-75
                end=0
                image="units/important/efraim-magic2.png"
                sound=magic-dark.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-75
                end=0
                image="units/important/efraim-magic2.png"
                sound=magic-dark-miss.ogg
            [/frame]
        [/else]
        [frame]
            begin=0
            end=75
            image="units/important/efraim-magic2.png"
        [/frame]
        [frame]
            begin=75
            end=150
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=150
            end=200
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=200
            end=300
            image="units/important/efraim.png"
        [/frame]
    [/attack_anim]
    {LIGHTNING 1}
    {LIGHTNING 2}
    {LIGHTNING 3}
    [attack_anim]
        [filter_attack]
            name=firestorm
        [/filter_attack]
        {MISSILE_FRAME_FIRESTORM}
        [frame]
            begin=-500
            end=-400
            offset=0
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=-400
            end=-300
            offset=0
            image="units/important/efraim-magic2.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-300
                end=-200
                offset=0
                image="units/important/efraim-magic2.png"
                sound=fire.wav
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-300
                end=-200
                offset=0
                image="units/important/efraim-magic2.png"
                sound=fire.wav
            [/frame]
        [/else]
        [frame]
            begin=-200
            end=-100
            offset=0
            image="units/important/efraim-magic2.png"
        [/frame]
        [frame]
            begin=-100
            end=0
            offset=0
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=0
            end=500
            offset=0
            image="units/important/efraim.png"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=blizzard
        [/filter_attack]
        {MISSILE_FRAME_BLIZZARD}
        [frame]
            begin=-500
            end=-400
            offset=0
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=-400
            end=-300
            offset=0
            image="units/important/efraim-magic2.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-300
                end=-200
                offset=0
                image="units/important/efraim-magic2.png"
                sound=magic-dark-big.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-300
                end=-200
                offset=0
                image="units/important/efraim-magic2.png"
                sound=magic-dark-big-miss.ogg
            [/frame]
        [/else]
        [frame]
            begin=-200
            end=-100
            offset=0
            image="units/important/efraim-magic2.png"
        [/frame]
        [frame]
            begin=-100
            end=0
            offset=0
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=0
            end=500
            offset=0
            image="units/important/efraim.png"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=particle storm
        [/filter_attack]
        {MISSILE_FRAME_PARTICLE_STORM}
        [frame]
            begin=-500
            end=-400
            offset=0
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=-400
            end=-300
            offset=0
            image="units/important/efraim-magic2.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-300
                end=-200
                offset=0
                image="units/important/efraim-magic2.png"
                sound=magic-dark-big.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-300
                end=-200
                offset=0
                image="units/important/efraim-magic2.png"
                sound=magic-dark-big-miss.ogg
            [/frame]
        [/else]
        [frame]
            begin=-200
            end=-100
            offset=0
            image="units/important/efraim-magic2.png"
        [/frame]
        [frame]
            begin=-100
            end=0
            offset=0
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=0
            end=500
            offset=0
            image="units/important/efraim.png"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=redeem
        [/filter_attack]
        {MISSILE_FRAME_FAERIE_FIRE_BACKWARDS}

        [if]
            hits=yes
            [frame]
                begin=-450
                end=-375
                image="units/important/efraim-magic1.png"
                sound=magic-faeriefire.ogg
                halo=halo/elven/faerie-fire-halo1.png
                halo_x,halo_y=0,-28
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-450
                end=-375
                image="units/important/efraim-magic1.png"
                sound=magic-faeriefire-miss.ogg

                halo=halo/elven/faerie-fire-halo1.png
                halo_x,halo_y=0,-28
            [/frame]
        [/else]

        [frame]
            begin=-375
            end=-300
            image="units/important/efraim-magic1.png"
            halo=halo/elven/faerie-fire-halo2.png
            halo_x,halo_y=0,-28
        [/frame]
        [frame]
            begin=-300
            end=-225
            image="units/important/efraim-magic2.png"
            halo=halo/elven/faerie-fire-halo3.png
            halo_x,halo_y=0,-28
        [/frame]
        [frame]
            begin=-225
            end=-150
            image="units/important/efraim-magic2.png"
            halo=halo/elven/faerie-fire-halo4.png
            halo_x,halo_y=0,-28
        [/frame]
        [frame]
            begin=-150
            end=-75
            image="units/important/efraim-magic1.png"
            halo=halo/elven/faerie-fire-halo5.png
            halo_x,halo_y=0,-28
        [/frame]
        [frame]
            begin=-75
            end=0
            image="units/important/efraim-magic1.png"
            halo=halo/elven/faerie-fire-halo6.png
            halo_x,halo_y=0,-28
        [/frame]
        [frame]
            begin=-0
            end=75
            image="units/important/efraim.png"
            halo=halo/elven/faerie-fire-halo7.png
            halo_x,halo_y=0,-28
        [/frame]
    [/attack_anim]
    [animation]
        apply_to=draw_weapon
        start_time=-500
        [filter_attack]
            name=spiritual transformation
        [/filter_attack]
        blend_ratio="0~1:500"
        blend_color=255,255,255
        [frame]
            begin=-500
            end=0
            image="units/important/efraim.png"
        [/frame]
    [/animation]
    [attack_anim]
        [filter_attack]
            name=spiritual transformation
        [/filter_attack]
        start_time=-500
        blend_ratio="1:1000"
        blend_color=255,255,255
        [frame]
            begin=-500
            end=-200
            image="units/important/efraim.png"
        [/frame]
        [frame]
            begin=-200
            end=-50
            image="units/important/efraim-sword-2-1.png"
        [/frame]
        [frame]
            begin=-50
            end=100
            image="units/important/efraim-sword-2-2.png"
        [/frame]
        [frame]
            begin=100
            end=500
            image="units/important/efraim.png"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=spiritual transformation
        [/filter_attack]
        start_time=-500
        blend_ratio="1:1000"
        blend_color=255,255,255
        [frame]
            begin=-500
            end=-200
            image="units/important/efraim.png"
        [/frame]
        [frame]
            begin=-200
            end=-50
            image="units/important/efraim-sword-1.png"
        [/frame]
        [frame]
            begin=-50
            end=100
            image="units/important/efraim-sword-2.png"
        [/frame]
        [frame]
            begin=100
            end=500
            image="units/important/efraim.png"
        [/frame]
    [/attack_anim]
    [defend]
        start_time=-175
        [filter_second_attack]
            name=spiritual transformation
        [/filter_second_attack]
        blend_ratio="1:375"
        blend_color=255,255,255
        [frame]
            duration=25
            image="units/important/efraim.png"
            halo=halo/elven/elven-shield-halo-20pct.png
        [/frame]
        [frame]
            duration=25
            image="units/important/efraim.png"
            halo=halo/elven/elven-shield-halo-40pct.png
        [/frame]
        [frame]
            duration=50
            image="units/important/efraim-defend-1.png"
            halo=halo/elven/elven-shield-halo-60pct.png
        [/frame]
        [frame]
            duration=50
            image="units/important/efraim-defend-1.png"
            halo=halo/elven/elven-shield-halo-80pct.png
        [/frame]
        [if]
            hits=hit
            [frame]
                duration=100
                image="units/important/efraim-defend-2.png"
                sound={SOUND_LIST:HUMAN_HIT}
                halo=halo/elven/elven-shield-halo-100pct.png
            [/frame]
        [/if]
        [else]
            hits=miss,kill
            [frame]
                duration=100
                image="units/important/efraim-defend-2.png"
                halo=halo/elven/elven-shield-halo-100pct.png
            [/frame]
        [/else]
        [frame]
            duration=50
            image="units/important/efraim-defend-1.png"
            halo=halo/elven/elven-shield-halo-80pct.png
        [/frame]
        [frame]
            duration=25
            image="units/important/efraim.png"
            halo=halo/elven/elven-shield-halo-60pct.png
        [/frame]
        [frame]
            duration=25
            image="units/important/efraim.png"
            halo=halo/elven/elven-shield-halo-40pct.png
        [/frame]
        [frame]
            duration=25
            image="units/important/efraim.png"
            halo=halo/elven/elven-shield-halo-20pct.png
        [/frame]
    [/defend]
    {AMLA_GOD units/important/efraim.png units/important/efraim-magic1.png units/important/efraim-magic2.png units/important/efraim.png units/important/efraim-magic1.png units/important/efraim-magic2.png (
        [advancement]
            max_times=1
            always_display=yes
            id=sword1
            description= _ "better with sword"
            image=attacks/astral-blade.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=attack
                name=sword
                increase_damage=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=sword1_speed
            description= _ "faster with sword (affects also whirlwind)"
            image=attacks/astral-blade.png
            strict_amla=yes
            require_amla="sword3"
            [effect]
                apply_to=attack
                name=sword
                increase_attacks=1
            [/effect]
            [effect]
                apply_to=attack
                name=whirlwind
                increase_attacks=1
                increase_damage=-1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=sword2
            description= _ "better with sword"
            image=attacks/astral-blade.png
            strict_amla=yes
            require_amla="sword1"
            [effect]
                apply_to=attack
                name=sword
                increase_damage=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=sword2_marksman
            description= _ "more precise with sword"
            image=attacks/astral-blade.png
            strict_amla=yes
            require_amla="sword1"
            [effect]
                apply_to=attack
                name=sword
                [set_specials]
                    mode=append
                    {WEAPON_SPECIAL_MARKSMAN}
                [/set_specials]
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=sword3
            description= _ "better with sword"
            image=attacks/astral-blade.png
            strict_amla=yes
            require_amla="sword1,sword2"
            [effect]
                apply_to=attack
                name=sword
                increase_damage=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=sword4
            description= _ "better with sword"
            image=attacks/astral-blade.png
            strict_amla=yes
            require_amla="sword1,sword2,sword3"
            [effect]
                apply_to=attack
                name=sword
                increase_damage=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=sword4_flames
            description= _ "incinerating enemies with sword"
            image=attacks/astral-blade.png
            strict_amla=yes
            require_amla="sword1,sword2,sword3,sword4"
            [effect]
                apply_to=attack
                name=sword
                [set_specials]
                    mode=append
                    {WEAPON_SPECIAL_INCINERATE}
                [/set_specials]
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=sword5
            description= _ "better with sword"
            image=attacks/astral-blade.png
            strict_amla=yes
            require_amla="sword1,sword2,sword3,sword4"
            [effect]
                apply_to=attack
                name=sword
                increase_damage=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=sword5_speed
            description= _ "faster with sword (affects also whirlwind)"
            image=attacks/astral-blade.png
            strict_amla=yes
            require_amla="sword1,sword2,sword3,sword4,sword5,sword1_speed"
            [effect]
                apply_to=attack
                name=sword
                increase_attacks=1
            [/effect]
            [effect]
                apply_to=attack
                name=whirlwind
                increase_attacks=1
                increase_damage=-1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=5
            always_display=yes
            id=sword6
            description= _ "better with sword"
            image=attacks/astral-blade.png
            strict_amla=yes
            require_amla="sword1,sword2,sword3,sword4,sword5"
            [effect]
                apply_to=attack
                name=sword
                increase_damage=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=berserk1
            description= _ "able to attack twice in a row"
            image=attacks/frenzy.png
            strict_amla=yes
            require_amla="sword1,sword2,sword3,sword2_marksman"
            [effect]
                apply_to=bonus_attack
                name=mberserk2
                description= _ "fury (2)"
                clone_anim=yes
                icon=attacks/frenzy.png
                type=blade
                range=melee
                defense_weight=0
                damage=-20
                force_original_attack=sword
                [specials]
                    {WEAPON_SPECIAL_LESSER_BERSERK 2}
                    {WEAPON_SPECIAL_SWARM}
                    {WEAPON_SPECIAL_MARKSMAN}
                [/specials]
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=berserk2
            description= _ "able to attack thrice in a row"
            image=attacks/frenzy.png
            strict_amla=yes
            require_amla="berserk1"
            [effect]
                apply_to=bonus_attack
                name=mberserk3
                description= _ "fury (3)"
                clone_anim=yes
                icon=attacks/frenzy.png
                type=blade
                range=melee
                defense_weight=0
                damage=-20
                force_original_attack=sword
                [specials]
                    {WEAPON_SPECIAL_LESSER_BERSERK 3}
                    {WEAPON_SPECIAL_SWARM}
                    {WEAPON_SPECIAL_MARKSMAN}
                [/specials]
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=berserk3
            description= _ "able to attack five times in a row"
            image=attacks/frenzy.png
            strict_amla=yes
            require_amla="berserk2"
            [effect]
                apply_to=bonus_attack
                name=mberserk5
                description= _ "fury (5)"
                clone_anim=yes
                icon=attacks/frenzy.png
                type=blade
                range=melee
                defense_weight=0
                damage=-20
                force_original_attack=sword
                [specials]
                    {WEAPON_SPECIAL_LESSER_BERSERK 5}
                    {WEAPON_SPECIAL_SWARM}
                    {WEAPON_SPECIAL_MARKSMAN}
                [/specials]
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=3
            always_display=yes
            id=berserk1_damage
            description= _ "doing more damage with the furious attack"
            image=attacks/frenzy.png
            strict_amla=yes
            require_amla="berserk1"
            [effect]
                apply_to=improve_bonus_attack
                name=mberserk2
                increase_damage=10
            [/effect]
            [effect]
                apply_to=improve_bonus_attack
                name=mberserk3
                increase_damage=10
            [/effect]
            [effect]
                apply_to=improve_bonus_attack
                name=mberserk5
                increase_damage=10
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=whirlwind
            description= _ "whirling better"
            image=attacks/sword-elven.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=attack
                name=whirlwind
                increase_damage=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=whirlwind2
            description= _ "whirling better"
            image=attacks/sword-elven.png
            strict_amla=yes
            require_amla="whirlwind,whirlwind,whirlwind,sword4"
            [effect]
                apply_to=attack
                name=whirlwind
                increase_damage=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=3
            always_display=yes
            id=whirlwind3
            description= _ "whirling better"
            image=attacks/sword-elven.png
            strict_amla=yes
            require_amla="whirlwind2,whirlwind2,whirlwind2,sword6"
            [effect]
                apply_to=attack
                name=whirlwind
                increase_damage=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=knives1
            description= _ "better with knives"
            image=attacks/dagger-thrown-poison-human.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=attack
                name=knife
                increase_damage=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=knives1_backstab
            description= _ "backstabbing with knives"
            image=attacks/dagger-thrown-poison-human.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=attack
                name=knife
                [set_specials]
                    mode=append
                    {WEAPON_SPECIAL_BACKSTAB}
                [/set_specials]
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=knives2
            description= _ "better with knives"
            image=attacks/dagger-thrown-poison-human.png
            strict_amla=yes
            require_amla="knives1"
            [effect]
                apply_to=attack
                name=knife
                increase_damage=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=knives2_precision
            description= _ "more precise with knives"
            image=attacks/dagger-thrown-poison-human.png
            strict_amla=yes
            require_amla="knives1,knives2"
            [effect]
                apply_to=attack
                name=knife
                [set_specials]
                    mode=append
                    {WEAPON_SPECIAL_MARKSMAN}
                [/set_specials]
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=knives3
            description= _ "better with knives"
            image=attacks/dagger-thrown-poison-human.png
            strict_amla=yes
            require_amla="knives1,knives2"
            [effect]
                apply_to=attack
                name=knife
                increase_damage=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=knives3_speed
            description= _ "faster with knives"
            image=attacks/dagger-thrown-poison-human.png
            strict_amla=yes
            require_amla="knives1,knives2,knives3"
            [effect]
                apply_to=attack
                name=knife
                increase_damage=-1
                increase_attacks=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=knives4
            description= _ "better with knives"
            image=attacks/dagger-thrown-poison-human.png
            strict_amla=yes
            require_amla="knives1,knives2,knives3"
            [effect]
                apply_to=attack
                name=knife
                increase_damage=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=knives4-backstab
            description= _ "backstabbing with knives better"
            image=attacks/dagger-thrown-poison-human.png
            strict_amla=yes
            require_amla="knives4,knives1_backstab"
            [effect]
                apply_to=attack
                name=knife
                remove_specials=backstab
                [set_specials]
                    mode=append
                    {WEAPON_SPECIAL_GREATER_BACKSTAB}
                [/set_specials]
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=5
            always_display=yes
            id=knives5
            description= _ "better with knives"
            image=attacks/dagger-thrown-poison-human.png
            strict_amla=yes
            require_amla="knives1,knives2,knives3,knives4"
            [effect]
                apply_to=attack
                name=knife
                increase_damage=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=knives5_speed
            description= _ "faster with knives"
            image=attacks/dagger-thrown-poison-human.png
            strict_amla=yes
            require_amla="knives1,knives2,knives3,knives4,knives3_speed"
            [effect]
                apply_to=attack
                name=knife
                increase_damage=-2
                increase_attacks=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=fireball
            description= _ "casting fireballs better"
            image=attacks/fireball.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=attack
                name=fireball
                increase_damage=2
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=fireball1_incineration
            description= _ "incinerating the primary target of the fireballs"
            image=attacks/fireball.png
            strict_amla=yes
            require_amla="fireball"
            [effect]
                apply_to=attack
                name=fireball
                [set_specials]
                    mode=append
                    {WEAPON_SPECIAL_INCINERATE}
                [/set_specials]
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=fireball2
            description= _ "casting fireballs better"
            image=attacks/fireball.png
            strict_amla=yes
            require_amla="fireball"
            [effect]
                apply_to=attack
                name=fireball
                increase_damage=2
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=fireball3
            description= _ "casting fireballs faster"
            image=attacks/fireball.png
            strict_amla=yes
            require_amla="fireball,fireball2"
            [effect]
                apply_to=attack
                name=fireball
                increase_attacks=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=fireball3_penetrate
            description= _ "decreasing enemy fire resistance by 10%"
            image=attacks/fireball.png
            strict_amla=yes
            require_amla="fireball,fireball2,fireball3"
            fire_penetrate=10
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=fireball4
            description= _ "casting fireballs faster"
            image=attacks/fireball.png
            strict_amla=yes
            require_amla="fireball,fireball2,fireball3"
            [effect]
                apply_to=attack
                name=fireball
                increase_attacks=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=fireball4_precision
            description= _ "shooting fireballs with better precision"
            image=attacks/fireball.png
            strict_amla=yes
            require_amla="fireball,fireball2,fireball3,fireball4"
            [effect]
                apply_to=attack
                name=fireball
                remove_specials=magical
                [set_specials]
                    mode=append
                    {WEAPON_SPECIAL_FOCUSED}
                [/set_specials]
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=fireball5
            description= _ "casting fireballs faster"
            image=attacks/fireball.png
            strict_amla=yes
            require_amla="fireball,fireball2,fireball3,fireball4"
            [effect]
                apply_to=attack
                name=fireball
                increase_attacks=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=fireball5_precision
            description= _ "shooting fireballs with better precision"
            image=attacks/fireball.png
            strict_amla=yes
            require_amla="fireball,fireball2,fireball3,fireball4,fireball4_precision"
            [effect]
                apply_to=attack
                name=fireball
                remove_specials=focused
                [set_specials]
                    mode=append
                    {WEAPON_SPECIAL_GUIDED}
                [/set_specials]
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=3
            always_display=yes
            id=fireball6
            description= _ "casting fireballs with greater damage"
            image=attacks/fireball.png
            strict_amla=yes
            require_amla="fireball,fireball2,fireball3,fireball4"
            [effect]
                apply_to=attack
                name=fireball
                increase_damage=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=iceball
            description= _ "able to use cast iceball"
            image=attacks/iceball.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=new_attack
                damage=12
                number=2
                type=cold
                name=iceball
                description= _"iceball"
                icon=attacks/iceball.png
                range=ranged
                [specials]
                    {WEAPON_SPECIAL_MAGICAL}
                    {WEAPON_SPECIAL_SLOW}
                [/specials]
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=iceball2
            description= _ "dealing more damage with iceball"
            image=attacks/iceball.png
            strict_amla=yes
            require_amla="iceball"
            [effect]
                apply_to=attack
                name=iceball
                increase_damage=1
                increase_attacks=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=iceball3
            description= _ "dealing damage to multiple enemies with iceball"
            image=attacks/iceball.png
            strict_amla=yes
            require_amla="iceball2"
            [effect]
                apply_to=attack
                name=iceball
                [set_specials]
                    mode=append
                    {WEAPON_SPECIAL_EXPLOSIVE}
                [/set_specials]
                increase_attacks=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=iceball4
            description= _ "slowing groups of enemies with iceball"
            image=attacks/iceball.png
            strict_amla=yes
            require_amla="iceball3"
            [effect]
                apply_to=attack
                name=iceball
                [set_specials]
                    mode=append
                    {WEAPON_SPECIAL_EXPLOSIVE_SLOW}
                [/set_specials]
                increase_damage=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=5
            always_display=yes
            id=iceball5
            description= _ "dealing more damage with iceball"
            image=attacks/iceball.png
            strict_amla=yes
            require_amla="iceball4"
            [effect]
                apply_to=attack
                name=iceball
                increase_damage=2
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            id=movement
            description= _ "faster"
            image=icons/boots_elven.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=movement
                increase=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            id=movement2
            description= _ "faster"
            image=icons/boots_elven.png
            strict_amla=yes
            require_amla="movement"
            [effect]
                apply_to=movement
                increase=1
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            id=movement3
            max_times=1
            description= _ "able to muster enough mental powers to levitate through hard terrains"
            image=icons/boots_elven.png
            strict_amla=yes
            require_amla="movement,movement2"
            [effect]
                apply_to=movement_costs
                replace=true
                [movement_costs]
                    frozen=1
                    shallow_water=1
                    deep_water=1
                    reef=1
                    flat=1
                    castle=1
                    village=1
                    forest=1
                    cave=1
                    hills=1
                    mountains=2
                    forest=1
                    fungus=2
                    swamp_water=1
                    sand=1
                    unwalkable=1
                    impassable={UNREACHABLE}
                [/movement_costs]
            [/effect]
            [effect]
                apply_to=new_animation
                name=wings
                gender=male
                [standing_anim]
                    start_time=0
                    terrain_type={DRAKE_UNWALKABLE_TERRAINS}
                    submerge=0.01
                    [frame]
                        duration=400
                        image="units/important/efraim-float-1.png"
                    [/frame]
                    [frame]
                        duration=400
                        image="units/important/efraim-float-2.png"
                    [/frame]
                    [frame]
                        duration=400
                        image="units/important/efraim-float-3.png"
                    [/frame]
                    [frame]
                        duration=400
                        image="units/important/efraim-float-2.png"
                    [/frame]
                [/standing_anim]
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            id=dodge
            max_times=5
            description= _ "harder to be hit"
            image=icons/crossed_sword_and_hammer.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=defense
                replace=false
                [defense]
                    frozen=-2
                    shallow_water=-2
                    deep_water=-2
                    reef=-2
                    flat=-2
                    castle=-1
                    village=-1
                    forest=-1
                    cave=-2
                    hills=-1
                    mountains=-1
                    fungus=-2
                    swamp_water=-2
                    sand=-2
                [/defense]
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            id=armour
            max_times=5
            description= _ "better protected from physical blows (2% better resistances)"
            image=icons/armor_leather.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=resistance
                replace=false
                [resistance]
                    blade=-2
                    pierce=-2
                    impact=-2
                [/resistance]
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            id=shield
            max_times=5
            description= _ "better protected from magical attacks (2% better resistances)"
            image=icons/magical_shield.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=resistance
                replace=false
                [resistance]
                    fire=-2
                    arcane=-2
                    cold=-2
                [/resistance]
            [/effect]
            {IMPROVED_AMLA_DEFAULT_BONUSES}
        [/advancement]
    ) "Efraim_god"}
