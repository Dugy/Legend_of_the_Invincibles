#textdomain wesnoth-loti
#define LIGHTNING DIRECTION_NUMBER
    [attack_anim]
        [filter_attack]
            name=lightning
            [or]
                name=thunder
            [/or]
        [/filter_attack]

        {LIGHTNING_BOLT {DIRECTION_NUMBER} }

        start_time=-250
        [frame]
            begin=-300
            end=-200
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=-200
            end=-75
            image="units/important/efraim-magic2.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-75
                end=0
                image="units/important/efraim-magic2.png"
                sound=lightning.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-75
                end=0
                image="units/important/efraim-magic2.png"
                sound=lightning-miss.ogg
            [/frame]
        [/else]
        [frame]
            begin=0
            end=75
            image="units/important/efraim-magic2.png"
        [/frame]
        [frame]
            begin=75
            end=150
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=150
            end=200
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=200
            end=300
            image="units/important/efraim.png"
        [/frame]
    [/attack_anim]
#enddef
[unit_type]
    id=Efraim_lich
    name= _ "Preserved Lich"
    race=undead
    gender=male
    image="units/important/efraim.png"
    profile="portraits/Efraim-later.png" #~RIGHT()"
    hitpoints=75
    movement_type=elusivefoot
    [movement_costs]
        forest=1
        deep_water=2
    [/movement_costs]
    [defense]
        frozen=40
        shallow_water=60
        deep_water=40
        reef=50
        flat=40
        castle=30
        village=30
        forest=30
        cave=40
        hills=30
        mountains=30
        fungus=40
        swamp_water=60
        sand=60
        unwalkable=40
    [/defense]
    [resistance]
        blade=80
        pierce=50
        impact=130
        fire=100
        cold=50
        arcane=130
    [/resistance]
    movement=7
    experience=180
    {QUANTITY experience 60 110 180}
    level=5
    alignment=neutral
    advances_to=null
    cost=200
    hide_help=true
    do_not_list=yes
    usage=mixed fighter
    description= _ "Preserved liches are an exotic kind of liches, they are far more powerful than mere liches.

Gameplay notes:
Advancements with sword add marksman, plague, and berserk-like attacks.
Advancements with whirlwind gain bonuses from sword advancements, and depend on advancements with sword.
Advancements with throwing knives are a potent source of weapon-related ranged damage, it may gain backstab.
Advancements with wave of fear bring huge damage, slow, explosive slow, leech, and after taking a lot of advancements also explosive damage.
Don't neglect defensive abilities. They stack additively with gear, while the effects of different parts of armour stack only multiplicatively.
The soul eater ability will add a lot of other advancements (new attacks, regeneration, healing, various abilities and much more).
Try to avoid learning from books, because while normal advancements add 20 to maximum experience to preserved liches, these advancements add 20% to maximum experience; that might later be an equivalent even to five advancements."
    die_sound={SOUND_LIST:HUMAN_DIE}
    {DEFENSE_ANIM_FILTERED "units/important/efraim-sword-defend-2.png" "units/important/efraim-sword-defend-1.png" {SOUND_LIST:HUMAN_HIT} (
        [filter_second_attack]
            name=sword
        [/filter_second_attack]
    )}
    {DEFENSE_ANIM_FILTERED "units/important/efraim-sword-defend-2.png" "units/important/efraim-sword-defend-1.png" {SOUND_LIST:HUMAN_HIT} (
        [filter_second_attack]
            name=whirlwind
        [/filter_second_attack]
    )}
    {DEFENSE_ANIM_FILTERED "units/important/efraim-sword-defend-2.png" "units/important/efraim-sword-defend-1.png" {SOUND_LIST:HUMAN_HIT} (
        [filter_second_attack]
            name=mberserk2
        [/filter_second_attack]
    )}
    {DEFENSE_ANIM_FILTERED "units/important/efraim-sword-defend-2.png" "units/important/efraim-sword-defend-1.png" {SOUND_LIST:HUMAN_HIT} (
        [filter_second_attack]
            name=mberserk3
        [/filter_second_attack]
    )}
    {DEFENSE_ANIM_FILTERED "units/important/efraim-sword-defend-2.png" "units/important/efraim-sword-defend-1.png" {SOUND_LIST:HUMAN_HIT} (
        [filter_second_attack]
            name=mberserk5
        [/filter_second_attack]
    )}
    [abilities]
        {ABILITY_SOUL_EATER}
        {ABILITY_REGENERATES}
        {ABILITY_SUBMERGE}
        {ABILITY_PENETRATE}
    [/abilities]
    [attack]
        name=sword
        description=_"sword"
        icon=attacks/sword-unholy.png
        type=blade
        range=melee
        damage=10
        number=4
        [specials]
            {WEAPON_SPECIAL_LEECH}
        [/specials]
    [/attack]
    [attack]
        name=whirlwind
        description=_"whirlwind"
        icon=attacks/sword-elven.png
        type=blade
        range=melee
        damage=7
        defense_weight=0
        number=3
        [specials]
            {WEAPON_SPECIAL_WHIRLWIND}
            {WEAPON_SPECIAL_MAGICAL}
            {WEAPON_SPECIAL_LEECH}
        [/specials]
    [/attack]
    [attack]
        name=knife
        description=_"knife"
        icon=attacks/dagger-thrown-poison-human.png
        type=blade
        range=ranged
        [specials]
            {WEAPON_SPECIAL_POISON}
        [/specials]
        damage=8
        number=3
    [/attack]
    [attack]
        name=wave of fear
        description=_"wave of fear"
        type=cold
        [specials]
            {WEAPON_SPECIAL_MAGICAL}
            {WEAPON_SPECIAL_HORRID}
        [/specials]
        range=ranged
        damage=8
        number=4
        icon=attacks/gaze.png
    [/attack]
    [defend]
        [filter_attack]
            range=ranged
        [/filter_attack]
        start_time=-155
        [frame]
            duration=30
            image=units/important/efraim-sword-defend-1.png
            halo=halo/elven/elven-shield-halo-20pct.png
        [/frame]
        [frame]
            duration=30
            image=units/important/efraim-sword-defend-1.png
            halo=halo/elven/elven-shield-halo-40pct.png
        [/frame]
        [frame]
            duration=30
            image=units/important/efraim-sword-defend-1.png
            halo=halo/elven/elven-shield-halo-60pct.png
        [/frame]
        [frame]
            duration=40
            image=units/important/efraim-sword-defend-2.png
            halo=halo/elven/elven-shield-halo-80pct.png
        [/frame]
        [if]
            hits=hit
            [frame]
                duration=100
                image=units/important/efraim-sword-defend-2.png
                sound={SOUND_LIST:HUMAN_HIT}
                halo=halo/elven/elven-shield-halo-100pct.png
            [/frame]
        [/if]
        [else]
            hits=miss,kill
            [frame]
                duration=100
                image=units/important/efraim-sword-defend-2.png
                halo=halo/elven/elven-shield-halo-100pct.png
            [/frame]
        [/else]
        [frame]
            duration=15
            image=units/important/efraim-sword-defend-2.png
            halo=halo/elven/elven-shield-halo-80pct.png
        [/frame]
        [frame]
            duration=15
            image=units/important/efraim-sword-defend-1.png
            halo=halo/elven/elven-shield-halo-60pct.png
        [/frame]
        [frame]
            duration=15
            image=units/important/efraim-sword-defend-1.png
            halo=halo/elven/elven-shield-halo-40pct.png
        [/frame]
        [frame]
            duration=15
            image=units/important/efraim-sword-defend-1.png
            halo=halo/elven/elven-shield-halo-20pct.png
        [/frame]
    [/defend]
    [standing_anim]
        [frame]
            image="units/important/efraim.png"
            duration=1
        [/frame]
    [/standing_anim]
    [attack_anim]
        [filter_attack]
            name=knife
        [/filter_attack]
        [missile_frame]
            begin=-150
            end=0
            image="projectiles/dagger-n.png"
            image_diagonal="projectiles/dagger-ne.png"
        [/missile_frame]
        [if]
            hits=yes
            [frame]
                begin=-350
                end=-100
                image="units/important/efraim-throwknife1.png"
                sound=throwing-knife.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-350
                end=-100
                image="units/important/efraim-throwknife1.png"
                sound=throwing-knife-miss.ogg
            [/frame]
        [/else]
        [frame]
            begin=-100
            end=50
            image="units/important/efraim-throwknife2.png"
        [/frame]
        [frame]
            begin=50
            end=50
            image="units/important/efraim.png"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=sword
        [/filter_attack]
        [frame]
            begin=-200
            end=-100
            image="units/important/efraim-sword-1.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-100
                end=150
                image="units/important/efraim-sword-2.png"
                sound={SOUND_LIST:SWORD_SWISH}
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-100
                end=150
                image="units/important/efraim-sword-2.png"
                sound={SOUND_LIST:MISS}
            [/frame]
        [/else]
        [frame]
            begin=150
            end=200
            image="units/important/efraim-sword-1.png"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=sword
        [/filter_attack]
        [frame]
            begin=-225
            end=-200
            image="units/important/efraim.png"
        [/frame]
        [frame]
            begin=-200
            end=-100
            image="units/important/efraim-sword-2-1.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-100
                end=150
                image="units/important/efraim-sword-2-2.png"
                sound=dagger-swish.wav
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-100
                end=150
                image="units/important/efraim-sword-2-2.png"
                sound={SOUND_LIST:MISS}
            [/frame]
        [/else]
        [frame]
            begin=150
            end=200
            image="units/important/efraim.png"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=whirlwind
        [/filter_attack]
        [frame]
            begin=-500
            end=-400
            image="units/important/efraim-whirlwind-1.png"
        [/frame]
        [frame]
            begin=-400
            end=-300
            image="units/important/efraim-whirlwind-2.png"
        [/frame]
        [frame]
            begin=-300
            end=-200
            image="units/important/efraim-whirlwind-3.png"
        [/frame]
        [frame]
            begin=-200
            end=-100
            image="units/important/efraim-whirlwind-4.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-100
                end=0
                image="units/important/efraim-whirlwind-1.png"
                sound={SOUND_LIST:SWORD_SWISH}
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-100
                end=0
                image="units/important/efraim-whirlwind-2.png"
                sound={SOUND_LIST:MISS}
            [/frame]
        [/else]
        [frame]
            begin=0
            end=100
            image="units/important/efraim-whirlwind-3.png"
        [/frame]
        [frame]
            begin=100
            end=200
            image="units/important/efraim-whirlwind-4.png"
        [/frame]
        [frame]
            begin=200
            end=300
            image="units/important/efraim-whirlwind-1.png"
        [/frame]
        [frame]
            begin=300
            end=400
            image="units/important/efraim.png"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=wave of fear
        [/filter_attack]
        [missile_frame]
            begin=-100
            end=100
            image="projectiles/gaze.png"
            image_diagonal="projectiles/gaze.png"
        [/missile_frame]
        [frame]
            begin=-300
            end=-200
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=-200
            end=-75
            image="units/important/efraim-magic2.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-75
                end=0
                image="units/important/efraim-magic2.png"
                sound=magic-dark.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-75
                end=0
                image="units/important/efraim-magic2.png"
                sound=magic-dark-miss.ogg
            [/frame]
        [/else]
        [frame]
            begin=0
            end=75
            image="units/important/efraim-magic2.png"
        [/frame]
        [frame]
            begin=75
            end=150
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=150
            end=200
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=200
            end=300
            image="units/important/efraim.png"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=shadow wave
        [/filter_attack]
        [missile_frame]
            begin=-100
            end=100
            image="projectiles/darkmissile-n.png"
            image_diagonal="projectiles/darkmissile-ne.png"
        [/missile_frame]
        [frame]
            begin=-300
            end=-200
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=-200
            end=-75
            image="units/important/efraim-magic2.png"
            halo=halo/undead/black-magic-1.png
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-75
                end=0
                image="units/important/efraim-magic2.png"
                sound=magic-dark.ogg
                halo=halo/undead/black-magic-2.png
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-75
                end=0
                image="units/important/efraim-magic2.png"
                sound=magic-dark-miss.ogg
                halo=halo/undead/black-magic-2.png
            [/frame]
        [/else]
        [frame]
            begin=0
            end=75
            image="units/important/efraim-magic2.png"
            halo=halo/undead/black-magic-3.png
        [/frame]
        [frame]
            begin=75
            end=150
            image="units/important/efraim-magic1.png"
            halo=halo/undead/black-magic-4.png
        [/frame]
        [frame]
            begin=150
            end=200
            image="units/important/efraim-magic1.png"
            halo=halo/undead/black-magic-5.png
        [/frame]
        [frame]
            begin=200
            end=300
            image="units/important/efraim.png"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=fireball
        [/filter_attack]
        {MISSILE_FRAME_FIREBALL_XY 0 0}
        [frame]
            begin=-300
            end=-200
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=-200
            end=-75
            image="units/important/efraim-magic2.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-75
                end=0
                image="units/important/efraim-magic2.png"
                sound=fire.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-75
                end=0
                image="units/important/efraim-magic2.png"
                sound=fire.ogg
            [/frame]
        [/else]
        [frame]
            begin=0
            end=75
            image="units/important/efraim-magic2.png"
        [/frame]
        [frame]
            begin=75
            end=150
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=150
            end=200
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=200
            end=300
            image="units/important/efraim.png"
        [/frame]
    [/attack_anim]
    {LIGHTNING 1}
    {LIGHTNING 2}
    {LIGHTNING 3}
    [attack_anim]
        [filter_attack]
            name=meteor
        [/filter_attack]
        missile_start_time=-400
        [if]
            direction=n,ne,nw
            [missile_frame]
                duration=100
                halo="halo/meteor-1.png"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-2.png"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-3.png"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-4.png"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-5.png"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-6.png"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-7.png"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-8.png"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-9.png"
                offset=1.0
            [/missile_frame]
        [/if]
        [else]
            direction=s,se,sw

            [missile_frame]
                duration=100
                halo="halo/meteor-1.png~FL(vert)"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-2.png~FL(vert)"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-3.png~FL(vert)"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-4.png~FL(vert)"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-5.png~FL(vert)"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-6.png~FL(vert)"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-7.png~FL(vert)"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-8.png~FL(vert)"
                offset=1.0
            [/missile_frame]
            [missile_frame]
                duration=100
                halo="halo/meteor-9.png~FL(vert)"
                offset=1.0
            [/missile_frame]
        [/else]
        [frame]
            begin=-500
            end=-400
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=-400
            end=-300
            image="units/important/efraim-magic2.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                begin=-300
                end=-200
                image="units/important/efraim-magic2.png"
                sound=fire.ogg
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                begin=-300
                end=-200
                image="units/important/efraim-magic2.png"
                sound=fire.ogg
            [/frame]
        [/else]
        [frame]
            begin=-200
            end=-100
            image="units/important/efraim-magic2.png"
        [/frame]
        [frame]
            begin=-100
            end=0
            image="units/important/efraim-magic1.png"
        [/frame]
        [frame]
            begin=0
            end=500
            image="units/important/efraim.png"
        [/frame]
    [/attack_anim]
    [animation]
        apply_to=draw_weapon
        start_time=-500
        [filter_attack]
            name=spiritual transformation
        [/filter_attack]
        blend_ratio="0~1:500"
        blend_color=255,255,255
        [frame]
            begin=-500
            end=0
            image="units/important/efraim.png"
        [/frame]
    [/animation]
    [attack_anim]
        [filter_attack]
            name=spiritual transformation
        [/filter_attack]
        start_time=-500
        blend_ratio="1:1000"
        blend_color=255,255,255
        [frame]
            begin=-500
            end=-200
            image="units/important/efraim.png"
        [/frame]
        [frame]
            begin=-200
            end=-50
            image="units/important/efraim-sword-2-1.png"
        [/frame]
        [frame]
            begin=-50
            end=100
            image="units/important/efraim-sword-2-2.png"
        [/frame]
        [frame]
            begin=100
            end=500
            image="units/important/efraim.png"
        [/frame]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=spiritual transformation
        [/filter_attack]
        start_time=-500
        blend_ratio="1:1000"
        blend_color=255,255,255
        [frame]
            begin=-500
            end=-200
            image="units/important/efraim.png"
        [/frame]
        [frame]
            begin=-200
            end=-50
            image="units/important/efraim-sword-1.png"
        [/frame]
        [frame]
            begin=-50
            end=100
            image="units/important/efraim-sword-2.png"
        [/frame]
        [frame]
            begin=100
            end=500
            image="units/important/efraim.png"
        [/frame]
    [/attack_anim]
    [defend]
        start_time=-500
        [filter_second_attack]
            name=spiritual transformation
        [/filter_second_attack]
        blend_ratio="1:375"
        blend_color=255,255,255
        [frame]
            duration=250
            image="units/important/efraim.png"
            halo=halo/elven/elven-shield-halo-20pct.png
        [/frame]
        [frame]
            duration=25
            image="units/important/efraim.png"
            halo=halo/elven/elven-shield-halo-40pct.png
        [/frame]
        [frame]
            duration=50
            image="units/important/efraim-defend-1.png"
            halo=halo/elven/elven-shield-halo-60pct.png
        [/frame]
        [frame]
            duration=50
            image="units/important/efraim-defend-1.png"
            halo=halo/elven/elven-shield-halo-80pct.png
        [/frame]
        [if]
            hits=hit
            [frame]
                duration=100
                image="units/important/efraim-defend-2.png"
                sound={SOUND_LIST:HUMAN_HIT}
                halo=halo/elven/elven-shield-halo-100pct.png
            [/frame]
        [/if]
        [else]
            hits=miss,kill
            [frame]
                duration=100
                image="units/important/efraim-defend-2.png"
                halo=halo/elven/elven-shield-halo-100pct.png
            [/frame]
        [/else]
        [frame]
            duration=50
            image="units/important/efraim-defend-1.png"
            halo=halo/elven/elven-shield-halo-80pct.png
        [/frame]
        [frame]
            duration=25
            image="units/important/efraim.png"
            halo=halo/elven/elven-shield-halo-60pct.png
        [/frame]
        [frame]
            duration=25
            image="units/important/efraim.png"
            halo=halo/elven/elven-shield-halo-40pct.png
        [/frame]
        [frame]
            duration=425
            image="units/important/efraim.png"
            halo=halo/elven/elven-shield-halo-20pct.png
        [/frame]
    [/defend]
    {SOUL_EATER_AMLA units/important/efraim.png units/important/efraim-magic1.png units/important/efraim-magic2.png units/important/efraim.png units/important/efraim-magic1.png units/important/efraim-magic2.png (
        [advancement]
            max_times=1
            always_display=yes
            id=sword1
            description= _ "better with sword"
            image=attacks/sword-unholy.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=attack
                name=sword
                increase_damage=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=sword1_speed
            description= _ "faster with sword (affects also whirlwind)"
            image=attacks/sword-unholy.png
            strict_amla=yes
            require_amla="sword3"
            [effect]
                apply_to=attack
                name=sword
                increase_attacks=1
            [/effect]
            [effect]
                apply_to=attack
                name=whirlwind
                increase_attacks=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=sword2
            description= _ "better with sword"
            image=attacks/sword-unholy.png
            strict_amla=yes
            require_amla="sword1"
            [effect]
                apply_to=attack
                name=sword
                increase_damage=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=sword2_marksman
            description= _ "more precise with sword"
            image=attacks/sword-unholy.png
            strict_amla=yes
            require_amla="sword1"
            [effect]
                apply_to=attack
                name=sword
                [set_specials]
                    mode=append
                    {WEAPON_SPECIAL_MARKSMAN}
                [/set_specials]
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=sword3
            description= _ "better with sword"
            image=attacks/sword-unholy.png
            strict_amla=yes
            require_amla="sword1,sword2"
            [effect]
                apply_to=attack
                name=sword
                increase_damage=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=sword4
            description= _ "better with sword"
            image=attacks/sword-unholy.png
            strict_amla=yes
            require_amla="sword1,sword2,sword3"
            [effect]
                apply_to=attack
                name=sword
                increase_damage=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=sword4_plague
            description= _ "raising undead with sword"
            image=attacks/sword-unholy.png
            strict_amla=yes
            require_amla="sword1,sword2,sword3,sword4"
            [effect]
                apply_to=attack
                name=sword
                [set_specials]
                    mode=append
                    {WEAPON_SPECIAL_PLAGUE}
                [/set_specials]
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=sword5
            description= _ "better with sword"
            image=attacks/sword-unholy.png
            strict_amla=yes
            require_amla="sword1,sword2,sword3,sword4"
            [effect]
                apply_to=attack
                name=sword
                increase_damage=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=sword5_speed
            description= _ "faster with sword (affects also whirlwind)"
            image=attacks/sword-unholy.png
            strict_amla=yes
            require_amla="sword1,sword2,sword3,sword4,sword5,sword1_speed"
            [effect]
                apply_to=attack
                name=sword
                increase_attacks=1
            [/effect]
            [effect]
                apply_to=attack
                name=whirlwind
                increase_attacks=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=5
            always_display=yes
            id=sword6
            description= _ "better with sword"
            image=attacks/sword-unholy.png
            strict_amla=yes
            require_amla="sword1,sword2,sword3,sword4,sword5"
            [effect]
                apply_to=attack
                name=sword
                increase_damage=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=berserk1
            description= _ "able to attack twice in a row"
            image=attacks/frenzy.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=bonus_attack
                name=mberserk2
                description= _ "fury (2)"
                clone_anim=yes
                icon=attacks/frenzy.png
                type=blade
                range=melee
                defense_weight=0
                damage=-20
                force_original_attack=sword
                [specials]
                    {WEAPON_SPECIAL_LESSER_BERSERK 2}
                    {WEAPON_SPECIAL_SWARM}
                    {WEAPON_SPECIAL_MARKSMAN}
                [/specials]
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=berserk2
            description= _ "able to attack thrice in a row"
            image=attacks/frenzy.png
            strict_amla=yes
            require_amla="berserk1"
            [effect]
                apply_to=bonus_attack
                name=mberserk3
                description= _ "fury (3)"
                clone_anim=yes
                icon=attacks/frenzy.png
                type=blade
                range=melee
                defense_weight=0
                damage=-20
                force_original_attack=sword
                [specials]
                    {WEAPON_SPECIAL_LESSER_BERSERK 3}
                    {WEAPON_SPECIAL_SWARM}
                    {WEAPON_SPECIAL_MARKSMAN}
                [/specials]
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=berserk3
            description= _ "able to attack five times in a row"
            image=attacks/frenzy.png
            strict_amla=yes
            require_amla="berserk2"
            [effect]
                apply_to=bonus_attack
                name=mberserk5
                description= _ "fury (5)"
                clone_anim=yes
                icon=attacks/frenzy.png
                type=blade
                range=melee
                defense_weight=0
                damage=-20
                force_original_attack=sword
                [specials]
                    {WEAPON_SPECIAL_LESSER_BERSERK 5}
                    {WEAPON_SPECIAL_SWARM}
                    {WEAPON_SPECIAL_MARKSMAN}
                [/specials]
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=3
            always_display=yes
            id=berserk1_damage
            description= _ "doing more damage with the furious attack"
            image=attacks/frenzy.png
            strict_amla=yes
            require_amla="berserk1"
            [effect]
                apply_to=improve_bonus_attack
                name=mberserk2
                increase_damage=10
            [/effect]
            [effect]
                apply_to=improve_bonus_attack
                name=mberserk3
                increase_damage=10
            [/effect]
            [effect]
                apply_to=improve_bonus_attack
                name=mberserk5
                increase_damage=10
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=whirlwind
            description= _ "whirling better"
            image=attacks/sword-elven.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=attack
                name=whirlwind
                increase_damage=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=whirlwind2
            description= _ "whirling better"
            image=attacks/sword-elven.png
            strict_amla=yes
            require_amla="whirlwind,whirlwind,whirlwind,sword4"
            [effect]
                apply_to=attack
                name=whirlwind
                increase_damage=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=3
            always_display=yes
            id=whirlwind3
            description= _ "whirling better"
            image=attacks/sword-elven.png
            strict_amla=yes
            require_amla="whirlwind2,whirlwind2,whirlwind2,sword6"
            [effect]
                apply_to=attack
                name=whirlwind
                increase_damage=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=knives1
            description= _ "better with knives"
            image=attacks/dagger-thrown-poison-human.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=attack
                name=knife
                increase_damage=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=knives1_backstab
            description= _ "backstabbing with knives"
            image=attacks/dagger-thrown-poison-human.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=attack
                name=knife
                [set_specials]
                    mode=append
                    {WEAPON_SPECIAL_BACKSTAB}
                [/set_specials]
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=knives2
            description= _ "better with knives"
            image=attacks/dagger-thrown-poison-human.png
            strict_amla=yes
            require_amla="knives1"
            [effect]
                apply_to=attack
                name=knife
                increase_damage=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=knives2_precision
            description= _ "more precise with knives"
            image=attacks/dagger-thrown-poison-human.png
            strict_amla=yes
            require_amla="knives1,knives2"
            [effect]
                apply_to=attack
                name=knife
                [set_specials]
                    mode=append
                    {WEAPON_SPECIAL_MARKSMAN}
                [/set_specials]
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=knives3
            description= _ "better with knives"
            image=attacks/dagger-thrown-poison-human.png
            strict_amla=yes
            require_amla="knives1,knives2"
            [effect]
                apply_to=attack
                name=knife
                increase_damage=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=knives3_speed
            description= _ "faster with knives"
            image=attacks/dagger-thrown-poison-human.png
            strict_amla=yes
            require_amla="knives1,knives2,knives3"
            [effect]
                apply_to=attack
                name=knife
                increase_damage=-1
                increase_attacks=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=knives4
            description= _ "better with knives"
            image=attacks/dagger-thrown-poison-human.png
            strict_amla=yes
            require_amla="knives1,knives2,knives3"
            [effect]
                apply_to=attack
                name=knife
                increase_damage=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=knives4-backstab
            description= _ "backstabbing with knives better"
            image=attacks/dagger-thrown-poison-human.png
            strict_amla=yes
            require_amla="knives4,knives1_backstab"
            [effect]
                apply_to=attack
                name=knife
                remove_specials=backstab
                [set_specials]
                    mode=append
                    {WEAPON_SPECIAL_GREATER_BACKSTAB}
                [/set_specials]
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=5
            always_display=yes
            id=knives5
            description= _ "better with knives"
            image=attacks/dagger-thrown-poison-human.png
            strict_amla=yes
            require_amla="knives1,knives2,knives3,knives4"
            [effect]
                apply_to=attack
                name=knife
                increase_damage=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=3
            always_display=yes
            id=knives5_speed
            description= _ "faster with knives"
            image=attacks/dagger-thrown-poison-human.png
            strict_amla=yes
            require_amla="knives1,knives2,knives3,knives4,knives3_speed"
            [effect]
                apply_to=attack
                name=knife
                increase_attacks=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=fear1_spine_chill
            description= _ "causing a spine-chilling fear"
            image=attacks/gaze.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=attack
                name=wave of fear
                [set_specials]
                    mode=append
                    {WEAPON_SPECIAL_SLOW}
                [/set_specials]
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=fear1
            description= _ "causing stronger fear"
            image=attacks/gaze.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=attack
                name=wave of fear
                increase_damage=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=fear2
            description= _ "causing stronger fear"
            image=attacks/gaze.png
            strict_amla=yes
            require_amla="fear1"
            [effect]
                apply_to=attack
                name=wave of fear
                increase_damage=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=fear2_speed
            description= _ "causing fear faster"
            image=attacks/gaze.png
            strict_amla=yes
            require_amla="fear2"
            [effect]
                apply_to=attack
                name=wave of fear
                increase_attacks=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=fear3
            description= _ "causing stronger fear"
            image=attacks/gaze.png
            strict_amla=yes
            require_amla="fear2"
            [effect]
                apply_to=attack
                name=wave of fear
                increase_damage=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=fear3_leech
            description= _ "having fun when scaring enemies"
            image=attacks/gaze.png
            strict_amla=yes
            require_amla="fear3"
            [effect]
                apply_to=attack
                name=wave of fear
                [set_specials]
                    mode=append
                    {WEAPON_SPECIAL_LEECH}
                [/set_specials]
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=fear4
            description= _ "causing stronger fear"
            image=attacks/gaze.png
            strict_amla=yes
            require_amla="fear3"
            [effect]
                apply_to=attack
                name=wave of fear
                increase_damage=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=fear4_speed
            description= _ "causing fear faster"
            image=attacks/gaze.png
            strict_amla=yes
            require_amla="fear4,fear2_speed"
            [effect]
                apply_to=attack
                name=wave of fear
                increase_attacks=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=fear5
            description= _ "causing stronger fear"
            image=attacks/gaze.png
            strict_amla=yes
            require_amla="fear4"
            [effect]
                apply_to=attack
                name=wave of fear
                increase_damage=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=fear5_mass_scare
            description= _ "causing fear to groups of enemies"
            image=attacks/gaze.png
            strict_amla=yes
            require_amla="fear5"
            [effect]
                apply_to=attack
                name=wave of fear
                [set_specials]
                    mode=append
                    {WEAPON_SPECIAL_EXPLOSIVE_SLOW}
                [/set_specials]
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=fear6
            description= _ "causing stronger fear"
            image=attacks/gaze.png
            strict_amla=yes
            require_amla="fear5"
            [effect]
                apply_to=attack
                name=wave of fear
                increase_damage=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=fear6-speed
            description= _ "causing fear faster"
            image=attacks/gaze.png
            strict_amla=yes
            require_amla="fear6,fear4_speed"
            [effect]
                apply_to=attack
                name=wave of fear
                increase_attacks=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=fear7
            description= _ "causing stronger fear"
            image=attacks/gaze.png
            strict_amla=yes
            require_amla="fear6,fear4_speed"
            [effect]
                apply_to=attack
                name=wave of fear
                increase_damage=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=5
            always_display=yes
            id=fear8
            description= _ "causing stronger fear"
            image=attacks/gaze.png
            strict_amla=yes
            require_amla="fear7"
            [effect]
                apply_to=attack
                name=wave of fear
                increase_damage=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            always_display=yes
            id=fear8_explosive
            description= _ "causing insane fear to groups of enemies"
            image=attacks/gaze.png
            strict_amla=yes
            require_amla="fear8"
            [effect]
                apply_to=attack
                name=wave of fear
                [set_specials]
                    mode=append
                    {WEAPON_SPECIAL_EXPLOSIVE}
                [/set_specials]
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            id=movement
            description= _ "faster"
            image=icons/boots_elven.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=movement
                increase=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=1
            id=movement2
            description= _ "faster"
            image=icons/boots_elven.png
            strict_amla=yes
            require_amla="movement"
            [effect]
                apply_to=movement
                increase=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            id=movement3
            max_times=1
            description= _ "able to muster enough mental powers to levitate through hard terrains"
            image=icons/boots_elven.png
            strict_amla=yes
            require_amla="movement,movement2"
            [effect]
                apply_to=movement_costs
                replace=true
                [movement_costs]
                    frozen=1
                    shallow_water=1
                    deep_water=1
                    reef=1
                    flat=1
                    castle=1
                    village=1
                    forest=1
                    cave=1
                    hills=1
                    mountains=2
                    forest=1
                    fungus=2
                    swamp_water=1
                    sand=1
                    unwalkable=1
                    impassable={UNREACHABLE}
                [/movement_costs]
            [/effect]
            [effect]
                apply_to=new_animation
                name=wings
                gender=male
                [standing_anim]
                    start_time=0
                    terrain_type={DRAKE_UNWALKABLE_TERRAINS}
                    submerge=0.01
                    [frame]
                        duration=400
                        image="units/important/efraim-float-1.png"
                    [/frame]
                    [frame]
                        duration=400
                        image="units/important/efraim-float-2.png"
                    [/frame]
                    [frame]
                        duration=400
                        image="units/important/efraim-float-3.png"
                    [/frame]
                    [frame]
                        duration=400
                        image="units/important/efraim-float-2.png"
                    [/frame]
                [/standing_anim]
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            max_times=2
            id=movement4
            description= _ "faster"
            image=icons/boots_elven.png
            strict_amla=yes
            require_amla="movement3"
            [effect]
                apply_to=movement
                increase=1
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            id=dodge
            max_times=5
            description= _ "harder to be hit"
            image=icons/crossed_sword_and_hammer.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=defense
                replace=false
                [defense]
                    frozen=-2
                    shallow_water=-2
                    deep_water=-2
                    reef=-2
                    flat=-2
                    castle=-1
                    village=-1
                    forest=-1
                    cave=-2
                    hills=-1
                    mountains=-1
                    fungus=-2
                    swamp_water=-2
                    sand=-2
                [/defense]
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            id=armour
            max_times=5
            description= _ "better protected from physical blows (2% better resistances)"
            image=icons/armor_leather.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=resistance
                replace=false
                [resistance]
                    blade=-2
                    pierce=-2
                    impact=-2
                [/resistance]
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
        [advancement]
            id=armour
            max_times=5
            description= _ "better protected from magical attacks (3% better resistances)"
            image=icons/magical_shield.png
            strict_amla=yes
            require_amla=""
            [effect]
                apply_to=resistance
                replace=false
                [resistance]
                    fire=-3
                    arcane=-3
                    cold=-2
                [/resistance]
            [/effect]
            {GREATER_AMLA_DEFAULT_BONUSES}
        [/advancement]
    ) "Efraim_lich"}
[/unit_type]
#undef LIGHTNING
