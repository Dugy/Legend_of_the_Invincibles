#textdomain wesnoth-loti
#define WEAPON_SPECIAL_PLAGUE_TYPE_LOTI TYPE LANGUAGE_TYPE
    [plague]
        id=plague({TYPE})
        name= _ "plague ("+{LANGUAGE_TYPE}+_")"
        description= _ "When a unit is killed by a Plague attack, that unit is replaced with a unit on the same side as the unit with the Plague attack. This doesn’t work on Undead or units in villages."
        special_note =_"Foes who lose their life to the plague will rise again, unless they are standing on a village."
        type={TYPE}
    [/plague]
#enddef
#define ABILITY_ADAMANT
    [resistance]
        id=adamant
        multiply=3
        max_value=80
        [filter_base_value]
            greater_than=0
            less_than=80
        [/filter_base_value]
        name= _ "adamant"
        female_name= _ "female^adamant"
        description= _ "This unit’s resistances are tripled, up to a maximum of 80%, when defending. Vulnerabilities are not affected."
        affect_self=yes
        active_on=defense
    [/resistance]
#enddef
#define ABILITY_UNYIELDING
    [resistance]
        id=unyielding
        multiply=2
        max_value=70
        [filter_base_value]
            greater_than=0
            less_than=70
        [/filter_base_value]
        name= _ "unyielding"
        female_name= _ "female^unyielding"
        description= _ "This unit’s resistances are doubled, up to a maximum of 70%, when defending. Vulnerabilities are not affected."
        special_note=_"The steadiness of this unit reduces damage from some attacks, but only while defending."
        affect_self=yes
        active_on=defense
    [/resistance]
#enddef
#define ABILITY_EXILE
    [resistance]
        id=exile
        add=10
        max_value=70
        [filter_base_value]
            less_than=70
        [/filter_base_value]
        name= _ "exile"
        female_name= _ "female^exile"
        description= _ "This unit’s resistances are increased by 10% (up to a maximum of 70%) if it has no adjacent allies."
        affect_self=yes
        [filter_self]
            [not]
                [filter_adjacent]
                    is_enemy=no
                [/filter_adjacent]
            [/not]
        [/filter_self]
    [/resistance]
#enddef
#define ABILITY_FORSAKEN
    [resistance]
        id=forsaken
        add=20
        max_value=70
        [filter_base_value]
            less_than=70
        [/filter_base_value]
        name= _ "forsaken"
        female_name= _ "female^forsaken"
        description= _ "This unit’s resistances are increased by 20% (up to a maximum of 70%) if it has no adjacent allies."
        affect_self=yes
        [filter_self]
            [not]
                [filter_adjacent]
                    is_enemy=no
                [/filter_adjacent]
            [/not]
        [/filter_self]
    [/resistance]
#enddef
#define ABILITY_ZEAL
    [resistance]
        id=zeal
        multiply=2
        max_value=70
        [filter_base_value]
            greater_than=0
            less_than=70
        [/filter_base_value]
        name= _ "zeal"
        female_name= _ "female^zeal"
        description= _ "This unit's resistances are doubled, up to a maximum of 70%, when attacking. Vulnerabilities are not affected."
        affect_self=yes
        active_on=offense
    [/resistance]
#enddef
#define ABILITY_CAREFUL INTENSITY
    [resistance]
        id=careful
        add={INTENSITY}
        max_value=80
        name= _ "careful"
        female_name= _ "female^careful"
        description= _ "This unit’s resistances are increased by "+{INTENSITY}+_", up to a maximum of 80%, when defending. Vulnerabilities are not affected."
        affect_self=yes
        active_on=defense
        [filter_base_value]
            less_than=80
        [/filter_base_value]
    [/resistance]
#enddef
#define ABILITY_INCREASE_RESISTANCE_AURA NAME POWER
    [resistance]
        id=increase_resistance_{POWER}
        add={POWER}
        max_value=80
        name={NAME}+_" ("+{POWER}+_")"
        female_name={NAME}+_" ("+{POWER}+_")"
        description= _ "This unit can rally the adjacent allies to ignore damage taken better, increasing their resistances by "+{POWER}+_"%, up to a maximum of 80%."
        affect_self=no
        affect_allies=yes
        [filter_base_value]
            less_than=80
        [/filter_base_value]
        [affect_adjacent]
            adjacent=n,ne,se,s,sw,nw
        [/affect_adjacent]
    [/resistance]
#enddef
#define ABILITY_SHIELD INTENSITY
    [resistance]
        id=shield
        add={INTENSITY}
        max_value=60
        name= _ "shield ("+{INTENSITY}+_")"
        female_name= _ "female^shield ("+{INTENSITY}+_")"
        description= _ "This unit's presence is so glorious that all adjacent allies are honoured and inspired by them, increasing their resistances by "+{INTENSITY}+_"%, up to a maximum of 60%."
        affect_self=no
        affect_allies=yes
        affect_enemies=no
        [affect_adjacent]
            adjacent=n,ne,se,s,sw,nw
        [/affect_adjacent]
        [filter_base_value]
            less_than=60
        [/filter_base_value]
    [/resistance]
#enddef
#define ABILITY_ANTIMAGIC INTENSITY
    [resistance]
        id=antimagic
        add={INTENSITY}
        max_value=80
        name= _ "antimagic ("+{INTENSITY}+_")"
        female_name= _ "female^antimagic ("+{INTENSITY}+_")"
        description= _ "This unit's presence weakens surrounding magic, increasing resistances of oneself and any nearby units by "+{INTENSITY}+_"%, up to a maximum of 80%."
        affect_self=yes
        affect_allies=yes
        affect_enemies=yes
        apply_to=fire,cold,arcane
        [affect_adjacent]
            adjacent=n,ne,se,s,sw,nw
        [/affect_adjacent]
        [filter_base_value]
            less_than=80
        [/filter_base_value]
    [/resistance]
#enddef
#define WEAPON_SPECIAL_CHARGING POWER
    [damage]
        id=charge
        name= _ "charge"
        description= _ "When used offensively, this attack deals multiplied damage to the target. It also causes this unit to take multiplied damage from the target's counterattack."
        multiply={POWER}
        apply_to=both
        active_on=offense
    [/damage]
#enddef
#define WEAPON_SPECIAL_LURK
    [damage]
        id=lurk
        name= _ "lurk"
        description= _ "When used offensively and the target is not adjacent to any of its allies, it deals double damage to the target."
        multiply=2
        active_on=offense
        [filter_opponent]
            [not]
                [filter_adjacent]
                    is_enemy=no
                [/filter_adjacent]
            [/not]
        [/filter_opponent]
    [/damage]
#enddef
#define ABILITY_ANATHEMA
    [leadership]
        id=anathema
        value=-30
        cumulative=no
        name= _ "anathema"
        female_name= _ "female^anathema"
        description= _ "This unit's behaviour is loathsome, it spreads foul smell and droplets containing neisseria gonorrhoeae. Others absolutely loathe fighting next to it. Adjacent allies deal 30% less damage."
        affect_self=no
        affect_allies=yes
        affect_enemies=no
        [affect_adjacent]
            adjacent=n,ne,se,s,sw,nw
        [/affect_adjacent]
    [/leadership]
#enddef
#define ABILITY_ANTISOCIAL
    [leadership]
        id=antisocial
        value=-20
        cumulative=no
        name= _ "antisocial"
        female_name= _ "female^antisocial"
        description= _ "This unit's manners are incredibly bad, others hate fighting next to it. Adjacent allies deal 20% less damage."
        special_note=_ "This unit's lack of social skills decreases the damage of all adjacent allies by 20%."
        affect_self=no
        affect_allies=yes
        affect_enemies=no
        [affect_adjacent]
            adjacent=n,ne,se,s,sw,nw
        [/affect_adjacent]
    [/leadership]
#enddef
#define ABILITY_LESSER_ANTISOCIAL
    [leadership]
        id=lesser antisocial
        value=-10
        cumulative=no
        name= _ "lesser antisocial"
        female_name= _ "female^lesser antisocial"
        description= _ "This unit's manners are very bad, others hate fighting next to it. Adjacent allies deal 10% less damage."
        affect_self=no
        affect_allies=yes
        affect_enemies=no
        [affect_adjacent]
            adjacent=n,ne,se,s,sw,nw
        [/affect_adjacent]
    [/leadership]
#enddef
#define ABILITY_DESPAIR INTENSITY
    [leadership]
        id=despair
        value=-{INTENSITY}
        cumulative=no
        name= _ "despair ("+{INTENSITY}+_")"
        female_name= _ "female^despair ("+{INTENSITY}+_")"
        description= _ "This unit's presence is so darkly ominous that all adjacent enemies struggle with despair, dealing "+{INTENSITY}+_"% less damage."
        affect_self=no
        affect_allies=no
        affect_enemies=yes
        [affect_adjacent]
            adjacent=n,ne,se,s,sw,nw
        [/affect_adjacent]
    [/leadership]
#enddef
#define ABILITY_CONVICTION INTENSITY
    [resistance]
        id=conviction
        sub={INTENSITY}
        max_value=80
        cumulative=yes
        name= _ "conviction ("+{INTENSITY}+_")"
        female_name= _ "female^conviction ("+{INTENSITY}+_")"
        description= _ "This unit's presence is so darkly ominous that all adjacent enemies struggle with the guilt of their evil deeds, reducing their fire, cold and arcane resistances by "+{INTENSITY}+_"%."
        affect_self=no
        affect_allies=no
        affect_enemies=yes
        apply_to=fire,cold,arcane
        [affect_adjacent]
            adjacent=n,ne,se,s,sw,nw
        [/affect_adjacent]
    [/resistance]
#enddef
#define ABILITY_FRAIL_TIDE INTENSITY
    [resistance]
        id=frail tide
        sub={INTENSITY}
        max_value=80
        cumulative=yes
        name= _ "frail tide ("+{INTENSITY}+_")"
        female_name= _ "female^frail tide ("+{INTENSITY}+_")"
        description= _ "This unit's presence is so darkly ominous that all adjacent enemies struggle with a decrepifying feeling of age and weariness, reducing their resistances to pierce, blade and impact by "+{INTENSITY}+_"%."
        affect_self=no
        affect_allies=no
        affect_enemies=yes
        apply_to=blade,impact,pierce
        [affect_adjacent]
            adjacent=n,ne,se,s,sw,nw
        [/affect_adjacent]
    [/resistance]
#enddef
#define WEAPON_SPECIAL_LESSER_BERSERK COUNT
    [berserk]
        id=lesser berserk {COUNT}
        name= _ "lesser berserk ("+{COUNT}+_")"
        description= _ "Whether used offensively or defensively, this attack presses the engagement until one of the combatants is slain, or "+{COUNT}+_" rounds of attacks have occurred."
        value={COUNT}
    [/berserk]
#enddef
#define ABILITY_DARKENS
    [illuminates]
        id=darkens
        value=-25
        min_value=-25
        max_value=25
        cumulative=no
        affect_self=yes
        name= _ "darkens"
        female_name= _ "female^darkens"
        description= _ "This unit darkens the surrounding area, making chaotic units fight better, and lawful units fight worse.

Any units adjacent to this unit will fight as if it were dusk when it is day, and as if it were night when it is dusk."
    [/illuminates]
#enddef
#define ABILITY_DARKENS_IMPROVED
    [illuminates]
        id=darkens badly
        description= _ "This unit darkens the surrounding area, making chaotic units fight better, and lawful units fight worse.

Any units adjacent to this unit will fight as if it were dusk when it is day, as if it were night when it is dusk and the improvement of the chaotic units during the night is incredible."
        female_name=_"female^darkens badly"
        name= _ "darkens badly"
        id=darkens
        value=-25
        min_value=-50
        max_value=25
        cumulative=no
        affect_self=yes
    [/illuminates]
#enddef
#define ABILITY_DARKENS_GREAT
    [illuminates]
        id=darkens severely
        description= _ "This unit darkens the surrounding area, making chaotic units fight better, and lawful units fight worse.

Any units adjacent to this unit will fight almost as if it were night when it is day, as if it were darker than the darkest night when it is dusk and the improvement of the chaotic units during the night is incredible."
        female_name=_"female^darkens severely"
        id=darkens
        name= _ "darkens severely"
        value=-40
        min_value=-50
        max_value=25
        cumulative=no
        affect_self=yes
    [/illuminates]
#enddef
#define ABILITY_ILLUMINATES_IMPROVED
    [illuminates]
        id=improved illumination
        value=25
        max_value=50
        cumulative=no
        name= _ "improved illumination"
        female_name= _ "female^improved illumination"
        description= _ "This unit illuminates the surrounding area, making lawful units fight better, and chaotic units fight worse.

Any units adjacent to this unit will fight as if it were dusk when it is night, as if it were day when it is dusk, and even better during the day (worse if they are chaotic or liminal)."
        affect_self=yes
    [/illuminates]
#enddef
#define ABILITY_ILLUMINATES_GREAT
    [illuminates]
        id=great illumination
        value=40
        max_value=50
        cumulative=no
        name= _ "great illumination"
        female_name= _ "female^great illumination"
        description= _ "This unit illuminates the surrounding area, making lawful units fight better, and chaotic units fight worse.

Any units adjacent to this unit will fight as if it were almost day when it is night, better than if it were day when it is dusk, and far better during the day (worse if they are chaotic or liminal)."
        affect_self=yes
    [/illuminates]
#enddef
#define WEAPON_SPECIAL_CHARGING_BACKSTAB
    [damage]
        id=charging backstab
        name= _ "charging backstab"
        description= _ "When used offensively, this attack deals double damage if there is an enemy of the target on the opposite side of the target, and that unit is not incapacitated (turned to stone or otherwise paralysed). It also causes this unit to take double damage from the target’s counterattack."
        multiply=2
        apply_to=both
        active_on=offense
        [filter_self]
            [filter_weapon]
                [not]
                    special_id_active=backstab_leadership
                [/not]
            [/filter_weapon]
        [/filter_self]
        [filter_opponent]
            formula="
                enemy_of(self, flanker) and not flanker.petrified
            where
                flanker = unit_at(direction_from(loc, other.facing))
            "
        [/filter_opponent]
        [filter_self]
            [not]
                [filter_adjacent]	# In this case, backstab from murderous presence will be a better alternative
                    ability=murderous presence
                    is_enemy=no
                [/filter_adjacent]
            [/not]
        [/filter_self]
    [/damage]
#enddef
#define ABILITY_TWILIGHTSTALK
    [hides]
        id=twilightstalk
        name= _ "twilightstalk"
        female_name= _ "twilightstalk"
        name_inactive= _ "twilightstalk"
        female_name_inactive= _ "female^twilightstalk"
        description= _ "The unit becomes invisible during dawn or dusk, hiding in long shadows created by the sun near the horizon.

Enemy units cannot see this unit during dawn or dusk, except if they have units next to it. Any enemy unit that first discovers this unit immediately loses all its remaining movement."
        description_inactive= _ "The unit becomes invisible during dawn or dusk, hiding in long shadows created by the sun near the horizon.

Enemy units cannot see this unit during dawn or dusk, except if they have units next to it. Any enemy unit that first discovers this unit immediately loses all its remaining movement."
        affect_self=yes
        [filter_self]
            [filter_location]
                time_of_day=neutral
            [/filter_location]
        [/filter_self]
    [/hides]
#enddef
#define WEAPON_SPECIAL_CHAOTIC
    [damage]
        id=chaotic
        name= _ "chaotic"
        description= _ "This attack is 25% better at night and 25% worse at day."
    [/damage]
    [damage]
        id=chaotic
        multiply=1.25
        [filter_self]
            [filter_location]
                time_of_day=chaotic
            [/filter_location]
        [/filter_self]
    [/damage]
    [damage]
        id=chaotic
        multiply=0.75
        [filter_self]
            [filter_location]
                time_of_day=lawful
            [/filter_location]
        [/filter_self]
    [/damage]
#enddef
#define WEAPON_SPECIAL_LAWFUL
    [damage]
        id=lawful
        name= _ "lawful"
        description= _ "This attack is 25% better at day and 25% worse at night."
    [/damage]
    [damage]
        id=lawful
        multiply=1.25
        [filter_self]
            [filter_location]
                time_of_day=lawful
            [/filter_location]
        [/filter_self]
    [/damage]
    [damage]
        id=lawful
        multiply=0.75
        [filter_self]
            [filter_location]
                time_of_day=chaotic
            [/filter_location]
        [/filter_self]
    [/damage]
#enddef
#define WEAPON_SPECIAL_CHAOTIC_AND_LAWFUL
    [damage]
        id=chaotic
        name= _ "chaotic"
        description= _ "This attack is 25% better at night."
        multiply=1.25
        [filter_self]
            [filter_location]
                time_of_day=chaotic
            [/filter_location]
        [/filter_self]
    [/damage]
    [damage]
        id=lawful
        name= _ "lawful"
        description= _ "This attack is 25% better at day."
        multiply=1.25
        [filter_self]
            [filter_location]
                time_of_day=lawful
            [/filter_location]
        [/filter_self]
    [/damage]
#enddef
#define WEAPON_SPECIAL_GREATER_BACKSTAB
    [damage]
        id=greater backstab
        name= _ "greater backstab"
        description= _ "When used offensively, this attack deals 2.5 times more damage if there is an enemy of the target on the opposite side of the target, and that unit is not incapacitated (turned to stone or otherwise paralysed)."
        multiply=2.5
        [filter_opponent]
            formula="
                enemy_of(self, flanker) and not flanker.petrified
            where
                flanker = unit_at(direction_from(loc, other.facing))
            "
        [/filter_opponent]
        active_on=offense
    [/damage]
#enddef
#define WEAPON_SPECIAL_UBER_BACKSTAB
    [damage]
        id=uber backstab
        name= _ "uber backstab"
        description= _ "When used offensively, this attack deals triple damage if there is an enemy of the target on the opposite side of the target, and that unit is not incapacitated (turned to stone or otherwise paralysed)."
        multiply=3
        [filter_opponent]
            formula="
                enemy_of(self, flanker) and not flanker.petrified
            where
                flanker = unit_at(direction_from(loc, other.facing))
            "
        [/filter_opponent]
        active_on=offense
    [/damage]
#enddef
#define ABILITY_EXTRA_DAMAGE_AURA NAME INTENSITY
    [leadership]
        id=extra damage aura {INTENSITY}
#ifver WESNOTH_VERSION <= 1.17.4
        add={INTENSITY}
#else
        value={INTENSITY}
#endif
        cumulative=yes
        name={NAME}+_" ("+{INTENSITY}+_")"
        female_name={NAME}+_" ("+{INTENSITY}+_")"
        description= _ "Adjacent allies will do "+{INTENSITY}+_"% more damage."
        affect_self=no
        [affect_adjacent]
            adjacent=n,ne,se,s,sw,nw
        [/affect_adjacent]
    [/leadership]
#enddef

#define ABILITY_LEADERSHIP_LEVEL LEVEL
    [leadership]
        id=leadership {LEVEL}
        value="(25 * ({LEVEL} - other.level))"
        cumulative=no
        name= _ "leadership (as level " + {LEVEL} + _" unit)"
        female_name= _ "female^leadership"
        description= _ "This unit can lead your own units that are next to it, making them fight better.

Adjacent own units of lower level will do more damage in battle. When a unit adjacent to, of a lower level than, and on the same side as a unit with Leadership engages in combat, its attacks do 25% more damage times the difference in their levels."
        special_note = _"The leadership of this unit enables adjacent units of the same side to deal more damage in combat, though this only applies to units of lower level."
        affect_self=no
        [affect_adjacent]
            [filter]
                formula="level < " + {LEVEL}
            [/filter]
        [/affect_adjacent]
    [/leadership]
#enddef

#define ABILITY_REGENERATES_LESSER
    [regenerate]
        value=4
        id=regenerates slightly
        name= _ "regenerates slightly"
        female_name= _ "female^regenerates slightly"
        description= _ "The unit will heal itself 4 HP per turn. If it is poisoned, these two effects will negate themselves."
        special_note = _"This unit regenerates, which allows it to heal without standing close to a healer."
        affect_self=yes
        poison=slowed
    [/regenerate]
#enddef

#define ABILITY_ALLIANCE
    [leadership]
        id=alliance
        value=35
        cumulative=no
        name= _ "alliance"
        female_name= _ "female^alliance"
        description= _ "This unit is very well versed in team tactics so that adjacent units with the same ability deal 35% more damage."
        affect_self=no
        [affect_adjacent]
            [filter]
                ability=alliance
            [/filter]
        [/affect_adjacent]
    [/leadership]
#enddef
#define WEAPON_SPECIAL_FOCUSED
    [chance_to_hit]
        id=focused
        name= _ "focused"
        description= _ "This attack always has at least a 80% chance to hit."
        value=80
        cumulative=yes
    [/chance_to_hit]
#enddef
#define WEAPON_SPECIAL_GUIDED
    [chance_to_hit]
        id=guided
        name= _ "guided"
        description= _ "This attack always has an 90% chance to hit, regardless of the defensive ability of the defending unit."
        value=90
        cumulative=no
    [/chance_to_hit]
#enddef
#define WEAPON_SPECIAL_STRUGGLE
    [chance_to_hit]
        id=struggle
        name= _ "struggle"
        name_inactive= _ "struggle"
        description= _ "This attack causes the opponent to have a 10% lower chance to hit."
        description_inactive= _ "This attack causes the opponent to have a 10% lower chance to hit."
        sub=10
        apply_to=opponent
        cumulative=yes
    [/chance_to_hit]
#enddef
#define WEAPON_SPECIAL_IMPRECISE
    [chance_to_hit]
        id=imprecise
        name= _ "imprecise"
        name_inactive= _ "imprecise"
        description= _ "This attack has a 10% lower chance to hit."
        description_inactive= _ "This attack has a 10% lower chance to hit."
        sub=10
        apply_to=self
        cumulative=yes
    [/chance_to_hit]
#enddef
#define ABILITY_SNOW_AMBUSH
    [hides]
        id=snow_ambush
        name= _ "snow ambush"
        female_name= _ "female^snow ambush"
        name_inactive= _ "snow ambush"
        female_name_inactive= _ "female^snow ambush"
        description= _ "This unit can hide on frozen terrains, and remain undetected by its enemies.

Enemy units cannot see this unit while it is on frozen terrains, except if they have units next to it. Any enemy unit that first discovers this unit immediately loses all its remaining movement."
        description_inactive= _ "This unit can hide on frozen terrains, and remain undetected by its enemies.

Enemy units cannot see this unit while it is on frozen terrains, except if they have units next to it. Any enemy unit that first discovers this unit immediately loses all its remaining movement."
        affect_self=yes
        [filter_self]
            [filter_location]
                terrain=A*,Ai^*,Ha,Ha^*,Ms
            [/filter_location]
        [/filter_self]
    [/hides]
#enddef
#define ABILITY_WEAK_AMBUSH
    [hides]
        id=weak_ambush
        name= _ "lesser ambush"
        female_name= _ "female^lesser ambush"
        name_inactive= _ "lesser ambush"
        female_name_inactive= _ "female^lesser ambush"
        description= _ "This unit can hide in forest, and remain undetected by its enemies. But only in deciduous forest.

Enemy units cannot see this unit while it is in forest, except if they have units next to it. Any enemy unit that first discovers this unit immediately loses all its remaining movement."
        description_inactive= _ "This unit can hide in forest, and remain undetected by its enemies. But only in deciduous forest.

Enemy units cannot see this unit while it is in forest, except if they have units next to it. Any enemy unit that first discovers this unit immediately loses all its remaining movement."
        affect_self=yes
        [filter_self]
            [filter_location]
                terrain=*^Fds
            [/filter_location]
        [/filter_self]
    [/hides]
#enddef
#define ABILITY_DEATHAURA INTENSITY
    [heals]
        value=-{INTENSITY}
        id=deathaura
        affect_enemies=yes
        affect_allies=no
        name= _ "Deathaura"
        female_name= _ "female^Deathaura"
        description= _ "This ability causes its bearer unit to hurt adjacent enemy units at the beginning of your turn ("+{INTENSITY}+_" damage).

Does not affect poisoned enemies."
        affect_self=no
        poison=slowed
        [affect_adjacent]
            adjacent=n,ne,se,s,sw,nw
        [/affect_adjacent]
    [/heals]
#enddef
#define ABILITY_REGENERATES_OTHER VALUE
    [regenerate]
        value={VALUE}
        id=regenerates {VALUE}
        name= _ "regenerates ("+{VALUE}+_")"
        female_name= _ "female^regenerates ("+{VALUE}+_")"
        description= _ "The unit will heal itself "+{VALUE}+_" HP per turn. If it is poisoned, it will remove the poison instead of healing."
        special_note = _"This unit regenerates, which allows it to heal without standing close to a healer."
        affect_self=yes
        poison=cured
    [/regenerate]
#enddef
#define ABILITY_BLOODBOUND
    [regenerate]
        value=32
        id=bloodbound
        name= _ "bloodbound"
        female_name= _ "female^bloodbound"
        description= _ "The unit will heal itself 32 HP per turn if adjacent to another unit with the bloodbound ability. If it is poisoned, it will remove the poison instead of healing."
        affect_self=yes
        poison=cured
        [filter_self]
            [filter_adjacent]
                ability=bloodbound
            [/filter_adjacent]
        [/filter_self]
    [/regenerate]
#enddef
#define WEAPON_SPECIAL_SPIRITUAL_ATTACK
    [damage]
        id=spiritual attack
        name= _ "spiritual attack"
        name_inactive=_ "spiritual attack"
        description= _ "When this attack is used, the damage of physical retaliation attacks is divided by 3."
        multiply=0.33
        apply_to=defender
        active_on=offense
        [filter_opponent]
            [filter_weapon]
                type=blade,pierce,impact
            [/filter_weapon]
        [/filter_opponent]
    [/damage]
#enddef
#define WEAPON_SPECIAL_ICEFORM
    [damage]
        id=iceform
        name= _ "iceform"
        name_inactive=_ "iceform"
        description= _ "When this attack is used, the user is transformed into a moving block of ice, taking 33% less cold, pierce and blade damage. It works both offensively and defensively."
        multiply=0.66
        apply_to=opponent
        [filter_opponent]
            [filter_weapon]
                type=cold,pierce,blade
            [/filter_weapon]
        [/filter_opponent]
    [/damage]
#enddef
#define WEAPON_SPECIAL_HORRID
    [damage]
        id=horrid
        multiply=0.66
        apply_to=defender
        active_on=offense
    [/damage]
    [dummy]
        id=horrid_dummy
        name=_"horrid"
        description= _ "When this attack is used offensively, the damage of retaliation attacks is decreased by 33%."
        apply_to=both
    [/dummy]
#enddef
#define ABILITY_HEALS_OTHER VALUE
    [heals]
        value={VALUE}
        id=healing_{VALUE}
        affect_allies=yes
        cumulative=yes
        name= _ "heals +"+{VALUE}
        female_name= _ "female^heals +"+{VALUE}
        description= _ "This unit combines herbal remedies with magic to heal units more quickly than is normally possible on the battlefield.

A unit cared for by this healer may heal up to "+{VALUE}+_" HP per turn, or be cured of poisoning."
        affect_self=no
        poison=cured
        [affect_adjacent]
            adjacent=n,ne,se,s,sw,nw
        [/affect_adjacent]
    [/heals]
    [heals]
        # this is needed for healing of incinerating, unholy hunger etc
        id=healing
    [/heals]
#enddef
#define ABILITY_UNHOLYBANE INTENSITY
    [heals]
        value=-{INTENSITY}
        id=unholybane_{INTENSITY}
        affect_enemies=yes
        affect_allies=no
        name= _ "unholybane ("+{INTENSITY}+_")"
        female_name= _ "female^unholybane ("+{INTENSITY}+_")"
        description= _ "The unit damages adjacent undead enemies at the beginning of your turn, causing a loss of "+{INTENSITY}+_" HP (max. down to 1 HP, never kills). The ability ignores any of the enemy's resistances or weaknesses, so it is very powerful against spirits!"
        affect_self=no
        [affect_adjacent]
            adjacent=n,ne,se,s,sw,nw
            [filter]
                race=undead
            [/filter]
        [/affect_adjacent]
    [/heals]
#enddef
#define ABILITY_BURNING_AURA POWER
    [heals]
        value=-{POWER}
        id=burning_aura {POWER}
        affect_enemies=yes
        name= _ "burns foes ("+{POWER}+_")"
        female_name= _ "female^burns foes ("+{POWER}+_")"
        description= _ "The unit singes adjacent enemies at the beginning of your turn, causing a loss of "+{POWER}+_" HP (max. down to 1 HP, never kills). The ability ignores any of the enemy's resistances or weaknesses, so it is very powerful against spirits!"
        affect_self=no
        affect_allies=no
        poison=slowed
        [affect_adjacent]
            adjacent=n,ne,se,s,sw,nw
        [/affect_adjacent]
    [/heals]
#enddef
#define WEAPON_SPECIAL_UNHOLYBANE
    [damage]
        id=unholybane
        name= _ "unholybane"
        description= _ "This attack does triple damage to undead (also other non-monster creations of magic)."
        multiply=3
        [filter_opponent]
            race=undead
            [or]
                race=demon-loti
            [/or]
            [or]
                race=demon-loti-secret
            [/or]
            [or]
                race=black soul-loti
            [/or]
            [or]
                race=burning soul-loti
            [/or]
            [or]
                race=undead demon-loti
            [/or]
        [/filter_opponent]
    [/damage]
#enddef
#define WEAPON_SPECIAL_LORD_OF_THE_FLIES
    [damage]
        id=lord of the flies
        name= _ "lord of the flies"
        description= _ "This attack does triple damage to flies."
        multiply=3
        [filter_opponent]
            type=Flies
        [/filter_opponent]
    [/damage]
#enddef
#define WEAPON_SPECIAL_MISANTHROPIA
    [damage]
        id=misanthropia
        name= _ "misanthropia"
        description= _ "This attack does double damage to humans."
        multiply=2
        [filter_opponent]
            race=human
        [/filter_opponent]
    [/damage]
#enddef
#define WEAPON_SPECIAL_MISNANIA
    [damage]
        id=misnania
        name= _ "misnania"
        description= _ "This attack does double damage to dwarves."
        multiply=2
        [filter_opponent]
            race=dwarf
        [/filter_opponent]
    [/damage]
#enddef
#define WEAPON_SPECIAL_MISORCIA
    [damage]
        id=misorcia
        name= _ "misorcia"
        description= _ "This attack does double damage to orcs."
        multiply=2
        [filter_opponent]
            race=orc
        [/filter_opponent]
    [/damage]
#enddef
#define WEAPON_SPECIAL_MISDRYADIA
    [damage]
        id=misdryadia
        name= _ "misdryadia"
        description= _ "This attack does double damage to elves."
        multiply=2
        [filter_opponent]
            race=elf
        [/filter_opponent]
    [/damage]
#enddef
#define WEAPON_SPECIAL_MISDRACONIA
    [damage]
        id=misdraconia
        name= _ "misdraconia"
        description= _ "This attack does double damage to drakes and dragons."
        multiply=2
        [filter_opponent]
            race=drake
            [or]
                type=Fire Dragon loti
            [/or]
            [or]
                type=Ice Dragon
            [/or]
            [or]
                type=Dark Dragon
            [/or]
            [or]
                type=Skeletal Dragon
            [/or]
            [or]
                type=Dracolich
            [/or]
        [/filter_opponent]
    [/damage]
#enddef
#define WEAPON_SPECIAL_ANARCHY
    [damage]
        id=anarchy
        name= _ "anarchy"
        description= _ "This attack does 50% more damage to lawful units."
        multiply=1.5
        [filter_opponent]
            [filter_wml]
                alignment=lawful
            [/filter_wml]
        [/filter_opponent]
    [/damage]
#enddef
#define ABILITY_LESSER_NIGHTSTALK
    [hides]
        id=lesser nightstalk
        name= _ "lesser nightstalk"
        female_name= _ "lesser nightstalk"
        description= _ "The unit becomes invisible during night, but only in forests, hills, mountains and villages.

Enemy units cannot see this unit at night, except if they have units next to it. Any enemy unit that first discovers this unit immediately loses all its remaining movement."
        description_inactive= _ "The unit becomes invisible during night, but only in forests, hills, mountains and villages.

Enemy units cannot see this unit at night, except if they have units next to it. Any enemy unit that first discovers this unit immediately loses all its remaining movement."
        affect_self=yes
        [filter_self]
            [filter_location]
                time_of_day=chaotic
                terrain=*^Fp,*^Fet,*^Ft,*^Fpa,*^Fd*,*^Fm*,*^V*,H*,M*,C*,K*,*^Zf*
            [/filter_location]
        [/filter_self]
    [/hides]
#enddef
#define ABILITY_NOCTURNAL_AMBUSH
    [hides]
        id=nocturnal ambush
        name= _ "nocturnal ambush"
        female_name= _ "nocturnal ambush"
        name_inactive= _ "nocturnal ambush"
        female_name_inactive= _ "female^nocturnal ambush"
        description= _ "The unit becomes invisible in forests, but only at night.

Enemy units cannot see this unit at night, except if they have units next to it. Any enemy unit that first discovers this unit immediately loses all its remaining movement."
        description_inactive= _ "The unit becomes invisible in forests, but only at night.

Enemy units cannot see this unit at night, except if they have units next to it. Any enemy unit that first discovers this unit immediately loses all its remaining movement."
        affect_self=yes
        [filter_self]
            [filter_location]
                time_of_day=chaotic
                terrain=*^Fp,*^Fet,*^Ft,*^Fpa,*^Fd*,*^Fm*
            [/filter_location]
        [/filter_self]
    [/hides]
#enddef
#define WEAPON_SPECIAL_DISTANT_ATTACK
    [attacks]
        id=distant attack
        name= _ "distant attack"
        name_inactive= _ "distant attack"
        description= _ "When this attack is used, the enemy will not counter."
        description_inactive= _ "When this attack is used, the enemy will not counter."
        value=0
        apply_to=opponent
        active_on=offense
    [/attacks]
#enddef
#define WEAPON_SPECIAL_ANGER
    [attacks]
        id=anger
        name= _ "anger"
        description= _ "When used offensively, this attack doubles the attacks done by both attacker and defender."
        multiply=2
        apply_to=both
        active_on=offense
    [/attacks]
#enddef

#define WEAPON_SPECIAL_QUICKSTRIKE
    # This ability is just to notice that the attack uses no movement.
    [attacks]
        id=quickstrike
        name= _ "quickstrike"
        name_inactive= _ "quickstrike"
        description= _ "When this attack is used, the attacker loses no movement. However, this does not give back the movement lost due to entering a unit's ZoC."
    [/attacks]
#enddef

# These abilities are useless alone. There are events attached to them, without them, they are useless. The events
# can be found in global_events.cfg.
#define WEAPON_SPECIAL_DAZZLE
    [dummy]
        id=dazzle
        name= _ "dazzle"
        description= _ "This weapon special limits the target's chance to hit to 50% for one turn."
    [/dummy]
#enddef
#define WEAPON_SPECIAL_MIND_RAID
    [dummy]
        id=mind raid
        name= _ "mind raid"
        description= _ "This weapon special steals 2 experience from the opponent, increasing the user's experience. It does not work if the target does not have enough experience."
    [/dummy]
#enddef
#define WEAPON_SPECIAL_STORM
    [dummy]
        id=storm
        name= _ "storm"
        description= _ "The damage of this attack will affect also a lot of other enemy units around the caster, and will also deal some impact damage. It is so tiring that the unit's damage decreases by 12 after the attack, the damage penalty will half each turn."
    [/dummy]
#enddef
#define WEAPON_SPECIAL_INFECT
    [poison]
        id=infect
        name= _ "infect"
        description= _ "The target of this weapon specials becomes poisoned in a special way: if it dies from this toxin or is killed while affected by it, it becomes a Walking Corpse."
    [/poison]
#enddef
#define WEAPON_SPECIAL_GREATER_INFECT
    [poison]
        id=greater infect
        name= _ "greater infect"
        description= _ "The target of this weapon specials becomes poisoned in a special way: if it dies from this toxin or is killed while affected by it, it becomes a Soulless."
    [/poison]
#enddef
#define WEAPON_SPECIAL_KNOCKBACK
    [damage]
        id=knockback
        name= _ "knockback"
        description= _ "When this attack is used offensively, at the end of the fight the enemy will be knocked back."
    [/damage]
#enddef
#define ABILITY_NECROMANCY
    [dummy]
        id=necromancy
        name= _ "necromancy"
        female_name= _ "female^necromancy"
        description= _ "If this unit dies, it becomes a lich."
    [/dummy]
#enddef
#define ABILITY_COWARDICE
    [dummy]
        id=cowardice
        name= _ "cowardice"
        female_name= _ "female^cowardice"
        description= _ "If this unit runs out of moves with no adjacent units, it loses its attack that turn but gains its moves back."
    [/dummy]
#enddef
#define ABILITY_TRIGGERABLE
    [dummy]
        id=triggerable
        name= _ "triggerable"
        description= _ "This unit's attack damage increases by 1 when hit. Does not work when hit by a retaliating unit. The added damage bonus halves each turn (rounded down)."
    [/dummy]
#enddef
#define ABILITY_VINDICTIVE
    [dummy]
        id=vindictive
        name= _ "vindictive"
        description= _ "This unit's attack damage increases by 1 when an adjacent ally is hit. Does not work when hit by a retaliating unit. The added damage bonus halves each turn (rounded down)."
    [/dummy]
#enddef
#define ABILITY_UNFORGIVING
    [dummy]
        id=unforgiving
        name= _ "unforgiving"
        description= _ "This unit's attack deals 50% additional fire damage when directly hitting a unit type that hit it in the last 5 turns. Does not work when hit by a retaliating unit."
    [/dummy]
#enddef
#define ABILITY_WRATH
    [dummy]
        id=wrath
        name= _ "wrath"
        female_name= _ "female^wrath"
        description= _ "When offensively hitting an enemy, this unit's attack damage increases by 1. The added damage bonus halves each turn (rounded down)."
    [/dummy]
#enddef
#define WEAPON_SPECIAL_LETHARGY
    [dummy]
        id=lethargy
        name= _ "lethargy"
        female_name= _ "female^lethargy"
        description= _ "When hitting an enemy, the opponent's attack damage decreases by 2. The reduction of damage bonus halves each turn (rounded down)."
    [/dummy]
#enddef
#define WEAPON_SPECIAL_LESSER_LETHARGY
    [dummy]
        id=lesser lethargy
        name= _ "lesser lethargy"
        female_name= _ "female^lesser lethargy"
        description= _ "When hitting an enemy, the opponent's attack damage decreases by 1. The reduction of damage bonus halves each turn (rounded down)."
    [/dummy]
#enddef
#define ABILITY_HATE_SPEECH
    [dummy]
        id=hate speech
        name= _ "hate speech"
        female_name= _ "female^hate speech"
        description= _ "When an adjacent unit offensively hits an enemy, its attack damage increases by 1. The added damage bonus halves each turn (rounded down)."
    [/dummy]
#enddef
#define ABILITY_MARTYRDOM
    [dummy]
        id=martyrdom
        name= _ "martyrdom"
        female_name= _ "female^martyrdom"
        description= _ "Hatred arouses among its comrades when this unit gets hurt. For every hit this unit takes, the damage of all adjacent allies increases by 1. The damage increased this way halves each turn (rounded down)."
    [/dummy]
#enddef
#define ABILITY_INNOCENCE
    [dummy]
        id=innocence
        name= _ "innocence"
        female_name= _ "female^innocence"
        description= _ "Through magical means, this unit looks so innocent that attacking it causes the attacker to suffer emotional trauma that makes it deal 1 less damage for each hit. The damage decreased this way halves each turn."
    [/dummy]
#enddef
#define ABILITY_BLOOD_DRINKING
    [dummy]
        id=blood drinking
        name= _ "blood drinking"
        female_name= _ "female^blood drinking"
        description= _ "When a unit adjacent to this unit takes damage, this unit heals 5% of the damage."
    [/dummy]
#enddef
#define ABILITY_UNHOLY_HUNGER
    [dummy]
        id=unholy hunger
        name= _ "unholy hunger"
        description= _ "This unit craves for the souls of living beings. When it kills a living unit, it will heal 10 HP and its maximum HP will increase by 3. When it is not fed continually, it starts to starve, and loses 1 point of maximum HP more for each turn it did not kill something at the beginning of each turn. The hunger has no effect if the unit is cared by a healer or standing in a village."
    [/dummy]
#enddef
#define WEAPON_SPECIAL_INCINERATE
    [dummy]
        id=incinerate
        name= _ "incinerate"
        description= _ "This attack incinerates its targets. Burning units lose 16 HP every turn until they are cured. Flames can kill a unit, the attacker that incinerated the unit gets the experience."
    [/dummy]
#enddef
#define WEAPON_SPECIAL_HIT_AND_RUN
    [dummy]
        id=hit and run
        name= _ "hit and run"
        description= _ "When this attack is used, the unit regains half of its max MP."
    [/dummy]
#enddef
#define WEAPON_SPECIAL_PARRY
    [dummy]
        id=parry
        name= _ "parry"
        description= _ "When a defender target misses, the attacker will hit him without any checks."
    [/dummy]
#enddef
#define WEAPON_SPECIAL_PIERCE
    [dummy]
        id=pierce
        name= _ "pierce"
        description= _ "If this attack is used offensively, the enemy behind the target is hurt as well, for 1/2 of the damage. The user loses 2 damage points after the attack, the damage penalty will half each turn."
    [/dummy]
#enddef
#define WEAPON_SPECIAL_MAYHEM
    [dummy]
        id=mayhem
        name= _ "mayhem"
        description= _ "If this attack hits offensively, opponent's damage is lowered by 1, until he advances."
    [/dummy]
#enddef
#define WEAPON_SPECIAL_TRICKERY
    [dummy]
        id=trickery
        name= _ "trickery"
        description= _ "If this attack hits offensively, opponent's defence on all terrains is lowered by 5%, until he advances."
    [/dummy]
#enddef
#define WEAPON_SPECIAL_DOOM
    [dummy]
        id=doom
        name= _ "doom"
        description= _ "If this attack hits offensively, opponent's resistances will drop by 5% until he advances."
    [/dummy]
#enddef
#define WEAPON_SPECIAL_CONE
    [dummy]
        id=cone
        name= _ "cone"
        description= _ "With this attack enemies next to attacker and target suffer 1/2 the damage. The foe behind the defender takes 1/2 of the damage too, while their adjacent comrades take 1/4 of it. It is so tiring that the unit's damage decreases by 6 after the attack, the damage penalty will half each turn. Works only offensively."
    [/dummy]
#enddef
#define WEAPON_SPECIAL_HOSE
    [dummy]
        id=hose
        name= _ "hose"
        description= _ "If this attack us used offensively, many enemies behind and around the original target are hit. It is so tiring that the unit's damage decreases by 12 after the attack, the damage penalty will half each turn."
    [/dummy]
#enddef
#define WEAPON_SPECIAL_EXTRA_5_IMPACT_DAMAGE
    [dummy]
        id=extra damage 5 impact
        name= _ "extra damage (+5; impact)"
        description= _ "After the damage with this weapon is dealt, the target takes 5 points of impact damage, that is unaffected by charge or slow."
    [/dummy]
#enddef
#define ABILITY_WARDRUMS
    [dummy]
        id=wardrums
        name= _ "wardrums"
        description= _ "All adjacent members of the same side get +2 to movement at the start of their turn."
    [/dummy]
#enddef
#define ABILITY_PENETRATE_LEADERSHIP
    [dummy]
        id=push
        name= _ "push"
        description= _ "When an ally standing next to this unit finishes attacking, it gains one movement point."
    [/dummy]
#enddef
#define ABILITY_THORNS
    [dummy]
        id=thorns
        name= _ "thorns"
        description= _ "Any unit that attacks this unit in melee suffers two points of piercing damage. Unlike reflect, it can kill."
    [/dummy]
#enddef
#define ABILITY_LESSER_REDEEM
    [dummy]
        id=lesser redeem
        name= _ "lesser redeem"
        description= _ "When this unit attacks another unit, there is a chance that the target will be absorbed, inversely proportional to enemy level. When the redeem count reaches a certain level, the unit's properties will improve."
    [/dummy]
#enddef
#define ABILITY_MOCKERY
    [dummy]
        id=mockery
        name= _ "mockery"
        description= _ "When an attack against this unit misses, he/she heals 2 HP."
    [/dummy]
#enddef
#define ABILITY_MURDERLUST
    [dummy]
        id=murderlust
        name= _ "murderlust"
        description= _ "When this unit kills another unit, he/she heals 8 HP."
    [/dummy]
#enddef
#define ABILITY_KILLHUNGER
    [dummy]
        id=killhunger
        name= _ "killhunger"
        description= _ "When this unit kills another unit, it heals 4 HP, and is ridden of poison and slow."
    [/dummy]
#enddef
#define ABILITY_LESSER_EVISCERATION
    [dummy]
        id=lesser evisceration
        name= _ "lesser evisceration"
        description= _ "When this unit kills another unit, nearby allies heal 4 HP, and are ridden of poison and slow."
    [/dummy]
#enddef
#define ABILITY_EVISCERATION
    [dummy]
        id=evisceration
        name= _ "evisceration"
        description= _ "When this unit kills another unit, nearby allies heal 10 HP, and are ridden of poison and slow."
    [/dummy]
#enddef
#define ABILITY_GREATER_EVISCERATION
    [dummy]
        id=greater evisceration
        name= _ "greater evisceration"
        description= _ "When this unit kills another unit, nearby allies heal 16 HP, and are ridden of poison and slow."
    [/dummy]
#enddef
#define ABILITY_REGROWING
    [dummy]
        id=regrowing
        name= _ "regrowing"
        description= _ "When this unit begins combat, offensively or defensively, it heals an amount of hitpoints equal to two times their level."
    [/dummy]
#enddef
#define ABILITY_FLAMING_RADIANCE
    [dummy]
        id=flaming radiance
        name= _ "flaming radiance"
        description= _ "All adjacent foes to this unit take fire damage every turn. At first turn, they take 8 damage and this number increases by 8 every turn they stand in the range of this ability. This ability cannot kill."
    [/dummy]
#enddef
#define ABILITY_FROM_THE_ASHES
    [dummy]
        id=from the ashes
        name= _ "from the ashes"
        description= _ "If this unit is attacked and its hitpoints drop below 20, it heals 40 hitpoints and deals 40 fire damage to all nearby foes. This ability can be used only once per 10 turns."
    [/dummy]
#enddef
#define ABILITY_IMMUNE_TO_POISON
    [dummy]
        id=immune to poison
        name= _ "immune to poison"
        description= _ "Poisonous attacks have no effect on this unit."
    [/dummy]
#enddef
#define ABILITY_CANCER
    [dummy]
        id=cancer
        name= _ "cancer"
        description= _ "This unit is poisoned at the beginning of its turn. Because it's not an attack, the <i>immune to poison</i> ability does not apply."
    [/dummy]
#enddef
#define ABILITY_FROSTBITE
    [dummy]
        id=frostbite
        name= _ "frostbite"
        description= _ "This unit takes 24 cold damage at the beginning of its turn."
    [/dummy]
#enddef
#define ABILITY_STEALS
    [dummy]
        id=steals
        name= _ "steals"
        description= _ "When this unit hits an enemy with a melee attack, it has a chance to earn some gold."
    [/dummy]
#enddef
#define ABILITY_TAX_COLLECTOR
    [dummy]
        id=tax collector
        name= _ "tax collector"
        description= _ "When this unit hits an enemy, it has a chance to tax its own side and part it from some gold."
    [/dummy]
#enddef
#define ABILITY_PRODUCER
    [dummy]
        id=producer
        name= _ "producer"
        description= _ "This unit occasionally earns some gold for his side."
    [/dummy]
#enddef
#define ABILITY_IMMUNE_TO_DRAIN
    [dummy]
        id=immune to drain
        name= _ "immune to drain"
        description= _ "This unit is immune to drain."
    [/dummy]
#enddef
#define ABILITY_IMMUNE_TO_SLOW
    [dummy]
        id=resistant to slow
        name= _ "resistant to slow"
        description= _ "This unit has so much life energy in it, that it will break through any slowing effect almost instantly."
    [/dummy]
#enddef
#define ABILITY_FIRECAST
    [dummy]
        id=autocast
        name= _ "firecast"
        description= _ "When this unit hits with a melee attack in offence, a randomly chosen fire spell is cast at the target."
        cast="fireball,firestorm,magic missile,fire breath,fire blast"
    [/dummy]
#enddef
#define WEAPON_SPECIAL_SHOCKWAVE
    [slow]
        id=shockwave
        name= _ "shockwave"
        description= _ "This attack is so strong that it slows the target, and creates a shock wave that knocks all enemies adjacent to the target 1 hex away from it, and causes them to take 8 impact damage. When used defensively, it only slows the attacker."
    [/slow]
#enddef
#define WEAPON_SPECIAL_CLEAVE
    [damage]
        id=cleave
        name= _ "cleave"
        description= _ "This attack will hit additional enemies in the two hexes that are adjacent to both the attacker and defender, in a crescent moon shape, for 50% of the original damage. It is so tiring that the unit's damage decreases by 2 after the attack, the damage penalty will half each turn."
    [/damage]
#enddef
#define WEAPON_SPECIAL_KAMIKAZE_SPRINT
    [damage]
        id=kamikaze sprint
        name= _ "kamikaze sprint"
        description= _ "If this attack hits offensively, the attacker first takes the damage of all the opponent's attacks. Then, the enemy behind the target takes a half of this attack's damage, the enemy behind him takes a quarter of the initial damage etc, until there are no more enemies in the row, and the attacker will appear there. If the opponent's damage would kill, the weapon special does not work."
    [/damage]
#enddef
#define WEAPON_SPECIAL_DISINTEGRATE
    [damage]
        id=disintegrate
        name= _ "disintegrate"
        description= _ "Every blow with this weapon has a 2% chance to kill an enemy without any checks."
    [/damage]
#enddef
#define WEAPON_SPECIAL_SOUL_ANNIHILATION
    [damage]
        id=soul annihilation
        name= _ "soul annihilation"
        description= _ "Every blow with this attack has a 1% chance to kill an enemy, dealing arcane damage to nearby enemies, the damage is the amount of victim's remaining health divided by the number of nearby enemies with arcane damage."
    [/damage]
#enddef
#define WEAPON_SPECIAL_NOSFERATU_GORGE
    [damage]
        id=nosferatu gorge
        name= _ "nosferatu's gorge"
        description= _ "Every blow with this attack has a chance to add all the victims' remaining hitpoints to the attacker's hitpoints, killing the victim. The chance depends on victim's level. Works only in offence."
    [/damage]
#enddef
#define WEAPON_SPECIAL_RAIJERS_SALOON
    [damage]
        id=raijers saloon
        name= _ "Raijer's saloon"
        description= _ "Every blow with this attack has a chance to add all the victims' hitpoints to the hitpoints of attacker and attacker's nearby allies (divided by the number of healed units), killing the victim. The chance depends on victim's level. Works only in offence."
    [/damage]
#enddef
#define WEAPON_SPECIAL_SOUL_THRASH
    [damage]
        id=soul thrash
        name= _ "soul thrash"
        description= _ "Every blow with this attack has a 1% chance to kill an enemy, adding the victims' level to the attacker's wrath (increasing the damage temporarily, the increase is halved every turn). Works only offensively."
    [/damage]
#enddef
#define WEAPON_SPECIAL_SOUL_EXTRACTION
    [damage]
        id=soul extraction
        name= _ "soul extraction"
        description= _ "Every blow with this attack has a 1% chance to kill an enemy, summoning a Ghost in the process."
    [/damage]
#enddef
#define ABILITY_ABSORB_1
    [dummy]
        id=absorb
        name= _ "absorbs (1)"
        value=1
        description= _ "When this unit is hit, it takes its regular damage, but heals 1 HP after it."
    [/dummy]
#enddef
#define ABILITY_ABSORB_2
    [dummy]
        id=absorb
        name= _ "absorbs (2)"
        value=2
        description= _ "When this unit is hit, it takes its regular damage, but heals 2 HP after it."
    [/dummy]
#enddef
#define ABILITY_ABSORB_3
    [dummy]
        id=absorb
        name= _ "absorbs (3)"
        value=3
        description= _ "When this unit is hit, it takes its regular damage, but heals 3 HP after it."
    [/dummy]
#enddef
#define ABILITY_ABSORB_4
    [dummy]
        id=absorb
        name= _ "absorbs (4)"
        value=4
        description= _ "When this unit is hit, it takes its regular damage, but heals 4 HP after it."
    [/dummy]
#enddef
#define ABILITY_LEECH
    [dummy]
        id=leech
        name= _ "leeches"
        description= _ "All adjacent enemy units to a unit with this ability lose 2 hitpoints at the beginning of this unit's turn. The damage dealt heals the unit. It cannot kill."
    [/dummy]
#enddef
#define ABILITY_PARASITE
    [dummy]
        id=parasite
        name= _ "parasite"
        description= _ "All adjacent allies to a unit with this ability lose 4 hitpoints at the beginning of this unit's turn. The damage dealt heals the unit. It cannot kill."
    [/dummy]
#enddef
#define WEAPON_SPECIAL_LEECH
    [damage]
        id=leeches
        name= _ "leeches"
        description= _ "This is similar to the drains ability, but it drains only 1/10 of the damage inflicted but it can leech also the magic bound in the undeath of non-living foes."
    [/damage]
#enddef
#define WEAPON_SPECIAL_EXPLOSIVE_LEECH
    [damage]
        id=explosive leech
        name= _ "explosive leech"
        description= _ "When this attack is used, all enemies next to the target take 1/4 of the damage the target was dealt and the life is added to the caster's health. It is so tiring that the unit's damage decreases by 6 after the attack, the damage penalty will half each turn."
    [/damage]
#enddef
#define WEAPON_SPECIAL_EXPLOSIVE_SLOW
    [damage]
        id=explosive slow
        name= _ "explosive slow"
        description= _ "When this attack is used, all enemies adjacent to a target are slowed."
    [/damage]
#enddef
#define WEAPON_SPECIAL_EXPLOSIVE
    [damage]
        id=explosive
        name= _ "explosive"
        description= _ "When this attack is used, all enemies adjacent to the target take 75% of the damage, and even those behind them will take a few if the damage is sufficiently high. It is so tiring that the unit's damage decreases by 10 after the attack, the damage penalty will half each turn."
    [/damage]
#enddef
#define WEAPON_SPECIAL_EXPLOSIVE_UNPROTECTED
    [damage]
        id=explosive unprotected
        name= _ "explosive unprotected"
        description= _ "When this attack is used, all units adjacent to the target take 75% of the damage, including allies. It is so tiring that the unit's damage decreases by 8 after the attack, the damage penalty will half each turn."
    [/damage]
#enddef
#define WEAPON_SPECIAL_EXPLOSIVE_DAMAGE_ENEMY
    [damage]
        id=explosive damage enemy
        name= _ "explosive damage"
        description= _ "When this attack is used offensively, all units adjacent to the target take 10 damage."
    [/damage]
#enddef
#define WEAPON_SPECIAL_WHIRLWIND
    [attacks]
        id=whirlwind
        name= _ "whirlwind"
        name_inactive= _ "whirlwind"
        description= _ "When this attack is used, all enemies adjacent the attacker take the damage and the enemy cannot retaliate. It is so tiring that the unit's damage decreases by 10 after the attack, the damage penalty will half each turn."
        description_inactive= _ "When this attack is used, all enemies adjacent the attacker take the damage and the enemy cannot retaliate. It is so tiring that the unit's damage decreases by 10 after the attack, the damage penalty will half each turn."
        value=0
        apply_to=opponent
    [/attacks]
#enddef
#define WEAPON_SPECIAL_CHAOS
    [chance_to_hit]
        id=chaos
        name= _ "chaos"
        description= _ "When used defensively, this attacks damages all surrounding foes for a half of the damage, and it always has a 70% chance to hit regardless of the defensive ability of the attacking unit. Whether in defence or on attack, it is so tiring that the unit's damage decreases by 2 afterwards and then halves with each turn."
        description_inactive= _ "When used defensively, this attacks damages all surrounding foes for a half of the damage, and it always has a 70% chance to hit regardless of the defensive ability of the attacking unit. Whether in defence or on attack, it is so tiring that the unit's damage decreases by 2 afterwards and then halves with each turn."
        #This is partially coded elsewhere.
        value=70
        cumulative=no
        active_on=defense
    [/chance_to_hit]
#enddef
#define WEAPON_SPECIAL_PURIFY
    [dummy]
        id=purify
        name= _ "purify"
        description= _ "When an undead unit is killed by this attack, it becomes living again. Does not work on undead demons, black souls or other otherwordly undead-like abominations."
    [/dummy]
#enddef
#define ABILITY_PENETRATE
    [dummy]
        id=penetrate
        name= _ "penetrates"
        female_name= _ "female^penetrates"
        description= _ "This unit gains 1 movement after attacking, allowing it to slowly progress through ranks of enemies if it can survive their attacks."
    [/dummy]
#enddef
#define ABILITY_RETRIBUTION
    [dummy]
        id=retribution
        name= _ "retribution"
        female_name= _ "female^retribution"
        description= _ "When this unit is hit, an amount of fire damage equal to a quarter of the damage dealt hurts the attacker."
    [/dummy]
#enddef
#define ABILITY_WEAK_REFLECT
    [dummy]
        id=weak reflect
        name= _ "weak reflect"
        female_name= _ "female^weak reflect"
        description= _ "When this unit is hit, an quarter of the damage it took is dealt also to the attacker. It cannot kill, unlike thorns."
    [/dummy]
#enddef
#define ABILITY_REFLECT
    [dummy]
        id=reflect
        name= _ "reflect"
        female_name= _ "female^reflect"
        description= _ "When this unit is hit, an half of the damage it took is dealt also to the attacker. It cannot kill, unlike thorns."
    [/dummy]
#enddef
#define ABILITY_SOUL_EATER
    [dummy]
        id=soul eater
        name= _ "soul eater"
        female_name= _ "female^soul eater"
        description= _ "When this unit kills a certain amount of beings, it obtains special advancements."
    [/dummy]
#enddef
#define ABILITY_FREEZING_AURA
    [dummy]
        id=freezing
        name= _ "freezing aura"
        female_name= _ "female^freezing aura"
        description= _ "All adjacent enemies will be slowed at the beginning of their turn."
    [/dummy]
#enddef
#define ABILITY_TOXIC_AURA
    [dummy]
        id=dark aura
        name= _ "dark aura"
        female_name= _ "female^dark aura"
        description= _ "All adjacent enemies will be poisoned at the beginning of their turn."
    [/dummy]
#enddef
#define ABILITY_FEEDING_EASY
    [dummy]
        id=feeding_easy
        name= _ "feeding"
        female_name= _ "female^feeding"
        description= _ "This unit gains 1 hitpoint added to its maximum whenever it kills a living unit."
    [/dummy]
#enddef
#define ABILITY_TEMPTATION
    [dummy]
        id=temptation
        name= _ "temptation"
        female_name= _ "female^temptation"
        description= _ "This unit makes its enemies of opposite gender infatuated at the beginning of their turn, making them unable to attack, but able to break this charm by fleeing."
        special_note=_"If a unit of the opposite gender stands next to this unit at the beginning of its turn, it loses its will to attack that turn, and can only resist the temptation to run away."
    [/dummy]
#enddef
#define ABILITY_NORTHFROST_AURA
    [dummy]
        id=northfrost aura
        name= _ "northfrost aura"
        female_name= _ "female^northfrost aura"
        description= _ "All enemies in the range of two hexes from this unit will be slowed at the beginning of their turn."
    [/dummy]
#enddef
#define ABILITY_SPELL_EATER
    [resistance]
        # Does more stuff than just increases resistance
        id=spell eater
        add=100
        max_value=100
        name=_"spell eater"
        female_name=_"female^spell eater"
        description= _ "This unit feeds on nearby magical energies, increasing nearby allied units' arcane resistance by 100% and grows stronger when a nearby allied unit is hit with arcane, fire or cold damage."
        affect_self=no
        affect_allies=yes
        apply_to=arcane
        [affect_adjacent]
            adjacent=n,ne,se,s,sw,nw
        [/affect_adjacent]
    [/resistance]
#enddef

# These abilities replace the dummy abilities used before wesnoth 1.16 version
# and utilisation of latent weapon specials
#define ABILITY_BERSERK_LEADERSHIP
    [berserk]
        id=berserk_leadership
        name= _ "radiating insanity"
        female_name= _ "female^radiating insanity"
        description= _ "All nearby allies fight with a bloodlust equal to the dwarvish berserk on melee attacks."
        value=30
        [filter_student]
            [filter_weapon]
                range=melee
            [/filter_weapon]
        [/filter_student]
        cumulative=no
        affect_self=no
        affect_allies=yes
        [affect_adjacent]
        [/affect_adjacent]
    [/berserk]
#enddef
#define ABILITY_CHARGE_LEADERSHIP
    [damage]
        id=charge_leadership
        name= _ "warlord's rule"
        female_name= _ "female^warlord's rule"
        description= _ "All nearby allies deal and take 50% more melee damage."
        special_note=_" This unit can fanaticise all units adjacent to him into a frenzy, making them deal and take double melee damage, but only offensively."
        [filter_student]
            [filter_weapon]
                range=melee
            [/filter_weapon]
        [/filter_student]
        active_on=offense
        multiply=1.5
        cumulative=no
        affect_self=no
        affect_allies=yes
        apply_to=both
        [affect_adjacent]
        [/affect_adjacent]
    [/damage]
#enddef
#define ABILITY_POISON_LEADERSHIP
    [poison]
        id=poison_leadership
        name= _ "radiation"
        female_name= _ "female^radiation"
        description= _ "All nearby allies get poisonous attacks."
        affect_self=no
        affect_allies=yes
        [affect_adjacent]
        [/affect_adjacent]
    [/poison]
#enddef
#define ABILITY_FIRSTSTRIKE_LEADERSHIP
    [firststrike]
        id=firststrike_leadership
        name= _ "zeal aura"
        female_name= _ "female^zeal aura"
        description= _ "All nearby allies get firststrike."
        affect_self=no
        affect_allies=yes
        [affect_adjacent]
        [/affect_adjacent]
    [/firststrike]
#enddef
#define ABILITY_BACKSTAB_LEADERSHIP
    [damage]
        id=backstab_leadership
        name= _ "murderous presence"
        female_name= _ "female^murderous presence"
        description= _ "All nearby allies get melee backstab."
        multiply=2
        cumulative=no
        active_on=offense
        affect_self=no
        affect_allies=yes
        [filter_student]
            [filter_weapon]
                range=melee
                [not]
                    special_id_active=backstab
                [/not]
                [not]
                    special_id_active=greater backstab
                [/not]
                [not]
                    special_id_active=uber backstab
                [/not]
            [/filter_weapon]
        [/filter_student]
        [filter_opponent]
            formula="
                enemy_of(self, flanker) and not flanker.petrified
            where
                flanker = unit_at(direction_from(loc, other.facing))
            "
        [/filter_opponent]
        [affect_adjacent]
        [/affect_adjacent]
    [/damage]
#enddef
#define ABILITY_MARKSMAN_LEADERSHIP
    [chance_to_hit]
        id=marksman_leadership
        name= _ "cantor"
        female_name= _ "female^cantor"
        description= _ "This unit grants marksman to all ranged attacks of all adjacent allies."
        value=60
        cumulative=yes
        active_on=offense
        [filter_student]
            [filter_weapon]
                range=ranged
            [/filter_weapon]
        [/filter_student]
        affect_self=yes
        affect_allies=yes
        [affect_adjacent]
        [/affect_adjacent]
    [/chance_to_hit]
#enddef
#define ABILITY_DRAIN_LEADERSHIP
    [drains]
        id=drain_leadership
        name= _ "aura of hunger"
        female_name= _ "female^aura of hunger"
        description= _ "All adjacent allies gain melee drain that drains 25% of the damage dealt (instead of the usual 50%)."
        value=25
        cumulative=no
        [filter_student]
            [filter_weapon]
                range=melee
            [/filter_weapon]
        [/filter_student]
        affect_self=no
        affect_allies=yes
        [affect_adjacent]
        [/affect_adjacent]
    [/drains]
#enddef

#define SPECIAL_NOTES_ICE_DRAGON_BREATH
_" This unit accumulates liquid helium in its inside, and when he unleashes it, it turns everything in its presence into solid ice in order to evaporate. Clothes of units protect them from being frozen completely, but it still halves their movement and damage."#enddef

#define SPECIAL_NOTES_DARK_DRAGON_BREATH
_" This unit absorbs the vital energy of its victims when its foul breath touches them, healing a half of the damage inflicted and makes them fall in lethargy, halving their damage and doubling their movement costs."#enddef

#define SPECIAL_NOTES_DEMIGOD
    _" Telling everything a half-god can do would be too lengthy. But a matter to consider is that they have developed compassion out of a desire to save their wretched enemies from sins, pain, suffering and misery, they are able to redeem tormented souls. Even if this 'redeem attack' can be used only once every three turns.

Gameplay notes:
It is imperative to use the redeem attack from time to time. After redeeming a certain amount of enemies, redeem becomes more effective (possibly also a good offensive weapon) and the unit gains a new advancement line of choice. Some of them add new spells, others add new abilities. Spells gained have huge ranges, incomparable to other spells, and converge into Particle storm, an attack hitting many enemies and dealing severe arcane damage. Physical abilities converge into Spiritual Transformation, that is an attack that makes the unit attack a single target with huge damage and taking only 33% of the damage.
Without these advancements, the unit will never get particularly strong, and low level enemies may become rare to find."#enddef

#define SPECIAL_NOTES_TENTACLES
_" When this unit is attacked in melee range, the attacker takes 10 points of impact damage from his tentacles, because he strayed too close."#enddef

#define SPECIAL_NOTES_TENTACLES_AKULA
_" When this unit is attacked in melee range, the attacker takes 15 impact damage from her tentacles, because he strayed too close."#enddef

#define SPECIAL_NOTES_TENTACLES_AKULA_BOSS
_" When this unit is attacked in melee range, the attacker takes a huge amount of impact damage from her tentacles, because he strayed too close."#enddef

#define SPECIAL_NOTES_DEMON_ARCANE
_" Demons are creatures of magic, and arcane attacks have only a little effect on them."#enddef
